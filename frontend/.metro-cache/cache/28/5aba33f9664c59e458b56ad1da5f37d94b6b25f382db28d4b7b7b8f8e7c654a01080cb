{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/CartContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.CartProvider = CartProvider;\n  exports.useCart = useCart;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[3], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const CartContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function CartProvider({\n    children\n  }) {\n    _s();\n    const [cartItems, setCartItems] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      refreshCart();\n    }, []);\n    const refreshCart = async () => {\n      try {\n        setLoading(true);\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) return;\n        const response = await axios.default.get(`${API_URL}/cart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setCartItems(response.data.items || []);\n      } catch (error) {\n        console.error('Error fetching cart:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const addToCart = async item => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.post(`${API_URL}/cart`, item, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshCart();\n      } catch (error) {\n        console.error('Error adding to cart:', error);\n        throw error;\n      }\n    };\n    const removeFromCart = async index => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.delete(`${API_URL}/cart/${index}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshCart();\n      } catch (error) {\n        console.error('Error removing from cart:', error);\n        throw error;\n      }\n    };\n    const clearCart = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.delete(`${API_URL}/cart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setCartItems([]);\n      } catch (error) {\n        console.error('Error clearing cart:', error);\n        throw error;\n      }\n    };\n    const totalPrice = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(CartContext.Provider, {\n      value: {\n        cartItems,\n        loading,\n        addToCart,\n        removeFromCart,\n        clearCart,\n        refreshCart,\n        totalPrice\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }, this);\n  }\n  _s(CartProvider, \"hjcORomU9r2JakrDaeOjXnDhWgs=\");\n  _c = CartProvider;\n  function useCart() {\n    _s2();\n    const context = (0, _react.useContext)(CartContext);\n    if (context === undefined) {\n      throw new Error('useCart must be used within a CartProvider');\n    }\n    return context;\n  }\n  _s2(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"CartProvider\");\n});","lineCount":127,"map":[[15,2,27,0,"exports"],[15,9,27,0],[15,10,27,0,"CartProvider"],[15,22,27,0],[15,25,27,0,"CartProvider"],[15,37,27,0],[16,2,120,0,"exports"],[16,9,120,0],[16,10,120,0,"useCart"],[16,17,120,0],[16,20,120,0,"useCart"],[16,27,120,0],[17,2,126,1],[17,6,126,1,"_expoVirtualEnv"],[17,21,126,1],[17,24,126,1,"require"],[17,31,126,1],[17,32,126,1,"_dependencyMap"],[17,46,126,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_axios"],[19,12,2,0],[19,15,2,0,"require"],[19,22,2,0],[19,23,2,0,"_dependencyMap"],[19,37,2,0],[20,2,2,0],[20,6,2,0,"axios"],[20,11,2,0],[20,14,2,0,"_interopDefault"],[20,29,2,0],[20,30,2,0,"_axios"],[20,36,2,0],[21,2,3,0],[21,6,3,0,"_utilsStorage"],[21,19,3,0],[21,22,3,0,"require"],[21,29,3,0],[21,30,3,0,"_dependencyMap"],[21,44,3,0],[22,2,3,43],[22,6,3,43,"_reactJsxDevRuntime"],[22,25,3,43],[22,28,3,43,"require"],[22,35,3,43],[22,36,3,43,"_dependencyMap"],[22,50,3,43],[23,2,5,0],[23,8,5,6,"API_URL"],[23,15,5,13],[23,18,5,16,"_expoVirtualEnv"],[23,33,5,16],[23,34,5,16,"env"],[23,37,5,16],[23,38,5,16,"EXPO_PUBLIC_BACKEND_URL"],[23,61,5,16],[23,64,5,54],[23,70,5,60],[24,2,25,0],[24,8,25,6,"CartContext"],[24,19,25,17],[24,35,25,20],[24,39,25,20,"createContext"],[24,45,25,33],[24,46,25,33,"createContext"],[24,59,25,33],[24,61,25,63,"undefined"],[24,70,25,72],[24,71,25,73],[25,2,27,7],[25,11,27,16,"CartProvider"],[25,23,27,28,"CartProvider"],[25,24,27,29],[26,4,27,31,"children"],[27,2,27,71],[27,3,27,72],[27,5,27,74],[28,4,27,74,"_s"],[28,6,27,74],[29,4,28,2],[29,10,28,8],[29,11,28,9,"cartItems"],[29,20,28,18],[29,22,28,20,"setCartItems"],[29,34,28,32],[29,35,28,33],[29,38,28,36],[29,42,28,36,"useState"],[29,48,28,44],[29,49,28,44,"useState"],[29,57,28,44],[29,59,28,57],[29,61,28,59],[29,62,28,60],[30,4,29,2],[30,10,29,8],[30,11,29,9,"loading"],[30,18,29,16],[30,20,29,18,"setLoading"],[30,30,29,28],[30,31,29,29],[30,34,29,32],[30,38,29,32,"useState"],[30,44,29,40],[30,45,29,40,"useState"],[30,53,29,40],[30,55,29,41],[30,60,29,46],[30,61,29,47],[31,4,31,2],[31,8,31,2,"useEffect"],[31,14,31,11],[31,15,31,11,"useEffect"],[31,24,31,11],[31,26,31,12],[31,32,31,18],[32,6,32,4,"refreshCart"],[32,17,32,15],[32,18,32,16],[32,19,32,17],[33,4,33,2],[33,5,33,3],[33,7,33,5],[33,9,33,7],[33,10,33,8],[34,4,35,2],[34,10,35,8,"refreshCart"],[34,21,35,19],[34,24,35,22],[34,30,35,22,"refreshCart"],[34,31,35,22],[34,36,35,34],[35,6,36,4],[35,10,36,8],[36,8,37,6,"setLoading"],[36,18,37,16],[36,19,37,17],[36,23,37,21],[36,24,37,22],[37,8,38,6],[37,14,38,12,"token"],[37,19,38,17],[37,22,38,20],[37,28,38,26,"storage"],[37,41,38,33],[37,42,38,33,"storage"],[37,49,38,33],[37,50,38,34,"getItemAsync"],[37,62,38,46],[37,63,38,47],[37,78,38,62],[37,79,38,63],[38,8,39,6],[38,12,39,10],[38,13,39,11,"token"],[38,18,39,16],[38,20,39,18],[39,8,41,6],[39,14,41,12,"response"],[39,22,41,20],[39,25,41,23],[39,31,41,29,"axios"],[39,36,41,34],[39,37,41,34,"default"],[39,44,41,34],[39,45,41,35,"get"],[39,48,41,38],[39,49,41,39],[39,52,41,42,"API_URL"],[39,59,41,49],[39,66,41,56],[39,68,41,58],[40,10,42,8,"headers"],[40,17,42,15],[40,19,42,17],[41,12,42,19,"Authorization"],[41,25,42,32],[41,27,42,34],[41,37,42,44,"token"],[41,42,42,49],[42,10,42,52],[43,8,43,6],[43,9,43,7],[43,10,43,8],[44,8,45,6,"setCartItems"],[44,20,45,18],[44,21,45,19,"response"],[44,29,45,27],[44,30,45,28,"data"],[44,34,45,32],[44,35,45,33,"items"],[44,40,45,38],[44,44,45,42],[44,46,45,44],[44,47,45,45],[45,6,46,4],[45,7,46,5],[45,8,46,6],[45,15,46,13,"error"],[45,20,46,18],[45,22,46,20],[46,8,47,6,"console"],[46,15,47,13],[46,16,47,14,"error"],[46,21,47,19],[46,22,47,20],[46,44,47,42],[46,46,47,44,"error"],[46,51,47,49],[46,52,47,50],[47,6,48,4],[47,7,48,5],[47,16,48,14],[48,8,49,6,"setLoading"],[48,18,49,16],[48,19,49,17],[48,24,49,22],[48,25,49,23],[49,6,50,4],[50,4,51,2],[50,5,51,3],[51,4,53,2],[51,10,53,8,"addToCart"],[51,19,53,17],[51,22,53,20],[51,28,53,27,"item"],[51,32,53,41],[51,36,53,46],[52,6,54,4],[52,10,54,8],[53,8,55,6],[53,14,55,12,"token"],[53,19,55,17],[53,22,55,20],[53,28,55,26,"storage"],[53,41,55,33],[53,42,55,33,"storage"],[53,49,55,33],[53,50,55,34,"getItemAsync"],[53,62,55,46],[53,63,55,47],[53,78,55,62],[53,79,55,63],[54,8,56,6],[54,12,56,10],[54,13,56,11,"token"],[54,18,56,16],[54,20,56,18],[54,26,56,24],[54,30,56,28,"Error"],[54,35,56,33],[54,36,56,34],[54,55,56,53],[54,56,56,54],[55,8,58,6],[55,14,58,12,"axios"],[55,19,58,17],[55,20,58,17,"default"],[55,27,58,17],[55,28,58,18,"post"],[55,32,58,22],[55,33,58,23],[55,36,58,26,"API_URL"],[55,43,58,33],[55,50,58,40],[55,52,58,42,"item"],[55,56,58,46],[55,58,58,48],[56,10,59,8,"headers"],[56,17,59,15],[56,19,59,17],[57,12,59,19,"Authorization"],[57,25,59,32],[57,27,59,34],[57,37,59,44,"token"],[57,42,59,49],[58,10,59,52],[59,8,60,6],[59,9,60,7],[59,10,60,8],[60,8,62,6],[60,14,62,12,"refreshCart"],[60,25,62,23],[60,26,62,24],[60,27,62,25],[61,6,63,4],[61,7,63,5],[61,8,63,6],[61,15,63,13,"error"],[61,20,63,18],[61,22,63,20],[62,8,64,6,"console"],[62,15,64,13],[62,16,64,14,"error"],[62,21,64,19],[62,22,64,20],[62,45,64,43],[62,47,64,45,"error"],[62,52,64,50],[62,53,64,51],[63,8,65,6],[63,14,65,12,"error"],[63,19,65,17],[64,6,66,4],[65,4,67,2],[65,5,67,3],[66,4,69,2],[66,10,69,8,"removeFromCart"],[66,24,69,22],[66,27,69,25],[66,33,69,32,"index"],[66,38,69,45],[66,42,69,50],[67,6,70,4],[67,10,70,8],[68,8,71,6],[68,14,71,12,"token"],[68,19,71,17],[68,22,71,20],[68,28,71,26,"storage"],[68,41,71,33],[68,42,71,33,"storage"],[68,49,71,33],[68,50,71,34,"getItemAsync"],[68,62,71,46],[68,63,71,47],[68,78,71,62],[68,79,71,63],[69,8,72,6],[69,12,72,10],[69,13,72,11,"token"],[69,18,72,16],[69,20,72,18],[69,26,72,24],[69,30,72,28,"Error"],[69,35,72,33],[69,36,72,34],[69,55,72,53],[69,56,72,54],[70,8,74,6],[70,14,74,12,"axios"],[70,19,74,17],[70,20,74,17,"default"],[70,27,74,17],[70,28,74,18,"delete"],[70,34,74,24],[70,35,74,25],[70,38,74,28,"API_URL"],[70,45,74,35],[70,54,74,44,"index"],[70,59,74,49],[70,61,74,51],[70,63,74,53],[71,10,75,8,"headers"],[71,17,75,15],[71,19,75,17],[72,12,75,19,"Authorization"],[72,25,75,32],[72,27,75,34],[72,37,75,44,"token"],[72,42,75,49],[73,10,75,52],[74,8,76,6],[74,9,76,7],[74,10,76,8],[75,8,78,6],[75,14,78,12,"refreshCart"],[75,25,78,23],[75,26,78,24],[75,27,78,25],[76,6,79,4],[76,7,79,5],[76,8,79,6],[76,15,79,13,"error"],[76,20,79,18],[76,22,79,20],[77,8,80,6,"console"],[77,15,80,13],[77,16,80,14,"error"],[77,21,80,19],[77,22,80,20],[77,49,80,47],[77,51,80,49,"error"],[77,56,80,54],[77,57,80,55],[78,8,81,6],[78,14,81,12,"error"],[78,19,81,17],[79,6,82,4],[80,4,83,2],[80,5,83,3],[81,4,85,2],[81,10,85,8,"clearCart"],[81,19,85,17],[81,22,85,20],[81,28,85,20,"clearCart"],[81,29,85,20],[81,34,85,32],[82,6,86,4],[82,10,86,8],[83,8,87,6],[83,14,87,12,"token"],[83,19,87,17],[83,22,87,20],[83,28,87,26,"storage"],[83,41,87,33],[83,42,87,33,"storage"],[83,49,87,33],[83,50,87,34,"getItemAsync"],[83,62,87,46],[83,63,87,47],[83,78,87,62],[83,79,87,63],[84,8,88,6],[84,12,88,10],[84,13,88,11,"token"],[84,18,88,16],[84,20,88,18],[84,26,88,24],[84,30,88,28,"Error"],[84,35,88,33],[84,36,88,34],[84,55,88,53],[84,56,88,54],[85,8,90,6],[85,14,90,12,"axios"],[85,19,90,17],[85,20,90,17,"default"],[85,27,90,17],[85,28,90,18,"delete"],[85,34,90,24],[85,35,90,25],[85,38,90,28,"API_URL"],[85,45,90,35],[85,52,90,42],[85,54,90,44],[86,10,91,8,"headers"],[86,17,91,15],[86,19,91,17],[87,12,91,19,"Authorization"],[87,25,91,32],[87,27,91,34],[87,37,91,44,"token"],[87,42,91,49],[88,10,91,52],[89,8,92,6],[89,9,92,7],[89,10,92,8],[90,8,94,6,"setCartItems"],[90,20,94,18],[90,21,94,19],[90,23,94,21],[90,24,94,22],[91,6,95,4],[91,7,95,5],[91,8,95,6],[91,15,95,13,"error"],[91,20,95,18],[91,22,95,20],[92,8,96,6,"console"],[92,15,96,13],[92,16,96,14,"error"],[92,21,96,19],[92,22,96,20],[92,44,96,42],[92,46,96,44,"error"],[92,51,96,49],[92,52,96,50],[93,8,97,6],[93,14,97,12,"error"],[93,19,97,17],[94,6,98,4],[95,4,99,2],[95,5,99,3],[96,4,101,2],[96,10,101,8,"totalPrice"],[96,20,101,18],[96,23,101,21,"cartItems"],[96,32,101,30],[96,33,101,31,"reduce"],[96,39,101,37],[96,40,101,38],[96,41,101,39,"sum"],[96,44,101,42],[96,46,101,44,"item"],[96,50,101,48],[96,55,101,53,"sum"],[96,58,101,56],[96,61,101,59,"item"],[96,65,101,63],[96,66,101,64,"price"],[96,71,101,69],[96,74,101,72,"item"],[96,78,101,76],[96,79,101,77,"quantity"],[96,87,101,85],[96,89,101,87],[96,90,101,88],[96,91,101,89],[97,4,103,2],[97,24,104,4],[97,28,104,4,"_reactJsxDevRuntime"],[97,47,104,4],[97,48,104,4,"jsxDEV"],[97,54,104,4],[97,56,104,5,"CartContext"],[97,67,104,16],[97,68,104,17,"Provider"],[97,76,104,25],[98,6,105,6,"value"],[98,11,105,11],[98,13,105,13],[99,8,106,8,"cartItems"],[99,17,106,17],[100,8,107,8,"loading"],[100,15,107,15],[101,8,108,8,"addToCart"],[101,17,108,17],[102,8,109,8,"removeFromCart"],[102,22,109,22],[103,8,110,8,"clearCart"],[103,17,110,17],[104,8,111,8,"refreshCart"],[104,19,111,19],[105,8,112,8,"totalPrice"],[106,6,113,6],[106,7,113,8],[107,6,113,8,"children"],[107,14,113,8],[107,16,115,7,"children"],[108,4,115,15],[109,6,115,15,"fileName"],[109,14,115,15],[109,16,115,15,"_jsxFileName"],[109,28,115,15],[110,6,115,15,"lineNumber"],[110,16,115,15],[111,6,115,15,"columnNumber"],[111,18,115,15],[112,4,115,15],[112,11,116,26],[112,12,116,27],[113,2,118,0],[114,2,118,1,"_s"],[114,4,118,1],[114,5,27,16,"CartProvider"],[114,17,27,28],[115,2,27,28,"_c"],[115,4,27,28],[115,7,27,16,"CartProvider"],[115,19,27,28],[116,2,120,7],[116,11,120,16,"useCart"],[116,18,120,23,"useCart"],[116,19,120,23],[116,21,120,26],[117,4,120,26,"_s2"],[117,7,120,26],[118,4,121,2],[118,10,121,8,"context"],[118,17,121,15],[118,20,121,18],[118,24,121,18,"useContext"],[118,30,121,28],[118,31,121,28,"useContext"],[118,41,121,28],[118,43,121,29,"CartContext"],[118,54,121,40],[118,55,121,41],[119,4,122,2],[119,8,122,6,"context"],[119,15,122,13],[119,20,122,18,"undefined"],[119,29,122,27],[119,31,122,29],[120,6,123,4],[120,12,123,10],[120,16,123,14,"Error"],[120,21,123,19],[120,22,123,20],[120,66,123,64],[120,67,123,65],[121,4,124,2],[122,4,125,2],[122,11,125,9,"context"],[122,18,125,16],[123,2,126,0],[124,2,126,1,"_s2"],[124,5,126,1],[124,6,120,16,"useCart"],[124,13,120,23],[125,2,120,23],[125,6,120,23,"_c"],[125,8,120,23],[126,2,120,23,"$RefreshReg$"],[126,14,120,23],[126,15,120,23,"_c"],[126,17,120,23],[127,0,120,23],[127,3]],"functionMap":{"names":["<global>","CartProvider","useEffect$argument_0","refreshCart","addToCart","removeFromCart","clearCart","cartItems.reduce$argument_0","useCart"],"mappings":"AAA;OC0B;YCI;GDE;sBEE;GFgB;oBGE;GHc;yBIE;GJc;oBKE;GLc;sCME,+CN;CDiB;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}