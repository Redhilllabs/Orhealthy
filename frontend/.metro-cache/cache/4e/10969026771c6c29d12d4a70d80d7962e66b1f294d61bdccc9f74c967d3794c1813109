{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[2], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const processSessionId = async sessionId => {\n      try {\n        const response = await axios.default.get(`${API_URL}/auth/session-data`, {\n          headers: {\n            'X-Session-ID': sessionId\n          }\n        });\n        const {\n          session_token\n        } = response.data;\n        await _utilsStorage.storage.setItemAsync('session_token', session_token);\n\n        // Get user data\n        await checkSession();\n      } catch (error) {\n        console.error('Error processing session:', error);\n      }\n    };\n    const checkSession = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) {\n          setLoading(false);\n          return;\n        }\n        const response = await axios.default.get(`${API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error checking session:', error);\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          await axios.default.post(`${API_URL}/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        }\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n        setUser(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    const updateProfile = async profile => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        await axios.default.put(`${API_URL}/users/profile`, profile, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshUser();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        throw error;\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          const response = await axios.default.get(`${API_URL}/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Error refreshing user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        processSessionId,\n        checkSession,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":134,"map":[[13,2,38,0,"exports"],[13,9,38,0],[13,10,38,0,"AuthProvider"],[13,22,38,0],[13,25,38,0,"AuthProvider"],[13,37,38,0],[14,2,138,0,"exports"],[14,9,138,0],[14,10,138,0,"useAuth"],[14,17,138,0],[14,20,138,0,"useAuth"],[14,27,138,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_axios"],[16,12,2,0],[16,15,2,0,"require"],[16,22,2,0],[16,23,2,0,"_dependencyMap"],[16,37,2,0],[17,2,2,0],[17,6,2,0,"axios"],[17,11,2,0],[17,14,2,0,"_interopDefault"],[17,29,2,0],[17,30,2,0,"_axios"],[17,36,2,0],[18,2,3,0],[18,6,3,0,"_utilsStorage"],[18,19,3,0],[18,22,3,0,"require"],[18,29,3,0],[18,30,3,0,"_dependencyMap"],[18,44,3,0],[19,2,3,43],[19,6,3,43,"_reactJsxDevRuntime"],[19,25,3,43],[19,28,3,43,"require"],[19,35,3,43],[19,36,3,43,"_dependencyMap"],[19,50,3,43],[20,2,5,0],[20,8,5,6,"API_URL"],[20,15,5,13],[20,18,5,16,"process"],[20,25,5,23],[20,26,5,24,"env"],[20,29,5,27],[20,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[20,53,5,51],[20,56,5,54],[20,62,5,60],[21,2,36,0],[21,8,36,6,"AuthContext"],[21,19,36,17],[21,35,36,20],[21,39,36,20,"createContext"],[21,45,36,33],[21,46,36,33,"createContext"],[21,59,36,33],[21,61,36,63,"undefined"],[21,70,36,72],[21,71,36,73],[22,2,38,7],[22,11,38,16,"AuthProvider"],[22,23,38,28,"AuthProvider"],[22,24,38,29],[23,4,38,31,"children"],[24,2,38,71],[24,3,38,72],[24,5,38,74],[25,4,39,2],[25,10,39,8],[25,11,39,9,"user"],[25,15,39,13],[25,17,39,15,"setUser"],[25,24,39,22],[25,25,39,23],[25,28,39,26],[25,32,39,26,"useState"],[25,38,39,34],[25,39,39,34,"useState"],[25,47,39,34],[25,49,39,48],[25,53,39,52],[25,54,39,53],[26,4,40,2],[26,10,40,8],[26,11,40,9,"loading"],[26,18,40,16],[26,20,40,18,"setLoading"],[26,30,40,28],[26,31,40,29],[26,34,40,32],[26,38,40,32,"useState"],[26,44,40,40],[26,45,40,40,"useState"],[26,53,40,40],[26,55,40,41],[26,59,40,45],[26,60,40,46],[27,4,42,2],[27,10,42,8,"processSessionId"],[27,26,42,24],[27,29,42,27],[27,35,42,34,"sessionId"],[27,44,42,51],[27,48,42,56],[28,6,43,4],[28,10,43,8],[29,8,44,6],[29,14,44,12,"response"],[29,22,44,20],[29,25,44,23],[29,31,44,29,"axios"],[29,36,44,34],[29,37,44,34,"default"],[29,44,44,34],[29,45,44,35,"get"],[29,48,44,38],[29,49,44,39],[29,52,44,42,"API_URL"],[29,59,44,49],[29,79,44,69],[29,81,44,71],[30,10,45,8,"headers"],[30,17,45,15],[30,19,45,17],[31,12,45,19],[31,26,45,33],[31,28,45,35,"sessionId"],[32,10,45,45],[33,8,46,6],[33,9,46,7],[33,10,46,8],[34,8,48,6],[34,14,48,12],[35,10,48,14,"session_token"],[36,8,48,28],[36,9,48,29],[36,12,48,32,"response"],[36,20,48,40],[36,21,48,41,"data"],[36,25,48,45],[37,8,49,6],[37,14,49,12,"storage"],[37,27,49,19],[37,28,49,19,"storage"],[37,35,49,19],[37,36,49,20,"setItemAsync"],[37,48,49,32],[37,49,49,33],[37,64,49,48],[37,66,49,50,"session_token"],[37,79,49,63],[37,80,49,64],[39,8,51,6],[40,8,52,6],[40,14,52,12,"checkSession"],[40,26,52,24],[40,27,52,25],[40,28,52,26],[41,6,53,4],[41,7,53,5],[41,8,53,6],[41,15,53,13,"error"],[41,20,53,18],[41,22,53,20],[42,8,54,6,"console"],[42,15,54,13],[42,16,54,14,"error"],[42,21,54,19],[42,22,54,20],[42,49,54,47],[42,51,54,49,"error"],[42,56,54,54],[42,57,54,55],[43,6,55,4],[44,4,56,2],[44,5,56,3],[45,4,58,2],[45,10,58,8,"checkSession"],[45,22,58,20],[45,25,58,23],[45,31,58,23,"checkSession"],[45,32,58,23],[45,37,58,35],[46,6,59,4],[46,10,59,8],[47,8,60,6],[47,14,60,12,"token"],[47,19,60,17],[47,22,60,20],[47,28,60,26,"storage"],[47,41,60,33],[47,42,60,33,"storage"],[47,49,60,33],[47,50,60,34,"getItemAsync"],[47,62,60,46],[47,63,60,47],[47,78,60,62],[47,79,60,63],[48,8,61,6],[48,12,61,10],[48,13,61,11,"token"],[48,18,61,16],[48,20,61,18],[49,10,62,8,"setLoading"],[49,20,62,18],[49,21,62,19],[49,26,62,24],[49,27,62,25],[50,10,63,8],[51,8,64,6],[52,8,66,6],[52,14,66,12,"response"],[52,22,66,20],[52,25,66,23],[52,31,66,29,"axios"],[52,36,66,34],[52,37,66,34,"default"],[52,44,66,34],[52,45,66,35,"get"],[52,48,66,38],[52,49,66,39],[52,52,66,42,"API_URL"],[52,59,66,49],[52,69,66,59],[52,71,66,61],[53,10,67,8,"headers"],[53,17,67,15],[53,19,67,17],[54,12,67,19,"Authorization"],[54,25,67,32],[54,27,67,34],[54,37,67,44,"token"],[54,42,67,49],[55,10,67,52],[56,8,68,6],[56,9,68,7],[56,10,68,8],[57,8,70,6,"setUser"],[57,15,70,13],[57,16,70,14,"response"],[57,24,70,22],[57,25,70,23,"data"],[57,29,70,27],[57,30,70,28],[58,6,71,4],[58,7,71,5],[58,8,71,6],[58,15,71,13,"error"],[58,20,71,18],[58,22,71,20],[59,8,72,6,"console"],[59,15,72,13],[59,16,72,14,"error"],[59,21,72,19],[59,22,72,20],[59,47,72,45],[59,49,72,47,"error"],[59,54,72,52],[59,55,72,53],[60,8,73,6],[60,14,73,12,"storage"],[60,27,73,19],[60,28,73,19,"storage"],[60,35,73,19],[60,36,73,20,"deleteItemAsync"],[60,51,73,35],[60,52,73,36],[60,67,73,51],[60,68,73,52],[61,6,74,4],[61,7,74,5],[61,16,74,14],[62,8,75,6,"setLoading"],[62,18,75,16],[62,19,75,17],[62,24,75,22],[62,25,75,23],[63,6,76,4],[64,4,77,2],[64,5,77,3],[65,4,79,2],[65,10,79,8,"logout"],[65,16,79,14],[65,19,79,17],[65,25,79,17,"logout"],[65,26,79,17],[65,31,79,29],[66,6,80,4],[66,10,80,8],[67,8,81,6],[67,14,81,12,"token"],[67,19,81,17],[67,22,81,20],[67,28,81,26,"storage"],[67,41,81,33],[67,42,81,33,"storage"],[67,49,81,33],[67,50,81,34,"getItemAsync"],[67,62,81,46],[67,63,81,47],[67,78,81,62],[67,79,81,63],[68,8,82,6],[68,12,82,10,"token"],[68,17,82,15],[68,19,82,17],[69,10,83,8],[69,16,83,14,"axios"],[69,21,83,19],[69,22,83,19,"default"],[69,29,83,19],[69,30,83,20,"post"],[69,34,83,24],[69,35,83,25],[69,38,83,28,"API_URL"],[69,45,83,35],[69,59,83,49],[69,61,83,51],[69,62,83,52],[69,63,83,53],[69,65,83,55],[70,12,84,10,"headers"],[70,19,84,17],[70,21,84,19],[71,14,84,21,"Authorization"],[71,27,84,34],[71,29,84,36],[71,39,84,46,"token"],[71,44,84,51],[72,12,84,54],[73,10,85,8],[73,11,85,9],[73,12,85,10],[74,8,86,6],[75,8,87,6],[75,14,87,12,"storage"],[75,27,87,19],[75,28,87,19,"storage"],[75,35,87,19],[75,36,87,20,"deleteItemAsync"],[75,51,87,35],[75,52,87,36],[75,67,87,51],[75,68,87,52],[76,8,88,6,"setUser"],[76,15,88,13],[76,16,88,14],[76,20,88,18],[76,21,88,19],[77,6,89,4],[77,7,89,5],[77,8,89,6],[77,15,89,13,"error"],[77,20,89,18],[77,22,89,20],[78,8,90,6,"console"],[78,15,90,13],[78,16,90,14,"error"],[78,21,90,19],[78,22,90,20],[78,42,90,40],[78,44,90,42,"error"],[78,49,90,47],[78,50,90,48],[79,6,91,4],[80,4,92,2],[80,5,92,3],[81,4,94,2],[81,10,94,8,"updateProfile"],[81,23,94,21],[81,26,94,24],[81,32,94,31,"profile"],[81,39,94,43],[81,43,94,48],[82,6,95,4],[82,10,95,8],[83,8,96,6],[83,14,96,12,"token"],[83,19,96,17],[83,22,96,20],[83,28,96,26,"storage"],[83,41,96,33],[83,42,96,33,"storage"],[83,49,96,33],[83,50,96,34,"getItemAsync"],[83,62,96,46],[83,63,96,47],[83,78,96,62],[83,79,96,63],[84,8,97,6],[84,14,97,12,"axios"],[84,19,97,17],[84,20,97,17,"default"],[84,27,97,17],[84,28,97,18,"put"],[84,31,97,21],[84,32,97,22],[84,35,97,25,"API_URL"],[84,42,97,32],[84,58,97,48],[84,60,97,50,"profile"],[84,67,97,57],[84,69,97,59],[85,10,98,8,"headers"],[85,17,98,15],[85,19,98,17],[86,12,98,19,"Authorization"],[86,25,98,32],[86,27,98,34],[86,37,98,44,"token"],[86,42,98,49],[87,10,98,52],[88,8,99,6],[88,9,99,7],[88,10,99,8],[89,8,100,6],[89,14,100,12,"refreshUser"],[89,25,100,23],[89,26,100,24],[89,27,100,25],[90,6,101,4],[90,7,101,5],[90,8,101,6],[90,15,101,13,"error"],[90,20,101,18],[90,22,101,20],[91,8,102,6,"console"],[91,15,102,13],[91,16,102,14,"error"],[91,21,102,19],[91,22,102,20],[91,47,102,45],[91,49,102,47,"error"],[91,54,102,52],[91,55,102,53],[92,8,103,6],[92,14,103,12,"error"],[92,19,103,17],[93,6,104,4],[94,4,105,2],[94,5,105,3],[95,4,107,2],[95,10,107,8,"refreshUser"],[95,21,107,19],[95,24,107,22],[95,30,107,22,"refreshUser"],[95,31,107,22],[95,36,107,34],[96,6,108,4],[96,10,108,8],[97,8,109,6],[97,14,109,12,"token"],[97,19,109,17],[97,22,109,20],[97,28,109,26,"storage"],[97,41,109,33],[97,42,109,33,"storage"],[97,49,109,33],[97,50,109,34,"getItemAsync"],[97,62,109,46],[97,63,109,47],[97,78,109,62],[97,79,109,63],[98,8,110,6],[98,12,110,10,"token"],[98,17,110,15],[98,19,110,17],[99,10,111,8],[99,16,111,14,"response"],[99,24,111,22],[99,27,111,25],[99,33,111,31,"axios"],[99,38,111,36],[99,39,111,36,"default"],[99,46,111,36],[99,47,111,37,"get"],[99,50,111,40],[99,51,111,41],[99,54,111,44,"API_URL"],[99,61,111,51],[99,71,111,61],[99,73,111,63],[100,12,112,10,"headers"],[100,19,112,17],[100,21,112,19],[101,14,112,21,"Authorization"],[101,27,112,34],[101,29,112,36],[101,39,112,46,"token"],[101,44,112,51],[102,12,112,54],[103,10,113,8],[103,11,113,9],[103,12,113,10],[104,10,114,8,"setUser"],[104,17,114,15],[104,18,114,16,"response"],[104,26,114,24],[104,27,114,25,"data"],[104,31,114,29],[104,32,114,30],[105,8,115,6],[106,6,116,4],[106,7,116,5],[106,8,116,6],[106,15,116,13,"error"],[106,20,116,18],[106,22,116,20],[107,8,117,6,"console"],[107,15,117,13],[107,16,117,14,"error"],[107,21,117,19],[107,22,117,20],[107,46,117,44],[107,48,117,46,"error"],[107,53,117,51],[107,54,117,52],[108,6,118,4],[109,4,119,2],[109,5,119,3],[110,4,121,2],[110,24,122,4],[110,28,122,4,"_reactJsxDevRuntime"],[110,47,122,4],[110,48,122,4,"jsxDEV"],[110,54,122,4],[110,56,122,5,"AuthContext"],[110,67,122,16],[110,68,122,17,"Provider"],[110,76,122,25],[111,6,123,6,"value"],[111,11,123,11],[111,13,123,13],[112,8,124,8,"user"],[112,12,124,12],[113,8,125,8,"loading"],[113,15,125,15],[114,8,126,8,"processSessionId"],[114,24,126,24],[115,8,127,8,"checkSession"],[115,20,127,20],[116,8,128,8,"logout"],[116,14,128,14],[117,8,129,8,"updateProfile"],[117,21,129,21],[118,8,130,8,"refreshUser"],[119,6,131,6],[119,7,131,8],[120,6,131,8,"children"],[120,14,131,8],[120,16,133,7,"children"],[121,4,133,15],[122,6,133,15,"fileName"],[122,14,133,15],[122,16,133,15,"_jsxFileName"],[122,28,133,15],[123,6,133,15,"lineNumber"],[123,16,133,15],[124,6,133,15,"columnNumber"],[124,18,133,15],[125,4,133,15],[125,11,134,26],[125,12,134,27],[126,2,136,0],[127,2,138,7],[127,11,138,16,"useAuth"],[127,18,138,23,"useAuth"],[127,19,138,23],[127,21,138,26],[128,4,139,2],[128,10,139,8,"context"],[128,17,139,15],[128,20,139,18],[128,24,139,18,"useContext"],[128,30,139,28],[128,31,139,28,"useContext"],[128,41,139,28],[128,43,139,29,"AuthContext"],[128,54,139,40],[128,55,139,41],[129,4,140,2],[129,8,140,6,"context"],[129,15,140,13],[129,20,140,18,"undefined"],[129,29,140,27],[129,31,140,29],[130,6,141,4],[130,12,141,10],[130,16,141,14,"Error"],[130,21,141,19],[130,22,141,20],[130,67,141,65],[130,68,141,66],[131,4,142,2],[132,4,143,2],[132,11,143,9,"context"],[132,18,143,16],[133,2,144,0],[134,0,144,1],[134,3]],"functionMap":{"names":["<global>","AuthProvider","processSessionId","checkSession","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;OCqC;2BCI;GDc;uBEE;GFmB;iBGE;GHa;wBIE;GJW;sBKE;GLY;CDiB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}