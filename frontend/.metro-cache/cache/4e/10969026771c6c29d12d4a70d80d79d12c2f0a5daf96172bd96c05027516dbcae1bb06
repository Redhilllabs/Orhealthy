{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":49,"index":148}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoSecureStore = require(_dependencyMap[2], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const processSessionId = async sessionId => {\n      try {\n        const response = await axios.default.get(`${API_URL}/auth/session-data`, {\n          headers: {\n            'X-Session-ID': sessionId\n          }\n        });\n        const {\n          session_token\n        } = response.data;\n        await SecureStore.setItemAsync('session_token', session_token);\n\n        // Get user data\n        await checkSession();\n      } catch (error) {\n        console.error('Error processing session:', error);\n      }\n    };\n    const checkSession = async () => {\n      try {\n        const token = await SecureStore.getItemAsync('session_token');\n        if (!token) {\n          setLoading(false);\n          return;\n        }\n        const response = await axios.default.get(`${API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error checking session:', error);\n        await SecureStore.deleteItemAsync('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        const token = await SecureStore.getItemAsync('session_token');\n        if (token) {\n          await axios.default.post(`${API_URL}/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        }\n        await SecureStore.deleteItemAsync('session_token');\n        setUser(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    const updateProfile = async profile => {\n      try {\n        const token = await SecureStore.getItemAsync('session_token');\n        await axios.default.put(`${API_URL}/users/profile`, profile, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshUser();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        throw error;\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const token = await SecureStore.getItemAsync('session_token');\n        if (token) {\n          const response = await axios.default.get(`${API_URL}/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Error refreshing user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        processSessionId,\n        checkSession,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":150,"map":[[28,2,38,0,"exports"],[28,9,38,0],[28,10,38,0,"AuthProvider"],[28,22,38,0],[28,25,38,0,"AuthProvider"],[28,37,38,0],[29,2,138,0,"exports"],[29,9,138,0],[29,10,138,0,"useAuth"],[29,17,138,0],[29,20,138,0,"useAuth"],[29,27,138,0],[30,2,1,0],[30,6,1,0,"_react"],[30,12,1,0],[30,15,1,0,"require"],[30,22,1,0],[30,23,1,0,"_dependencyMap"],[30,37,1,0],[31,2,2,0],[31,6,2,0,"_axios"],[31,12,2,0],[31,15,2,0,"require"],[31,22,2,0],[31,23,2,0,"_dependencyMap"],[31,37,2,0],[32,2,2,0],[32,6,2,0,"axios"],[32,11,2,0],[32,14,2,0,"_interopDefault"],[32,29,2,0],[32,30,2,0,"_axios"],[32,36,2,0],[33,2,3,0],[33,6,3,0,"_expoSecureStore"],[33,22,3,0],[33,25,3,0,"require"],[33,32,3,0],[33,33,3,0,"_dependencyMap"],[33,47,3,0],[34,2,3,0],[34,6,3,0,"SecureStore"],[34,17,3,0],[34,20,3,0,"_interopNamespace"],[34,37,3,0],[34,38,3,0,"_expoSecureStore"],[34,54,3,0],[35,2,3,49],[35,6,3,49,"_reactJsxDevRuntime"],[35,25,3,49],[35,28,3,49,"require"],[35,35,3,49],[35,36,3,49,"_dependencyMap"],[35,50,3,49],[36,2,5,0],[36,8,5,6,"API_URL"],[36,15,5,13],[36,18,5,16,"process"],[36,25,5,23],[36,26,5,24,"env"],[36,29,5,27],[36,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[36,53,5,51],[36,56,5,54],[36,62,5,60],[37,2,36,0],[37,8,36,6,"AuthContext"],[37,19,36,17],[37,35,36,20],[37,39,36,20,"createContext"],[37,45,36,33],[37,46,36,33,"createContext"],[37,59,36,33],[37,61,36,63,"undefined"],[37,70,36,72],[37,71,36,73],[38,2,38,7],[38,11,38,16,"AuthProvider"],[38,23,38,28,"AuthProvider"],[38,24,38,29],[39,4,38,31,"children"],[40,2,38,71],[40,3,38,72],[40,5,38,74],[41,4,39,2],[41,10,39,8],[41,11,39,9,"user"],[41,15,39,13],[41,17,39,15,"setUser"],[41,24,39,22],[41,25,39,23],[41,28,39,26],[41,32,39,26,"useState"],[41,38,39,34],[41,39,39,34,"useState"],[41,47,39,34],[41,49,39,48],[41,53,39,52],[41,54,39,53],[42,4,40,2],[42,10,40,8],[42,11,40,9,"loading"],[42,18,40,16],[42,20,40,18,"setLoading"],[42,30,40,28],[42,31,40,29],[42,34,40,32],[42,38,40,32,"useState"],[42,44,40,40],[42,45,40,40,"useState"],[42,53,40,40],[42,55,40,41],[42,59,40,45],[42,60,40,46],[43,4,42,2],[43,10,42,8,"processSessionId"],[43,26,42,24],[43,29,42,27],[43,35,42,34,"sessionId"],[43,44,42,51],[43,48,42,56],[44,6,43,4],[44,10,43,8],[45,8,44,6],[45,14,44,12,"response"],[45,22,44,20],[45,25,44,23],[45,31,44,29,"axios"],[45,36,44,34],[45,37,44,34,"default"],[45,44,44,34],[45,45,44,35,"get"],[45,48,44,38],[45,49,44,39],[45,52,44,42,"API_URL"],[45,59,44,49],[45,79,44,69],[45,81,44,71],[46,10,45,8,"headers"],[46,17,45,15],[46,19,45,17],[47,12,45,19],[47,26,45,33],[47,28,45,35,"sessionId"],[48,10,45,45],[49,8,46,6],[49,9,46,7],[49,10,46,8],[50,8,48,6],[50,14,48,12],[51,10,48,14,"session_token"],[52,8,48,28],[52,9,48,29],[52,12,48,32,"response"],[52,20,48,40],[52,21,48,41,"data"],[52,25,48,45],[53,8,49,6],[53,14,49,12,"SecureStore"],[53,25,49,23],[53,26,49,24,"setItemAsync"],[53,38,49,36],[53,39,49,37],[53,54,49,52],[53,56,49,54,"session_token"],[53,69,49,67],[53,70,49,68],[55,8,51,6],[56,8,52,6],[56,14,52,12,"checkSession"],[56,26,52,24],[56,27,52,25],[56,28,52,26],[57,6,53,4],[57,7,53,5],[57,8,53,6],[57,15,53,13,"error"],[57,20,53,18],[57,22,53,20],[58,8,54,6,"console"],[58,15,54,13],[58,16,54,14,"error"],[58,21,54,19],[58,22,54,20],[58,49,54,47],[58,51,54,49,"error"],[58,56,54,54],[58,57,54,55],[59,6,55,4],[60,4,56,2],[60,5,56,3],[61,4,58,2],[61,10,58,8,"checkSession"],[61,22,58,20],[61,25,58,23],[61,31,58,23,"checkSession"],[61,32,58,23],[61,37,58,35],[62,6,59,4],[62,10,59,8],[63,8,60,6],[63,14,60,12,"token"],[63,19,60,17],[63,22,60,20],[63,28,60,26,"SecureStore"],[63,39,60,37],[63,40,60,38,"getItemAsync"],[63,52,60,50],[63,53,60,51],[63,68,60,66],[63,69,60,67],[64,8,61,6],[64,12,61,10],[64,13,61,11,"token"],[64,18,61,16],[64,20,61,18],[65,10,62,8,"setLoading"],[65,20,62,18],[65,21,62,19],[65,26,62,24],[65,27,62,25],[66,10,63,8],[67,8,64,6],[68,8,66,6],[68,14,66,12,"response"],[68,22,66,20],[68,25,66,23],[68,31,66,29,"axios"],[68,36,66,34],[68,37,66,34,"default"],[68,44,66,34],[68,45,66,35,"get"],[68,48,66,38],[68,49,66,39],[68,52,66,42,"API_URL"],[68,59,66,49],[68,69,66,59],[68,71,66,61],[69,10,67,8,"headers"],[69,17,67,15],[69,19,67,17],[70,12,67,19,"Authorization"],[70,25,67,32],[70,27,67,34],[70,37,67,44,"token"],[70,42,67,49],[71,10,67,52],[72,8,68,6],[72,9,68,7],[72,10,68,8],[73,8,70,6,"setUser"],[73,15,70,13],[73,16,70,14,"response"],[73,24,70,22],[73,25,70,23,"data"],[73,29,70,27],[73,30,70,28],[74,6,71,4],[74,7,71,5],[74,8,71,6],[74,15,71,13,"error"],[74,20,71,18],[74,22,71,20],[75,8,72,6,"console"],[75,15,72,13],[75,16,72,14,"error"],[75,21,72,19],[75,22,72,20],[75,47,72,45],[75,49,72,47,"error"],[75,54,72,52],[75,55,72,53],[76,8,73,6],[76,14,73,12,"SecureStore"],[76,25,73,23],[76,26,73,24,"deleteItemAsync"],[76,41,73,39],[76,42,73,40],[76,57,73,55],[76,58,73,56],[77,6,74,4],[77,7,74,5],[77,16,74,14],[78,8,75,6,"setLoading"],[78,18,75,16],[78,19,75,17],[78,24,75,22],[78,25,75,23],[79,6,76,4],[80,4,77,2],[80,5,77,3],[81,4,79,2],[81,10,79,8,"logout"],[81,16,79,14],[81,19,79,17],[81,25,79,17,"logout"],[81,26,79,17],[81,31,79,29],[82,6,80,4],[82,10,80,8],[83,8,81,6],[83,14,81,12,"token"],[83,19,81,17],[83,22,81,20],[83,28,81,26,"SecureStore"],[83,39,81,37],[83,40,81,38,"getItemAsync"],[83,52,81,50],[83,53,81,51],[83,68,81,66],[83,69,81,67],[84,8,82,6],[84,12,82,10,"token"],[84,17,82,15],[84,19,82,17],[85,10,83,8],[85,16,83,14,"axios"],[85,21,83,19],[85,22,83,19,"default"],[85,29,83,19],[85,30,83,20,"post"],[85,34,83,24],[85,35,83,25],[85,38,83,28,"API_URL"],[85,45,83,35],[85,59,83,49],[85,61,83,51],[85,62,83,52],[85,63,83,53],[85,65,83,55],[86,12,84,10,"headers"],[86,19,84,17],[86,21,84,19],[87,14,84,21,"Authorization"],[87,27,84,34],[87,29,84,36],[87,39,84,46,"token"],[87,44,84,51],[88,12,84,54],[89,10,85,8],[89,11,85,9],[89,12,85,10],[90,8,86,6],[91,8,87,6],[91,14,87,12,"SecureStore"],[91,25,87,23],[91,26,87,24,"deleteItemAsync"],[91,41,87,39],[91,42,87,40],[91,57,87,55],[91,58,87,56],[92,8,88,6,"setUser"],[92,15,88,13],[92,16,88,14],[92,20,88,18],[92,21,88,19],[93,6,89,4],[93,7,89,5],[93,8,89,6],[93,15,89,13,"error"],[93,20,89,18],[93,22,89,20],[94,8,90,6,"console"],[94,15,90,13],[94,16,90,14,"error"],[94,21,90,19],[94,22,90,20],[94,42,90,40],[94,44,90,42,"error"],[94,49,90,47],[94,50,90,48],[95,6,91,4],[96,4,92,2],[96,5,92,3],[97,4,94,2],[97,10,94,8,"updateProfile"],[97,23,94,21],[97,26,94,24],[97,32,94,31,"profile"],[97,39,94,43],[97,43,94,48],[98,6,95,4],[98,10,95,8],[99,8,96,6],[99,14,96,12,"token"],[99,19,96,17],[99,22,96,20],[99,28,96,26,"SecureStore"],[99,39,96,37],[99,40,96,38,"getItemAsync"],[99,52,96,50],[99,53,96,51],[99,68,96,66],[99,69,96,67],[100,8,97,6],[100,14,97,12,"axios"],[100,19,97,17],[100,20,97,17,"default"],[100,27,97,17],[100,28,97,18,"put"],[100,31,97,21],[100,32,97,22],[100,35,97,25,"API_URL"],[100,42,97,32],[100,58,97,48],[100,60,97,50,"profile"],[100,67,97,57],[100,69,97,59],[101,10,98,8,"headers"],[101,17,98,15],[101,19,98,17],[102,12,98,19,"Authorization"],[102,25,98,32],[102,27,98,34],[102,37,98,44,"token"],[102,42,98,49],[103,10,98,52],[104,8,99,6],[104,9,99,7],[104,10,99,8],[105,8,100,6],[105,14,100,12,"refreshUser"],[105,25,100,23],[105,26,100,24],[105,27,100,25],[106,6,101,4],[106,7,101,5],[106,8,101,6],[106,15,101,13,"error"],[106,20,101,18],[106,22,101,20],[107,8,102,6,"console"],[107,15,102,13],[107,16,102,14,"error"],[107,21,102,19],[107,22,102,20],[107,47,102,45],[107,49,102,47,"error"],[107,54,102,52],[107,55,102,53],[108,8,103,6],[108,14,103,12,"error"],[108,19,103,17],[109,6,104,4],[110,4,105,2],[110,5,105,3],[111,4,107,2],[111,10,107,8,"refreshUser"],[111,21,107,19],[111,24,107,22],[111,30,107,22,"refreshUser"],[111,31,107,22],[111,36,107,34],[112,6,108,4],[112,10,108,8],[113,8,109,6],[113,14,109,12,"token"],[113,19,109,17],[113,22,109,20],[113,28,109,26,"SecureStore"],[113,39,109,37],[113,40,109,38,"getItemAsync"],[113,52,109,50],[113,53,109,51],[113,68,109,66],[113,69,109,67],[114,8,110,6],[114,12,110,10,"token"],[114,17,110,15],[114,19,110,17],[115,10,111,8],[115,16,111,14,"response"],[115,24,111,22],[115,27,111,25],[115,33,111,31,"axios"],[115,38,111,36],[115,39,111,36,"default"],[115,46,111,36],[115,47,111,37,"get"],[115,50,111,40],[115,51,111,41],[115,54,111,44,"API_URL"],[115,61,111,51],[115,71,111,61],[115,73,111,63],[116,12,112,10,"headers"],[116,19,112,17],[116,21,112,19],[117,14,112,21,"Authorization"],[117,27,112,34],[117,29,112,36],[117,39,112,46,"token"],[117,44,112,51],[118,12,112,54],[119,10,113,8],[119,11,113,9],[119,12,113,10],[120,10,114,8,"setUser"],[120,17,114,15],[120,18,114,16,"response"],[120,26,114,24],[120,27,114,25,"data"],[120,31,114,29],[120,32,114,30],[121,8,115,6],[122,6,116,4],[122,7,116,5],[122,8,116,6],[122,15,116,13,"error"],[122,20,116,18],[122,22,116,20],[123,8,117,6,"console"],[123,15,117,13],[123,16,117,14,"error"],[123,21,117,19],[123,22,117,20],[123,46,117,44],[123,48,117,46,"error"],[123,53,117,51],[123,54,117,52],[124,6,118,4],[125,4,119,2],[125,5,119,3],[126,4,121,2],[126,24,122,4],[126,28,122,4,"_reactJsxDevRuntime"],[126,47,122,4],[126,48,122,4,"jsxDEV"],[126,54,122,4],[126,56,122,5,"AuthContext"],[126,67,122,16],[126,68,122,17,"Provider"],[126,76,122,25],[127,6,123,6,"value"],[127,11,123,11],[127,13,123,13],[128,8,124,8,"user"],[128,12,124,12],[129,8,125,8,"loading"],[129,15,125,15],[130,8,126,8,"processSessionId"],[130,24,126,24],[131,8,127,8,"checkSession"],[131,20,127,20],[132,8,128,8,"logout"],[132,14,128,14],[133,8,129,8,"updateProfile"],[133,21,129,21],[134,8,130,8,"refreshUser"],[135,6,131,6],[135,7,131,8],[136,6,131,8,"children"],[136,14,131,8],[136,16,133,7,"children"],[137,4,133,15],[138,6,133,15,"fileName"],[138,14,133,15],[138,16,133,15,"_jsxFileName"],[138,28,133,15],[139,6,133,15,"lineNumber"],[139,16,133,15],[140,6,133,15,"columnNumber"],[140,18,133,15],[141,4,133,15],[141,11,134,26],[141,12,134,27],[142,2,136,0],[143,2,138,7],[143,11,138,16,"useAuth"],[143,18,138,23,"useAuth"],[143,19,138,23],[143,21,138,26],[144,4,139,2],[144,10,139,8,"context"],[144,17,139,15],[144,20,139,18],[144,24,139,18,"useContext"],[144,30,139,28],[144,31,139,28,"useContext"],[144,41,139,28],[144,43,139,29,"AuthContext"],[144,54,139,40],[144,55,139,41],[145,4,140,2],[145,8,140,6,"context"],[145,15,140,13],[145,20,140,18,"undefined"],[145,29,140,27],[145,31,140,29],[146,6,141,4],[146,12,141,10],[146,16,141,14,"Error"],[146,21,141,19],[146,22,141,20],[146,67,141,65],[146,68,141,66],[147,4,142,2],[148,4,143,2],[148,11,143,9,"context"],[148,18,143,16],[149,2,144,0],[150,0,144,1],[150,3]],"functionMap":{"names":["<global>","AuthProvider","processSessionId","checkSession","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;OCqC;2BCI;GDc;uBEE;GFmB;iBGE;GHa;wBIE;GJW;sBKE;GLY;CDiB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}