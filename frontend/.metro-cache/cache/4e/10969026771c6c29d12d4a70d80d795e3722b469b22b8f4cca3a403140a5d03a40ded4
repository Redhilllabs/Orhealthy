{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[2], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const processSessionId = async sessionId => {\n      try {\n        console.log('[AuthContext] Processing session ID:', sessionId);\n        const response = await axios.default.get(`${API_URL}/auth/session-data`, {\n          headers: {\n            'X-Session-ID': sessionId\n          }\n        });\n        console.log('[AuthContext] Session data received:', response.data);\n        const {\n          session_token\n        } = response.data;\n        await _utilsStorage.storage.setItemAsync('session_token', session_token);\n        console.log('[AuthContext] Session token stored');\n\n        // Get user data\n        await checkSession();\n      } catch (error) {\n        console.error('[AuthContext] Error processing session:', error);\n        throw error;\n      }\n    };\n    const checkSession = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) {\n          setLoading(false);\n          return;\n        }\n        const response = await axios.default.get(`${API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error checking session:', error);\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          await axios.default.post(`${API_URL}/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        }\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n        setUser(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    const updateProfile = async profile => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        await axios.default.put(`${API_URL}/users/profile`, profile, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshUser();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        throw error;\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          const response = await axios.default.get(`${API_URL}/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Error refreshing user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        processSessionId,\n        checkSession,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":138,"map":[[13,2,38,0,"exports"],[13,9,38,0],[13,10,38,0,"AuthProvider"],[13,22,38,0],[13,25,38,0,"AuthProvider"],[13,37,38,0],[14,2,142,0,"exports"],[14,9,142,0],[14,10,142,0,"useAuth"],[14,17,142,0],[14,20,142,0,"useAuth"],[14,27,142,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_axios"],[16,12,2,0],[16,15,2,0,"require"],[16,22,2,0],[16,23,2,0,"_dependencyMap"],[16,37,2,0],[17,2,2,0],[17,6,2,0,"axios"],[17,11,2,0],[17,14,2,0,"_interopDefault"],[17,29,2,0],[17,30,2,0,"_axios"],[17,36,2,0],[18,2,3,0],[18,6,3,0,"_utilsStorage"],[18,19,3,0],[18,22,3,0,"require"],[18,29,3,0],[18,30,3,0,"_dependencyMap"],[18,44,3,0],[19,2,3,43],[19,6,3,43,"_reactJsxDevRuntime"],[19,25,3,43],[19,28,3,43,"require"],[19,35,3,43],[19,36,3,43,"_dependencyMap"],[19,50,3,43],[20,2,5,0],[20,8,5,6,"API_URL"],[20,15,5,13],[20,18,5,16,"process"],[20,25,5,23],[20,26,5,24,"env"],[20,29,5,27],[20,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[20,53,5,51],[20,56,5,54],[20,62,5,60],[21,2,36,0],[21,8,36,6,"AuthContext"],[21,19,36,17],[21,35,36,20],[21,39,36,20,"createContext"],[21,45,36,33],[21,46,36,33,"createContext"],[21,59,36,33],[21,61,36,63,"undefined"],[21,70,36,72],[21,71,36,73],[22,2,38,7],[22,11,38,16,"AuthProvider"],[22,23,38,28,"AuthProvider"],[22,24,38,29],[23,4,38,31,"children"],[24,2,38,71],[24,3,38,72],[24,5,38,74],[25,4,39,2],[25,10,39,8],[25,11,39,9,"user"],[25,15,39,13],[25,17,39,15,"setUser"],[25,24,39,22],[25,25,39,23],[25,28,39,26],[25,32,39,26,"useState"],[25,38,39,34],[25,39,39,34,"useState"],[25,47,39,34],[25,49,39,48],[25,53,39,52],[25,54,39,53],[26,4,40,2],[26,10,40,8],[26,11,40,9,"loading"],[26,18,40,16],[26,20,40,18,"setLoading"],[26,30,40,28],[26,31,40,29],[26,34,40,32],[26,38,40,32,"useState"],[26,44,40,40],[26,45,40,40,"useState"],[26,53,40,40],[26,55,40,41],[26,59,40,45],[26,60,40,46],[27,4,42,2],[27,10,42,8,"processSessionId"],[27,26,42,24],[27,29,42,27],[27,35,42,34,"sessionId"],[27,44,42,51],[27,48,42,56],[28,6,43,4],[28,10,43,8],[29,8,44,6,"console"],[29,15,44,13],[29,16,44,14,"log"],[29,19,44,17],[29,20,44,18],[29,58,44,56],[29,60,44,58,"sessionId"],[29,69,44,67],[29,70,44,68],[30,8,45,6],[30,14,45,12,"response"],[30,22,45,20],[30,25,45,23],[30,31,45,29,"axios"],[30,36,45,34],[30,37,45,34,"default"],[30,44,45,34],[30,45,45,35,"get"],[30,48,45,38],[30,49,45,39],[30,52,45,42,"API_URL"],[30,59,45,49],[30,79,45,69],[30,81,45,71],[31,10,46,8,"headers"],[31,17,46,15],[31,19,46,17],[32,12,46,19],[32,26,46,33],[32,28,46,35,"sessionId"],[33,10,46,45],[34,8,47,6],[34,9,47,7],[34,10,47,8],[35,8,49,6,"console"],[35,15,49,13],[35,16,49,14,"log"],[35,19,49,17],[35,20,49,18],[35,58,49,56],[35,60,49,58,"response"],[35,68,49,66],[35,69,49,67,"data"],[35,73,49,71],[35,74,49,72],[36,8,50,6],[36,14,50,12],[37,10,50,14,"session_token"],[38,8,50,28],[38,9,50,29],[38,12,50,32,"response"],[38,20,50,40],[38,21,50,41,"data"],[38,25,50,45],[39,8,51,6],[39,14,51,12,"storage"],[39,27,51,19],[39,28,51,19,"storage"],[39,35,51,19],[39,36,51,20,"setItemAsync"],[39,48,51,32],[39,49,51,33],[39,64,51,48],[39,66,51,50,"session_token"],[39,79,51,63],[39,80,51,64],[40,8,52,6,"console"],[40,15,52,13],[40,16,52,14,"log"],[40,19,52,17],[40,20,52,18],[40,56,52,54],[40,57,52,55],[42,8,54,6],[43,8,55,6],[43,14,55,12,"checkSession"],[43,26,55,24],[43,27,55,25],[43,28,55,26],[44,6,56,4],[44,7,56,5],[44,8,56,6],[44,15,56,13,"error"],[44,20,56,18],[44,22,56,20],[45,8,57,6,"console"],[45,15,57,13],[45,16,57,14,"error"],[45,21,57,19],[45,22,57,20],[45,63,57,61],[45,65,57,63,"error"],[45,70,57,68],[45,71,57,69],[46,8,58,6],[46,14,58,12,"error"],[46,19,58,17],[47,6,59,4],[48,4,60,2],[48,5,60,3],[49,4,62,2],[49,10,62,8,"checkSession"],[49,22,62,20],[49,25,62,23],[49,31,62,23,"checkSession"],[49,32,62,23],[49,37,62,35],[50,6,63,4],[50,10,63,8],[51,8,64,6],[51,14,64,12,"token"],[51,19,64,17],[51,22,64,20],[51,28,64,26,"storage"],[51,41,64,33],[51,42,64,33,"storage"],[51,49,64,33],[51,50,64,34,"getItemAsync"],[51,62,64,46],[51,63,64,47],[51,78,64,62],[51,79,64,63],[52,8,65,6],[52,12,65,10],[52,13,65,11,"token"],[52,18,65,16],[52,20,65,18],[53,10,66,8,"setLoading"],[53,20,66,18],[53,21,66,19],[53,26,66,24],[53,27,66,25],[54,10,67,8],[55,8,68,6],[56,8,70,6],[56,14,70,12,"response"],[56,22,70,20],[56,25,70,23],[56,31,70,29,"axios"],[56,36,70,34],[56,37,70,34,"default"],[56,44,70,34],[56,45,70,35,"get"],[56,48,70,38],[56,49,70,39],[56,52,70,42,"API_URL"],[56,59,70,49],[56,69,70,59],[56,71,70,61],[57,10,71,8,"headers"],[57,17,71,15],[57,19,71,17],[58,12,71,19,"Authorization"],[58,25,71,32],[58,27,71,34],[58,37,71,44,"token"],[58,42,71,49],[59,10,71,52],[60,8,72,6],[60,9,72,7],[60,10,72,8],[61,8,74,6,"setUser"],[61,15,74,13],[61,16,74,14,"response"],[61,24,74,22],[61,25,74,23,"data"],[61,29,74,27],[61,30,74,28],[62,6,75,4],[62,7,75,5],[62,8,75,6],[62,15,75,13,"error"],[62,20,75,18],[62,22,75,20],[63,8,76,6,"console"],[63,15,76,13],[63,16,76,14,"error"],[63,21,76,19],[63,22,76,20],[63,47,76,45],[63,49,76,47,"error"],[63,54,76,52],[63,55,76,53],[64,8,77,6],[64,14,77,12,"storage"],[64,27,77,19],[64,28,77,19,"storage"],[64,35,77,19],[64,36,77,20,"deleteItemAsync"],[64,51,77,35],[64,52,77,36],[64,67,77,51],[64,68,77,52],[65,6,78,4],[65,7,78,5],[65,16,78,14],[66,8,79,6,"setLoading"],[66,18,79,16],[66,19,79,17],[66,24,79,22],[66,25,79,23],[67,6,80,4],[68,4,81,2],[68,5,81,3],[69,4,83,2],[69,10,83,8,"logout"],[69,16,83,14],[69,19,83,17],[69,25,83,17,"logout"],[69,26,83,17],[69,31,83,29],[70,6,84,4],[70,10,84,8],[71,8,85,6],[71,14,85,12,"token"],[71,19,85,17],[71,22,85,20],[71,28,85,26,"storage"],[71,41,85,33],[71,42,85,33,"storage"],[71,49,85,33],[71,50,85,34,"getItemAsync"],[71,62,85,46],[71,63,85,47],[71,78,85,62],[71,79,85,63],[72,8,86,6],[72,12,86,10,"token"],[72,17,86,15],[72,19,86,17],[73,10,87,8],[73,16,87,14,"axios"],[73,21,87,19],[73,22,87,19,"default"],[73,29,87,19],[73,30,87,20,"post"],[73,34,87,24],[73,35,87,25],[73,38,87,28,"API_URL"],[73,45,87,35],[73,59,87,49],[73,61,87,51],[73,62,87,52],[73,63,87,53],[73,65,87,55],[74,12,88,10,"headers"],[74,19,88,17],[74,21,88,19],[75,14,88,21,"Authorization"],[75,27,88,34],[75,29,88,36],[75,39,88,46,"token"],[75,44,88,51],[76,12,88,54],[77,10,89,8],[77,11,89,9],[77,12,89,10],[78,8,90,6],[79,8,91,6],[79,14,91,12,"storage"],[79,27,91,19],[79,28,91,19,"storage"],[79,35,91,19],[79,36,91,20,"deleteItemAsync"],[79,51,91,35],[79,52,91,36],[79,67,91,51],[79,68,91,52],[80,8,92,6,"setUser"],[80,15,92,13],[80,16,92,14],[80,20,92,18],[80,21,92,19],[81,6,93,4],[81,7,93,5],[81,8,93,6],[81,15,93,13,"error"],[81,20,93,18],[81,22,93,20],[82,8,94,6,"console"],[82,15,94,13],[82,16,94,14,"error"],[82,21,94,19],[82,22,94,20],[82,42,94,40],[82,44,94,42,"error"],[82,49,94,47],[82,50,94,48],[83,6,95,4],[84,4,96,2],[84,5,96,3],[85,4,98,2],[85,10,98,8,"updateProfile"],[85,23,98,21],[85,26,98,24],[85,32,98,31,"profile"],[85,39,98,43],[85,43,98,48],[86,6,99,4],[86,10,99,8],[87,8,100,6],[87,14,100,12,"token"],[87,19,100,17],[87,22,100,20],[87,28,100,26,"storage"],[87,41,100,33],[87,42,100,33,"storage"],[87,49,100,33],[87,50,100,34,"getItemAsync"],[87,62,100,46],[87,63,100,47],[87,78,100,62],[87,79,100,63],[88,8,101,6],[88,14,101,12,"axios"],[88,19,101,17],[88,20,101,17,"default"],[88,27,101,17],[88,28,101,18,"put"],[88,31,101,21],[88,32,101,22],[88,35,101,25,"API_URL"],[88,42,101,32],[88,58,101,48],[88,60,101,50,"profile"],[88,67,101,57],[88,69,101,59],[89,10,102,8,"headers"],[89,17,102,15],[89,19,102,17],[90,12,102,19,"Authorization"],[90,25,102,32],[90,27,102,34],[90,37,102,44,"token"],[90,42,102,49],[91,10,102,52],[92,8,103,6],[92,9,103,7],[92,10,103,8],[93,8,104,6],[93,14,104,12,"refreshUser"],[93,25,104,23],[93,26,104,24],[93,27,104,25],[94,6,105,4],[94,7,105,5],[94,8,105,6],[94,15,105,13,"error"],[94,20,105,18],[94,22,105,20],[95,8,106,6,"console"],[95,15,106,13],[95,16,106,14,"error"],[95,21,106,19],[95,22,106,20],[95,47,106,45],[95,49,106,47,"error"],[95,54,106,52],[95,55,106,53],[96,8,107,6],[96,14,107,12,"error"],[96,19,107,17],[97,6,108,4],[98,4,109,2],[98,5,109,3],[99,4,111,2],[99,10,111,8,"refreshUser"],[99,21,111,19],[99,24,111,22],[99,30,111,22,"refreshUser"],[99,31,111,22],[99,36,111,34],[100,6,112,4],[100,10,112,8],[101,8,113,6],[101,14,113,12,"token"],[101,19,113,17],[101,22,113,20],[101,28,113,26,"storage"],[101,41,113,33],[101,42,113,33,"storage"],[101,49,113,33],[101,50,113,34,"getItemAsync"],[101,62,113,46],[101,63,113,47],[101,78,113,62],[101,79,113,63],[102,8,114,6],[102,12,114,10,"token"],[102,17,114,15],[102,19,114,17],[103,10,115,8],[103,16,115,14,"response"],[103,24,115,22],[103,27,115,25],[103,33,115,31,"axios"],[103,38,115,36],[103,39,115,36,"default"],[103,46,115,36],[103,47,115,37,"get"],[103,50,115,40],[103,51,115,41],[103,54,115,44,"API_URL"],[103,61,115,51],[103,71,115,61],[103,73,115,63],[104,12,116,10,"headers"],[104,19,116,17],[104,21,116,19],[105,14,116,21,"Authorization"],[105,27,116,34],[105,29,116,36],[105,39,116,46,"token"],[105,44,116,51],[106,12,116,54],[107,10,117,8],[107,11,117,9],[107,12,117,10],[108,10,118,8,"setUser"],[108,17,118,15],[108,18,118,16,"response"],[108,26,118,24],[108,27,118,25,"data"],[108,31,118,29],[108,32,118,30],[109,8,119,6],[110,6,120,4],[110,7,120,5],[110,8,120,6],[110,15,120,13,"error"],[110,20,120,18],[110,22,120,20],[111,8,121,6,"console"],[111,15,121,13],[111,16,121,14,"error"],[111,21,121,19],[111,22,121,20],[111,46,121,44],[111,48,121,46,"error"],[111,53,121,51],[111,54,121,52],[112,6,122,4],[113,4,123,2],[113,5,123,3],[114,4,125,2],[114,24,126,4],[114,28,126,4,"_reactJsxDevRuntime"],[114,47,126,4],[114,48,126,4,"jsxDEV"],[114,54,126,4],[114,56,126,5,"AuthContext"],[114,67,126,16],[114,68,126,17,"Provider"],[114,76,126,25],[115,6,127,6,"value"],[115,11,127,11],[115,13,127,13],[116,8,128,8,"user"],[116,12,128,12],[117,8,129,8,"loading"],[117,15,129,15],[118,8,130,8,"processSessionId"],[118,24,130,24],[119,8,131,8,"checkSession"],[119,20,131,20],[120,8,132,8,"logout"],[120,14,132,14],[121,8,133,8,"updateProfile"],[121,21,133,21],[122,8,134,8,"refreshUser"],[123,6,135,6],[123,7,135,8],[124,6,135,8,"children"],[124,14,135,8],[124,16,137,7,"children"],[125,4,137,15],[126,6,137,15,"fileName"],[126,14,137,15],[126,16,137,15,"_jsxFileName"],[126,28,137,15],[127,6,137,15,"lineNumber"],[127,16,137,15],[128,6,137,15,"columnNumber"],[128,18,137,15],[129,4,137,15],[129,11,138,26],[129,12,138,27],[130,2,140,0],[131,2,142,7],[131,11,142,16,"useAuth"],[131,18,142,23,"useAuth"],[131,19,142,23],[131,21,142,26],[132,4,143,2],[132,10,143,8,"context"],[132,17,143,15],[132,20,143,18],[132,24,143,18,"useContext"],[132,30,143,28],[132,31,143,28,"useContext"],[132,41,143,28],[132,43,143,29,"AuthContext"],[132,54,143,40],[132,55,143,41],[133,4,144,2],[133,8,144,6,"context"],[133,15,144,13],[133,20,144,18,"undefined"],[133,29,144,27],[133,31,144,29],[134,6,145,4],[134,12,145,10],[134,16,145,14,"Error"],[134,21,145,19],[134,22,145,20],[134,67,145,65],[134,68,145,66],[135,4,146,2],[136,4,147,2],[136,11,147,9,"context"],[136,18,147,16],[137,2,148,0],[138,0,148,1],[138,3]],"functionMap":{"names":["<global>","AuthProvider","processSessionId","checkSession","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;OCqC;2BCI;GDkB;uBEE;GFmB;iBGE;GHa;wBIE;GJW;sBKE;GLY;CDiB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}