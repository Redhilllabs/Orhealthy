{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[2], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n\n    // Check session on mount\n    (0, _react.useEffect)(() => {\n      checkSession();\n    }, []);\n    const processSessionId = async sessionId => {\n      try {\n        console.log('[AuthContext] Processing session ID:', sessionId);\n        const response = await axios.default.get(`${API_URL}/auth/session-data`, {\n          headers: {\n            'X-Session-ID': sessionId\n          }\n        });\n        console.log('[AuthContext] Session data received:', response.data);\n        const {\n          session_token\n        } = response.data;\n        await _utilsStorage.storage.setItemAsync('session_token', session_token);\n        console.log('[AuthContext] Session token stored');\n\n        // Get user data\n        await checkSession();\n      } catch (error) {\n        console.error('[AuthContext] Error processing session:', error);\n        throw error;\n      }\n    };\n    const checkSession = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) {\n          setLoading(false);\n          return;\n        }\n        const response = await axios.default.get(`${API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error checking session:', error);\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          await axios.default.post(`${API_URL}/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        }\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n        setUser(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    const updateProfile = async profile => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        await axios.default.put(`${API_URL}/users/profile`, profile, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshUser();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        throw error;\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          const response = await axios.default.get(`${API_URL}/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Error refreshing user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        processSessionId,\n        checkSession,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }, this);\n  }\n  function useAuth() {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n});","lineCount":143,"map":[[13,2,38,0,"exports"],[13,9,38,0],[13,10,38,0,"AuthProvider"],[13,22,38,0],[13,25,38,0,"AuthProvider"],[13,37,38,0],[14,2,147,0,"exports"],[14,9,147,0],[14,10,147,0,"useAuth"],[14,17,147,0],[14,20,147,0,"useAuth"],[14,27,147,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_axios"],[16,12,2,0],[16,15,2,0,"require"],[16,22,2,0],[16,23,2,0,"_dependencyMap"],[16,37,2,0],[17,2,2,0],[17,6,2,0,"axios"],[17,11,2,0],[17,14,2,0,"_interopDefault"],[17,29,2,0],[17,30,2,0,"_axios"],[17,36,2,0],[18,2,3,0],[18,6,3,0,"_utilsStorage"],[18,19,3,0],[18,22,3,0,"require"],[18,29,3,0],[18,30,3,0,"_dependencyMap"],[18,44,3,0],[19,2,3,43],[19,6,3,43,"_reactJsxDevRuntime"],[19,25,3,43],[19,28,3,43,"require"],[19,35,3,43],[19,36,3,43,"_dependencyMap"],[19,50,3,43],[20,2,5,0],[20,8,5,6,"API_URL"],[20,15,5,13],[20,18,5,16,"process"],[20,25,5,23],[20,26,5,24,"env"],[20,29,5,27],[20,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[20,53,5,51],[20,56,5,54],[20,62,5,60],[21,2,36,0],[21,8,36,6,"AuthContext"],[21,19,36,17],[21,35,36,20],[21,39,36,20,"createContext"],[21,45,36,33],[21,46,36,33,"createContext"],[21,59,36,33],[21,61,36,63,"undefined"],[21,70,36,72],[21,71,36,73],[22,2,38,7],[22,11,38,16,"AuthProvider"],[22,23,38,28,"AuthProvider"],[22,24,38,29],[23,4,38,31,"children"],[24,2,38,71],[24,3,38,72],[24,5,38,74],[25,4,39,2],[25,10,39,8],[25,11,39,9,"user"],[25,15,39,13],[25,17,39,15,"setUser"],[25,24,39,22],[25,25,39,23],[25,28,39,26],[25,32,39,26,"useState"],[25,38,39,34],[25,39,39,34,"useState"],[25,47,39,34],[25,49,39,48],[25,53,39,52],[25,54,39,53],[26,4,40,2],[26,10,40,8],[26,11,40,9,"loading"],[26,18,40,16],[26,20,40,18,"setLoading"],[26,30,40,28],[26,31,40,29],[26,34,40,32],[26,38,40,32,"useState"],[26,44,40,40],[26,45,40,40,"useState"],[26,53,40,40],[26,55,40,41],[26,59,40,45],[26,60,40,46],[28,4,42,2],[29,4,43,2],[29,8,43,2,"useEffect"],[29,14,43,11],[29,15,43,11,"useEffect"],[29,24,43,11],[29,26,43,12],[29,32,43,18],[30,6,44,4,"checkSession"],[30,18,44,16],[30,19,44,17],[30,20,44,18],[31,4,45,2],[31,5,45,3],[31,7,45,5],[31,9,45,7],[31,10,45,8],[32,4,47,2],[32,10,47,8,"processSessionId"],[32,26,47,24],[32,29,47,27],[32,35,47,34,"sessionId"],[32,44,47,51],[32,48,47,56],[33,6,48,4],[33,10,48,8],[34,8,49,6,"console"],[34,15,49,13],[34,16,49,14,"log"],[34,19,49,17],[34,20,49,18],[34,58,49,56],[34,60,49,58,"sessionId"],[34,69,49,67],[34,70,49,68],[35,8,50,6],[35,14,50,12,"response"],[35,22,50,20],[35,25,50,23],[35,31,50,29,"axios"],[35,36,50,34],[35,37,50,34,"default"],[35,44,50,34],[35,45,50,35,"get"],[35,48,50,38],[35,49,50,39],[35,52,50,42,"API_URL"],[35,59,50,49],[35,79,50,69],[35,81,50,71],[36,10,51,8,"headers"],[36,17,51,15],[36,19,51,17],[37,12,51,19],[37,26,51,33],[37,28,51,35,"sessionId"],[38,10,51,45],[39,8,52,6],[39,9,52,7],[39,10,52,8],[40,8,54,6,"console"],[40,15,54,13],[40,16,54,14,"log"],[40,19,54,17],[40,20,54,18],[40,58,54,56],[40,60,54,58,"response"],[40,68,54,66],[40,69,54,67,"data"],[40,73,54,71],[40,74,54,72],[41,8,55,6],[41,14,55,12],[42,10,55,14,"session_token"],[43,8,55,28],[43,9,55,29],[43,12,55,32,"response"],[43,20,55,40],[43,21,55,41,"data"],[43,25,55,45],[44,8,56,6],[44,14,56,12,"storage"],[44,27,56,19],[44,28,56,19,"storage"],[44,35,56,19],[44,36,56,20,"setItemAsync"],[44,48,56,32],[44,49,56,33],[44,64,56,48],[44,66,56,50,"session_token"],[44,79,56,63],[44,80,56,64],[45,8,57,6,"console"],[45,15,57,13],[45,16,57,14,"log"],[45,19,57,17],[45,20,57,18],[45,56,57,54],[45,57,57,55],[47,8,59,6],[48,8,60,6],[48,14,60,12,"checkSession"],[48,26,60,24],[48,27,60,25],[48,28,60,26],[49,6,61,4],[49,7,61,5],[49,8,61,6],[49,15,61,13,"error"],[49,20,61,18],[49,22,61,20],[50,8,62,6,"console"],[50,15,62,13],[50,16,62,14,"error"],[50,21,62,19],[50,22,62,20],[50,63,62,61],[50,65,62,63,"error"],[50,70,62,68],[50,71,62,69],[51,8,63,6],[51,14,63,12,"error"],[51,19,63,17],[52,6,64,4],[53,4,65,2],[53,5,65,3],[54,4,67,2],[54,10,67,8,"checkSession"],[54,22,67,20],[54,25,67,23],[54,31,67,23,"checkSession"],[54,32,67,23],[54,37,67,35],[55,6,68,4],[55,10,68,8],[56,8,69,6],[56,14,69,12,"token"],[56,19,69,17],[56,22,69,20],[56,28,69,26,"storage"],[56,41,69,33],[56,42,69,33,"storage"],[56,49,69,33],[56,50,69,34,"getItemAsync"],[56,62,69,46],[56,63,69,47],[56,78,69,62],[56,79,69,63],[57,8,70,6],[57,12,70,10],[57,13,70,11,"token"],[57,18,70,16],[57,20,70,18],[58,10,71,8,"setLoading"],[58,20,71,18],[58,21,71,19],[58,26,71,24],[58,27,71,25],[59,10,72,8],[60,8,73,6],[61,8,75,6],[61,14,75,12,"response"],[61,22,75,20],[61,25,75,23],[61,31,75,29,"axios"],[61,36,75,34],[61,37,75,34,"default"],[61,44,75,34],[61,45,75,35,"get"],[61,48,75,38],[61,49,75,39],[61,52,75,42,"API_URL"],[61,59,75,49],[61,69,75,59],[61,71,75,61],[62,10,76,8,"headers"],[62,17,76,15],[62,19,76,17],[63,12,76,19,"Authorization"],[63,25,76,32],[63,27,76,34],[63,37,76,44,"token"],[63,42,76,49],[64,10,76,52],[65,8,77,6],[65,9,77,7],[65,10,77,8],[66,8,79,6,"setUser"],[66,15,79,13],[66,16,79,14,"response"],[66,24,79,22],[66,25,79,23,"data"],[66,29,79,27],[66,30,79,28],[67,6,80,4],[67,7,80,5],[67,8,80,6],[67,15,80,13,"error"],[67,20,80,18],[67,22,80,20],[68,8,81,6,"console"],[68,15,81,13],[68,16,81,14,"error"],[68,21,81,19],[68,22,81,20],[68,47,81,45],[68,49,81,47,"error"],[68,54,81,52],[68,55,81,53],[69,8,82,6],[69,14,82,12,"storage"],[69,27,82,19],[69,28,82,19,"storage"],[69,35,82,19],[69,36,82,20,"deleteItemAsync"],[69,51,82,35],[69,52,82,36],[69,67,82,51],[69,68,82,52],[70,6,83,4],[70,7,83,5],[70,16,83,14],[71,8,84,6,"setLoading"],[71,18,84,16],[71,19,84,17],[71,24,84,22],[71,25,84,23],[72,6,85,4],[73,4,86,2],[73,5,86,3],[74,4,88,2],[74,10,88,8,"logout"],[74,16,88,14],[74,19,88,17],[74,25,88,17,"logout"],[74,26,88,17],[74,31,88,29],[75,6,89,4],[75,10,89,8],[76,8,90,6],[76,14,90,12,"token"],[76,19,90,17],[76,22,90,20],[76,28,90,26,"storage"],[76,41,90,33],[76,42,90,33,"storage"],[76,49,90,33],[76,50,90,34,"getItemAsync"],[76,62,90,46],[76,63,90,47],[76,78,90,62],[76,79,90,63],[77,8,91,6],[77,12,91,10,"token"],[77,17,91,15],[77,19,91,17],[78,10,92,8],[78,16,92,14,"axios"],[78,21,92,19],[78,22,92,19,"default"],[78,29,92,19],[78,30,92,20,"post"],[78,34,92,24],[78,35,92,25],[78,38,92,28,"API_URL"],[78,45,92,35],[78,59,92,49],[78,61,92,51],[78,62,92,52],[78,63,92,53],[78,65,92,55],[79,12,93,10,"headers"],[79,19,93,17],[79,21,93,19],[80,14,93,21,"Authorization"],[80,27,93,34],[80,29,93,36],[80,39,93,46,"token"],[80,44,93,51],[81,12,93,54],[82,10,94,8],[82,11,94,9],[82,12,94,10],[83,8,95,6],[84,8,96,6],[84,14,96,12,"storage"],[84,27,96,19],[84,28,96,19,"storage"],[84,35,96,19],[84,36,96,20,"deleteItemAsync"],[84,51,96,35],[84,52,96,36],[84,67,96,51],[84,68,96,52],[85,8,97,6,"setUser"],[85,15,97,13],[85,16,97,14],[85,20,97,18],[85,21,97,19],[86,6,98,4],[86,7,98,5],[86,8,98,6],[86,15,98,13,"error"],[86,20,98,18],[86,22,98,20],[87,8,99,6,"console"],[87,15,99,13],[87,16,99,14,"error"],[87,21,99,19],[87,22,99,20],[87,42,99,40],[87,44,99,42,"error"],[87,49,99,47],[87,50,99,48],[88,6,100,4],[89,4,101,2],[89,5,101,3],[90,4,103,2],[90,10,103,8,"updateProfile"],[90,23,103,21],[90,26,103,24],[90,32,103,31,"profile"],[90,39,103,43],[90,43,103,48],[91,6,104,4],[91,10,104,8],[92,8,105,6],[92,14,105,12,"token"],[92,19,105,17],[92,22,105,20],[92,28,105,26,"storage"],[92,41,105,33],[92,42,105,33,"storage"],[92,49,105,33],[92,50,105,34,"getItemAsync"],[92,62,105,46],[92,63,105,47],[92,78,105,62],[92,79,105,63],[93,8,106,6],[93,14,106,12,"axios"],[93,19,106,17],[93,20,106,17,"default"],[93,27,106,17],[93,28,106,18,"put"],[93,31,106,21],[93,32,106,22],[93,35,106,25,"API_URL"],[93,42,106,32],[93,58,106,48],[93,60,106,50,"profile"],[93,67,106,57],[93,69,106,59],[94,10,107,8,"headers"],[94,17,107,15],[94,19,107,17],[95,12,107,19,"Authorization"],[95,25,107,32],[95,27,107,34],[95,37,107,44,"token"],[95,42,107,49],[96,10,107,52],[97,8,108,6],[97,9,108,7],[97,10,108,8],[98,8,109,6],[98,14,109,12,"refreshUser"],[98,25,109,23],[98,26,109,24],[98,27,109,25],[99,6,110,4],[99,7,110,5],[99,8,110,6],[99,15,110,13,"error"],[99,20,110,18],[99,22,110,20],[100,8,111,6,"console"],[100,15,111,13],[100,16,111,14,"error"],[100,21,111,19],[100,22,111,20],[100,47,111,45],[100,49,111,47,"error"],[100,54,111,52],[100,55,111,53],[101,8,112,6],[101,14,112,12,"error"],[101,19,112,17],[102,6,113,4],[103,4,114,2],[103,5,114,3],[104,4,116,2],[104,10,116,8,"refreshUser"],[104,21,116,19],[104,24,116,22],[104,30,116,22,"refreshUser"],[104,31,116,22],[104,36,116,34],[105,6,117,4],[105,10,117,8],[106,8,118,6],[106,14,118,12,"token"],[106,19,118,17],[106,22,118,20],[106,28,118,26,"storage"],[106,41,118,33],[106,42,118,33,"storage"],[106,49,118,33],[106,50,118,34,"getItemAsync"],[106,62,118,46],[106,63,118,47],[106,78,118,62],[106,79,118,63],[107,8,119,6],[107,12,119,10,"token"],[107,17,119,15],[107,19,119,17],[108,10,120,8],[108,16,120,14,"response"],[108,24,120,22],[108,27,120,25],[108,33,120,31,"axios"],[108,38,120,36],[108,39,120,36,"default"],[108,46,120,36],[108,47,120,37,"get"],[108,50,120,40],[108,51,120,41],[108,54,120,44,"API_URL"],[108,61,120,51],[108,71,120,61],[108,73,120,63],[109,12,121,10,"headers"],[109,19,121,17],[109,21,121,19],[110,14,121,21,"Authorization"],[110,27,121,34],[110,29,121,36],[110,39,121,46,"token"],[110,44,121,51],[111,12,121,54],[112,10,122,8],[112,11,122,9],[112,12,122,10],[113,10,123,8,"setUser"],[113,17,123,15],[113,18,123,16,"response"],[113,26,123,24],[113,27,123,25,"data"],[113,31,123,29],[113,32,123,30],[114,8,124,6],[115,6,125,4],[115,7,125,5],[115,8,125,6],[115,15,125,13,"error"],[115,20,125,18],[115,22,125,20],[116,8,126,6,"console"],[116,15,126,13],[116,16,126,14,"error"],[116,21,126,19],[116,22,126,20],[116,46,126,44],[116,48,126,46,"error"],[116,53,126,51],[116,54,126,52],[117,6,127,4],[118,4,128,2],[118,5,128,3],[119,4,130,2],[119,24,131,4],[119,28,131,4,"_reactJsxDevRuntime"],[119,47,131,4],[119,48,131,4,"jsxDEV"],[119,54,131,4],[119,56,131,5,"AuthContext"],[119,67,131,16],[119,68,131,17,"Provider"],[119,76,131,25],[120,6,132,6,"value"],[120,11,132,11],[120,13,132,13],[121,8,133,8,"user"],[121,12,133,12],[122,8,134,8,"loading"],[122,15,134,15],[123,8,135,8,"processSessionId"],[123,24,135,24],[124,8,136,8,"checkSession"],[124,20,136,20],[125,8,137,8,"logout"],[125,14,137,14],[126,8,138,8,"updateProfile"],[126,21,138,21],[127,8,139,8,"refreshUser"],[128,6,140,6],[128,7,140,8],[129,6,140,8,"children"],[129,14,140,8],[129,16,142,7,"children"],[130,4,142,15],[131,6,142,15,"fileName"],[131,14,142,15],[131,16,142,15,"_jsxFileName"],[131,28,142,15],[132,6,142,15,"lineNumber"],[132,16,142,15],[133,6,142,15,"columnNumber"],[133,18,142,15],[134,4,142,15],[134,11,143,26],[134,12,143,27],[135,2,145,0],[136,2,147,7],[136,11,147,16,"useAuth"],[136,18,147,23,"useAuth"],[136,19,147,23],[136,21,147,26],[137,4,148,2],[137,10,148,8,"context"],[137,17,148,15],[137,20,148,18],[137,24,148,18,"useContext"],[137,30,148,28],[137,31,148,28,"useContext"],[137,41,148,28],[137,43,148,29,"AuthContext"],[137,54,148,40],[137,55,148,41],[138,4,149,2],[138,8,149,6,"context"],[138,15,149,13],[138,20,149,18,"undefined"],[138,29,149,27],[138,31,149,29],[139,6,150,4],[139,12,150,10],[139,16,150,14,"Error"],[139,21,150,19],[139,22,150,20],[139,67,150,65],[139,68,150,66],[140,4,151,2],[141,4,152,2],[141,11,152,9,"context"],[141,18,152,16],[142,2,153,0],[143,0,153,1],[143,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","processSessionId","checkSession","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;OCqC;YCK;GDE;2BEE;GFkB;uBGE;GHmB;iBIE;GJa;wBKE;GLW;sBME;GNY;CDiB;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}