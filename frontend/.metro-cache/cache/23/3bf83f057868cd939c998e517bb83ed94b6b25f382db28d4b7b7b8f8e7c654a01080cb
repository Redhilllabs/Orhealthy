{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/CartContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.CartProvider = CartProvider;\n  exports.useCart = useCart;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[2], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const CartContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function CartProvider({\n    children\n  }) {\n    const [cartItems, setCartItems] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      refreshCart();\n    }, []);\n    const refreshCart = async () => {\n      try {\n        setLoading(true);\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) return;\n        const response = await axios.default.get(`${API_URL}/cart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setCartItems(response.data.items || []);\n      } catch (error) {\n        console.error('Error fetching cart:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const addToCart = async item => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.post(`${API_URL}/cart`, item, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshCart();\n      } catch (error) {\n        console.error('Error adding to cart:', error);\n        throw error;\n      }\n    };\n    const removeFromCart = async index => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.delete(`${API_URL}/cart/${index}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshCart();\n      } catch (error) {\n        console.error('Error removing from cart:', error);\n        throw error;\n      }\n    };\n    const clearCart = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.delete(`${API_URL}/cart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setCartItems([]);\n      } catch (error) {\n        console.error('Error clearing cart:', error);\n        throw error;\n      }\n    };\n    const totalPrice = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(CartContext.Provider, {\n      value: {\n        cartItems,\n        loading,\n        addToCart,\n        removeFromCart,\n        clearCart,\n        refreshCart,\n        totalPrice\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }, this);\n  }\n  function useCart() {\n    const context = (0, _react.useContext)(CartContext);\n    if (context === undefined) {\n      throw new Error('useCart must be used within a CartProvider');\n    }\n    return context;\n  }\n});","lineCount":117,"map":[[13,2,27,0,"exports"],[13,9,27,0],[13,10,27,0,"CartProvider"],[13,22,27,0],[13,25,27,0,"CartProvider"],[13,37,27,0],[14,2,120,0,"exports"],[14,9,120,0],[14,10,120,0,"useCart"],[14,17,120,0],[14,20,120,0,"useCart"],[14,27,120,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_axios"],[16,12,2,0],[16,15,2,0,"require"],[16,22,2,0],[16,23,2,0,"_dependencyMap"],[16,37,2,0],[17,2,2,0],[17,6,2,0,"axios"],[17,11,2,0],[17,14,2,0,"_interopDefault"],[17,29,2,0],[17,30,2,0,"_axios"],[17,36,2,0],[18,2,3,0],[18,6,3,0,"_utilsStorage"],[18,19,3,0],[18,22,3,0,"require"],[18,29,3,0],[18,30,3,0,"_dependencyMap"],[18,44,3,0],[19,2,3,43],[19,6,3,43,"_reactJsxDevRuntime"],[19,25,3,43],[19,28,3,43,"require"],[19,35,3,43],[19,36,3,43,"_dependencyMap"],[19,50,3,43],[20,2,5,0],[20,8,5,6,"API_URL"],[20,15,5,13],[20,18,5,16,"process"],[20,25,5,23],[20,26,5,24,"env"],[20,29,5,27],[20,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[20,53,5,51],[20,56,5,54],[20,62,5,60],[21,2,25,0],[21,8,25,6,"CartContext"],[21,19,25,17],[21,35,25,20],[21,39,25,20,"createContext"],[21,45,25,33],[21,46,25,33,"createContext"],[21,59,25,33],[21,61,25,63,"undefined"],[21,70,25,72],[21,71,25,73],[22,2,27,7],[22,11,27,16,"CartProvider"],[22,23,27,28,"CartProvider"],[22,24,27,29],[23,4,27,31,"children"],[24,2,27,71],[24,3,27,72],[24,5,27,74],[25,4,28,2],[25,10,28,8],[25,11,28,9,"cartItems"],[25,20,28,18],[25,22,28,20,"setCartItems"],[25,34,28,32],[25,35,28,33],[25,38,28,36],[25,42,28,36,"useState"],[25,48,28,44],[25,49,28,44,"useState"],[25,57,28,44],[25,59,28,57],[25,61,28,59],[25,62,28,60],[26,4,29,2],[26,10,29,8],[26,11,29,9,"loading"],[26,18,29,16],[26,20,29,18,"setLoading"],[26,30,29,28],[26,31,29,29],[26,34,29,32],[26,38,29,32,"useState"],[26,44,29,40],[26,45,29,40,"useState"],[26,53,29,40],[26,55,29,41],[26,60,29,46],[26,61,29,47],[27,4,31,2],[27,8,31,2,"useEffect"],[27,14,31,11],[27,15,31,11,"useEffect"],[27,24,31,11],[27,26,31,12],[27,32,31,18],[28,6,32,4,"refreshCart"],[28,17,32,15],[28,18,32,16],[28,19,32,17],[29,4,33,2],[29,5,33,3],[29,7,33,5],[29,9,33,7],[29,10,33,8],[30,4,35,2],[30,10,35,8,"refreshCart"],[30,21,35,19],[30,24,35,22],[30,30,35,22,"refreshCart"],[30,31,35,22],[30,36,35,34],[31,6,36,4],[31,10,36,8],[32,8,37,6,"setLoading"],[32,18,37,16],[32,19,37,17],[32,23,37,21],[32,24,37,22],[33,8,38,6],[33,14,38,12,"token"],[33,19,38,17],[33,22,38,20],[33,28,38,26,"storage"],[33,41,38,33],[33,42,38,33,"storage"],[33,49,38,33],[33,50,38,34,"getItemAsync"],[33,62,38,46],[33,63,38,47],[33,78,38,62],[33,79,38,63],[34,8,39,6],[34,12,39,10],[34,13,39,11,"token"],[34,18,39,16],[34,20,39,18],[35,8,41,6],[35,14,41,12,"response"],[35,22,41,20],[35,25,41,23],[35,31,41,29,"axios"],[35,36,41,34],[35,37,41,34,"default"],[35,44,41,34],[35,45,41,35,"get"],[35,48,41,38],[35,49,41,39],[35,52,41,42,"API_URL"],[35,59,41,49],[35,66,41,56],[35,68,41,58],[36,10,42,8,"headers"],[36,17,42,15],[36,19,42,17],[37,12,42,19,"Authorization"],[37,25,42,32],[37,27,42,34],[37,37,42,44,"token"],[37,42,42,49],[38,10,42,52],[39,8,43,6],[39,9,43,7],[39,10,43,8],[40,8,45,6,"setCartItems"],[40,20,45,18],[40,21,45,19,"response"],[40,29,45,27],[40,30,45,28,"data"],[40,34,45,32],[40,35,45,33,"items"],[40,40,45,38],[40,44,45,42],[40,46,45,44],[40,47,45,45],[41,6,46,4],[41,7,46,5],[41,8,46,6],[41,15,46,13,"error"],[41,20,46,18],[41,22,46,20],[42,8,47,6,"console"],[42,15,47,13],[42,16,47,14,"error"],[42,21,47,19],[42,22,47,20],[42,44,47,42],[42,46,47,44,"error"],[42,51,47,49],[42,52,47,50],[43,6,48,4],[43,7,48,5],[43,16,48,14],[44,8,49,6,"setLoading"],[44,18,49,16],[44,19,49,17],[44,24,49,22],[44,25,49,23],[45,6,50,4],[46,4,51,2],[46,5,51,3],[47,4,53,2],[47,10,53,8,"addToCart"],[47,19,53,17],[47,22,53,20],[47,28,53,27,"item"],[47,32,53,41],[47,36,53,46],[48,6,54,4],[48,10,54,8],[49,8,55,6],[49,14,55,12,"token"],[49,19,55,17],[49,22,55,20],[49,28,55,26,"storage"],[49,41,55,33],[49,42,55,33,"storage"],[49,49,55,33],[49,50,55,34,"getItemAsync"],[49,62,55,46],[49,63,55,47],[49,78,55,62],[49,79,55,63],[50,8,56,6],[50,12,56,10],[50,13,56,11,"token"],[50,18,56,16],[50,20,56,18],[50,26,56,24],[50,30,56,28,"Error"],[50,35,56,33],[50,36,56,34],[50,55,56,53],[50,56,56,54],[51,8,58,6],[51,14,58,12,"axios"],[51,19,58,17],[51,20,58,17,"default"],[51,27,58,17],[51,28,58,18,"post"],[51,32,58,22],[51,33,58,23],[51,36,58,26,"API_URL"],[51,43,58,33],[51,50,58,40],[51,52,58,42,"item"],[51,56,58,46],[51,58,58,48],[52,10,59,8,"headers"],[52,17,59,15],[52,19,59,17],[53,12,59,19,"Authorization"],[53,25,59,32],[53,27,59,34],[53,37,59,44,"token"],[53,42,59,49],[54,10,59,52],[55,8,60,6],[55,9,60,7],[55,10,60,8],[56,8,62,6],[56,14,62,12,"refreshCart"],[56,25,62,23],[56,26,62,24],[56,27,62,25],[57,6,63,4],[57,7,63,5],[57,8,63,6],[57,15,63,13,"error"],[57,20,63,18],[57,22,63,20],[58,8,64,6,"console"],[58,15,64,13],[58,16,64,14,"error"],[58,21,64,19],[58,22,64,20],[58,45,64,43],[58,47,64,45,"error"],[58,52,64,50],[58,53,64,51],[59,8,65,6],[59,14,65,12,"error"],[59,19,65,17],[60,6,66,4],[61,4,67,2],[61,5,67,3],[62,4,69,2],[62,10,69,8,"removeFromCart"],[62,24,69,22],[62,27,69,25],[62,33,69,32,"index"],[62,38,69,45],[62,42,69,50],[63,6,70,4],[63,10,70,8],[64,8,71,6],[64,14,71,12,"token"],[64,19,71,17],[64,22,71,20],[64,28,71,26,"storage"],[64,41,71,33],[64,42,71,33,"storage"],[64,49,71,33],[64,50,71,34,"getItemAsync"],[64,62,71,46],[64,63,71,47],[64,78,71,62],[64,79,71,63],[65,8,72,6],[65,12,72,10],[65,13,72,11,"token"],[65,18,72,16],[65,20,72,18],[65,26,72,24],[65,30,72,28,"Error"],[65,35,72,33],[65,36,72,34],[65,55,72,53],[65,56,72,54],[66,8,74,6],[66,14,74,12,"axios"],[66,19,74,17],[66,20,74,17,"default"],[66,27,74,17],[66,28,74,18,"delete"],[66,34,74,24],[66,35,74,25],[66,38,74,28,"API_URL"],[66,45,74,35],[66,54,74,44,"index"],[66,59,74,49],[66,61,74,51],[66,63,74,53],[67,10,75,8,"headers"],[67,17,75,15],[67,19,75,17],[68,12,75,19,"Authorization"],[68,25,75,32],[68,27,75,34],[68,37,75,44,"token"],[68,42,75,49],[69,10,75,52],[70,8,76,6],[70,9,76,7],[70,10,76,8],[71,8,78,6],[71,14,78,12,"refreshCart"],[71,25,78,23],[71,26,78,24],[71,27,78,25],[72,6,79,4],[72,7,79,5],[72,8,79,6],[72,15,79,13,"error"],[72,20,79,18],[72,22,79,20],[73,8,80,6,"console"],[73,15,80,13],[73,16,80,14,"error"],[73,21,80,19],[73,22,80,20],[73,49,80,47],[73,51,80,49,"error"],[73,56,80,54],[73,57,80,55],[74,8,81,6],[74,14,81,12,"error"],[74,19,81,17],[75,6,82,4],[76,4,83,2],[76,5,83,3],[77,4,85,2],[77,10,85,8,"clearCart"],[77,19,85,17],[77,22,85,20],[77,28,85,20,"clearCart"],[77,29,85,20],[77,34,85,32],[78,6,86,4],[78,10,86,8],[79,8,87,6],[79,14,87,12,"token"],[79,19,87,17],[79,22,87,20],[79,28,87,26,"storage"],[79,41,87,33],[79,42,87,33,"storage"],[79,49,87,33],[79,50,87,34,"getItemAsync"],[79,62,87,46],[79,63,87,47],[79,78,87,62],[79,79,87,63],[80,8,88,6],[80,12,88,10],[80,13,88,11,"token"],[80,18,88,16],[80,20,88,18],[80,26,88,24],[80,30,88,28,"Error"],[80,35,88,33],[80,36,88,34],[80,55,88,53],[80,56,88,54],[81,8,90,6],[81,14,90,12,"axios"],[81,19,90,17],[81,20,90,17,"default"],[81,27,90,17],[81,28,90,18,"delete"],[81,34,90,24],[81,35,90,25],[81,38,90,28,"API_URL"],[81,45,90,35],[81,52,90,42],[81,54,90,44],[82,10,91,8,"headers"],[82,17,91,15],[82,19,91,17],[83,12,91,19,"Authorization"],[83,25,91,32],[83,27,91,34],[83,37,91,44,"token"],[83,42,91,49],[84,10,91,52],[85,8,92,6],[85,9,92,7],[85,10,92,8],[86,8,94,6,"setCartItems"],[86,20,94,18],[86,21,94,19],[86,23,94,21],[86,24,94,22],[87,6,95,4],[87,7,95,5],[87,8,95,6],[87,15,95,13,"error"],[87,20,95,18],[87,22,95,20],[88,8,96,6,"console"],[88,15,96,13],[88,16,96,14,"error"],[88,21,96,19],[88,22,96,20],[88,44,96,42],[88,46,96,44,"error"],[88,51,96,49],[88,52,96,50],[89,8,97,6],[89,14,97,12,"error"],[89,19,97,17],[90,6,98,4],[91,4,99,2],[91,5,99,3],[92,4,101,2],[92,10,101,8,"totalPrice"],[92,20,101,18],[92,23,101,21,"cartItems"],[92,32,101,30],[92,33,101,31,"reduce"],[92,39,101,37],[92,40,101,38],[92,41,101,39,"sum"],[92,44,101,42],[92,46,101,44,"item"],[92,50,101,48],[92,55,101,53,"sum"],[92,58,101,56],[92,61,101,59,"item"],[92,65,101,63],[92,66,101,64,"price"],[92,71,101,69],[92,74,101,72,"item"],[92,78,101,76],[92,79,101,77,"quantity"],[92,87,101,85],[92,89,101,87],[92,90,101,88],[92,91,101,89],[93,4,103,2],[93,24,104,4],[93,28,104,4,"_reactJsxDevRuntime"],[93,47,104,4],[93,48,104,4,"jsxDEV"],[93,54,104,4],[93,56,104,5,"CartContext"],[93,67,104,16],[93,68,104,17,"Provider"],[93,76,104,25],[94,6,105,6,"value"],[94,11,105,11],[94,13,105,13],[95,8,106,8,"cartItems"],[95,17,106,17],[96,8,107,8,"loading"],[96,15,107,15],[97,8,108,8,"addToCart"],[97,17,108,17],[98,8,109,8,"removeFromCart"],[98,22,109,22],[99,8,110,8,"clearCart"],[99,17,110,17],[100,8,111,8,"refreshCart"],[100,19,111,19],[101,8,112,8,"totalPrice"],[102,6,113,6],[102,7,113,8],[103,6,113,8,"children"],[103,14,113,8],[103,16,115,7,"children"],[104,4,115,15],[105,6,115,15,"fileName"],[105,14,115,15],[105,16,115,15,"_jsxFileName"],[105,28,115,15],[106,6,115,15,"lineNumber"],[106,16,115,15],[107,6,115,15,"columnNumber"],[107,18,115,15],[108,4,115,15],[108,11,116,26],[108,12,116,27],[109,2,118,0],[110,2,120,7],[110,11,120,16,"useCart"],[110,18,120,23,"useCart"],[110,19,120,23],[110,21,120,26],[111,4,121,2],[111,10,121,8,"context"],[111,17,121,15],[111,20,121,18],[111,24,121,18,"useContext"],[111,30,121,28],[111,31,121,28,"useContext"],[111,41,121,28],[111,43,121,29,"CartContext"],[111,54,121,40],[111,55,121,41],[112,4,122,2],[112,8,122,6,"context"],[112,15,122,13],[112,20,122,18,"undefined"],[112,29,122,27],[112,31,122,29],[113,6,123,4],[113,12,123,10],[113,16,123,14,"Error"],[113,21,123,19],[113,22,123,20],[113,66,123,64],[113,67,123,65],[114,4,124,2],[115,4,125,2],[115,11,125,9,"context"],[115,18,125,16],[116,2,126,0],[117,0,126,1],[117,3]],"functionMap":{"names":["<global>","CartProvider","useEffect$argument_0","refreshCart","addToCart","removeFromCart","clearCart","cartItems.reduce$argument_0","useCart"],"mappings":"AAA;OC0B;YCI;GDE;sBEE;GFgB;oBGE;GHc;yBIE;GJc;oBKE;GLc;sCME,+CN;CDiB;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}