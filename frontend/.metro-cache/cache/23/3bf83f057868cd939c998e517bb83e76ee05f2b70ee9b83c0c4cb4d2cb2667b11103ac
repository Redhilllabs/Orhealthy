{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/CartContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.CartProvider = CartProvider;\n  exports.useCart = useCart;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[2], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const CartContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function CartProvider({\n    children\n  }) {\n    const [cartItems, setCartItems] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      refreshCart();\n    }, []);\n    const refreshCart = async () => {\n      try {\n        setLoading(true);\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) return;\n        const response = await axios.default.get(`${API_URL}/cart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setCartItems(response.data.items || []);\n      } catch (error) {\n        console.error('Error fetching cart:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const addToCart = async item => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.post(`${API_URL}/cart`, item, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshCart();\n      } catch (error) {\n        console.error('Error adding to cart:', error);\n        throw error;\n      }\n    };\n    const removeFromCart = async index => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.delete(`${API_URL}/cart/${index}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshCart();\n      } catch (error) {\n        console.error('Error removing from cart:', error);\n        throw error;\n      }\n      const updateQuantity = async (index, quantity) => {\n        try {\n          const token = await _utilsStorage.storage.getItemAsync('session_token');\n          if (!token) throw new Error('Not authenticated');\n          await axios.default.put(`${API_URL}/cart/${index}`, {\n            quantity\n          }, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          await refreshCart();\n        } catch (error) {\n          console.error('Error updating quantity:', error);\n          throw error;\n        }\n      };\n    };\n    const clearCart = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.delete(`${API_URL}/cart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setCartItems([]);\n      } catch (error) {\n        console.error('Error clearing cart:', error);\n        throw error;\n      }\n    };\n    const totalPrice = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(CartContext.Provider, {\n      value: {\n        cartItems,\n        loading,\n        addToCart,\n        removeFromCart,\n        updateQuantity,\n        clearCart,\n        refreshCart,\n        totalPrice\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 5\n    }, this);\n  }\n  function useCart() {\n    const context = (0, _react.useContext)(CartContext);\n    if (context === undefined) {\n      throw new Error('useCart must be used within a CartProvider');\n    }\n    return context;\n  }\n});","lineCount":135,"map":[[13,2,28,0,"exports"],[13,9,28,0],[13,10,28,0,"CartProvider"],[13,22,28,0],[13,25,28,0,"CartProvider"],[13,37,28,0],[14,2,142,0,"exports"],[14,9,142,0],[14,10,142,0,"useCart"],[14,17,142,0],[14,20,142,0,"useCart"],[14,27,142,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_axios"],[16,12,2,0],[16,15,2,0,"require"],[16,22,2,0],[16,23,2,0,"_dependencyMap"],[16,37,2,0],[17,2,2,0],[17,6,2,0,"axios"],[17,11,2,0],[17,14,2,0,"_interopDefault"],[17,29,2,0],[17,30,2,0,"_axios"],[17,36,2,0],[18,2,3,0],[18,6,3,0,"_utilsStorage"],[18,19,3,0],[18,22,3,0,"require"],[18,29,3,0],[18,30,3,0,"_dependencyMap"],[18,44,3,0],[19,2,3,43],[19,6,3,43,"_reactJsxDevRuntime"],[19,25,3,43],[19,28,3,43,"require"],[19,35,3,43],[19,36,3,43,"_dependencyMap"],[19,50,3,43],[20,2,5,0],[20,8,5,6,"API_URL"],[20,15,5,13],[20,18,5,16,"process"],[20,25,5,23],[20,26,5,24,"env"],[20,29,5,27],[20,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[20,53,5,51],[20,56,5,54],[20,62,5,60],[21,2,26,0],[21,8,26,6,"CartContext"],[21,19,26,17],[21,35,26,20],[21,39,26,20,"createContext"],[21,45,26,33],[21,46,26,33,"createContext"],[21,59,26,33],[21,61,26,63,"undefined"],[21,70,26,72],[21,71,26,73],[22,2,28,7],[22,11,28,16,"CartProvider"],[22,23,28,28,"CartProvider"],[22,24,28,29],[23,4,28,31,"children"],[24,2,28,71],[24,3,28,72],[24,5,28,74],[25,4,29,2],[25,10,29,8],[25,11,29,9,"cartItems"],[25,20,29,18],[25,22,29,20,"setCartItems"],[25,34,29,32],[25,35,29,33],[25,38,29,36],[25,42,29,36,"useState"],[25,48,29,44],[25,49,29,44,"useState"],[25,57,29,44],[25,59,29,57],[25,61,29,59],[25,62,29,60],[26,4,30,2],[26,10,30,8],[26,11,30,9,"loading"],[26,18,30,16],[26,20,30,18,"setLoading"],[26,30,30,28],[26,31,30,29],[26,34,30,32],[26,38,30,32,"useState"],[26,44,30,40],[26,45,30,40,"useState"],[26,53,30,40],[26,55,30,41],[26,60,30,46],[26,61,30,47],[27,4,32,2],[27,8,32,2,"useEffect"],[27,14,32,11],[27,15,32,11,"useEffect"],[27,24,32,11],[27,26,32,12],[27,32,32,18],[28,6,33,4,"refreshCart"],[28,17,33,15],[28,18,33,16],[28,19,33,17],[29,4,34,2],[29,5,34,3],[29,7,34,5],[29,9,34,7],[29,10,34,8],[30,4,36,2],[30,10,36,8,"refreshCart"],[30,21,36,19],[30,24,36,22],[30,30,36,22,"refreshCart"],[30,31,36,22],[30,36,36,34],[31,6,37,4],[31,10,37,8],[32,8,38,6,"setLoading"],[32,18,38,16],[32,19,38,17],[32,23,38,21],[32,24,38,22],[33,8,39,6],[33,14,39,12,"token"],[33,19,39,17],[33,22,39,20],[33,28,39,26,"storage"],[33,41,39,33],[33,42,39,33,"storage"],[33,49,39,33],[33,50,39,34,"getItemAsync"],[33,62,39,46],[33,63,39,47],[33,78,39,62],[33,79,39,63],[34,8,40,6],[34,12,40,10],[34,13,40,11,"token"],[34,18,40,16],[34,20,40,18],[35,8,42,6],[35,14,42,12,"response"],[35,22,42,20],[35,25,42,23],[35,31,42,29,"axios"],[35,36,42,34],[35,37,42,34,"default"],[35,44,42,34],[35,45,42,35,"get"],[35,48,42,38],[35,49,42,39],[35,52,42,42,"API_URL"],[35,59,42,49],[35,66,42,56],[35,68,42,58],[36,10,43,8,"headers"],[36,17,43,15],[36,19,43,17],[37,12,43,19,"Authorization"],[37,25,43,32],[37,27,43,34],[37,37,43,44,"token"],[37,42,43,49],[38,10,43,52],[39,8,44,6],[39,9,44,7],[39,10,44,8],[40,8,46,6,"setCartItems"],[40,20,46,18],[40,21,46,19,"response"],[40,29,46,27],[40,30,46,28,"data"],[40,34,46,32],[40,35,46,33,"items"],[40,40,46,38],[40,44,46,42],[40,46,46,44],[40,47,46,45],[41,6,47,4],[41,7,47,5],[41,8,47,6],[41,15,47,13,"error"],[41,20,47,18],[41,22,47,20],[42,8,48,6,"console"],[42,15,48,13],[42,16,48,14,"error"],[42,21,48,19],[42,22,48,20],[42,44,48,42],[42,46,48,44,"error"],[42,51,48,49],[42,52,48,50],[43,6,49,4],[43,7,49,5],[43,16,49,14],[44,8,50,6,"setLoading"],[44,18,50,16],[44,19,50,17],[44,24,50,22],[44,25,50,23],[45,6,51,4],[46,4,52,2],[46,5,52,3],[47,4,54,2],[47,10,54,8,"addToCart"],[47,19,54,17],[47,22,54,20],[47,28,54,27,"item"],[47,32,54,41],[47,36,54,46],[48,6,55,4],[48,10,55,8],[49,8,56,6],[49,14,56,12,"token"],[49,19,56,17],[49,22,56,20],[49,28,56,26,"storage"],[49,41,56,33],[49,42,56,33,"storage"],[49,49,56,33],[49,50,56,34,"getItemAsync"],[49,62,56,46],[49,63,56,47],[49,78,56,62],[49,79,56,63],[50,8,57,6],[50,12,57,10],[50,13,57,11,"token"],[50,18,57,16],[50,20,57,18],[50,26,57,24],[50,30,57,28,"Error"],[50,35,57,33],[50,36,57,34],[50,55,57,53],[50,56,57,54],[51,8,59,6],[51,14,59,12,"axios"],[51,19,59,17],[51,20,59,17,"default"],[51,27,59,17],[51,28,59,18,"post"],[51,32,59,22],[51,33,59,23],[51,36,59,26,"API_URL"],[51,43,59,33],[51,50,59,40],[51,52,59,42,"item"],[51,56,59,46],[51,58,59,48],[52,10,60,8,"headers"],[52,17,60,15],[52,19,60,17],[53,12,60,19,"Authorization"],[53,25,60,32],[53,27,60,34],[53,37,60,44,"token"],[53,42,60,49],[54,10,60,52],[55,8,61,6],[55,9,61,7],[55,10,61,8],[56,8,63,6],[56,14,63,12,"refreshCart"],[56,25,63,23],[56,26,63,24],[56,27,63,25],[57,6,64,4],[57,7,64,5],[57,8,64,6],[57,15,64,13,"error"],[57,20,64,18],[57,22,64,20],[58,8,65,6,"console"],[58,15,65,13],[58,16,65,14,"error"],[58,21,65,19],[58,22,65,20],[58,45,65,43],[58,47,65,45,"error"],[58,52,65,50],[58,53,65,51],[59,8,66,6],[59,14,66,12,"error"],[59,19,66,17],[60,6,67,4],[61,4,68,2],[61,5,68,3],[62,4,70,2],[62,10,70,8,"removeFromCart"],[62,24,70,22],[62,27,70,25],[62,33,70,32,"index"],[62,38,70,45],[62,42,70,50],[63,6,71,4],[63,10,71,8],[64,8,72,6],[64,14,72,12,"token"],[64,19,72,17],[64,22,72,20],[64,28,72,26,"storage"],[64,41,72,33],[64,42,72,33,"storage"],[64,49,72,33],[64,50,72,34,"getItemAsync"],[64,62,72,46],[64,63,72,47],[64,78,72,62],[64,79,72,63],[65,8,73,6],[65,12,73,10],[65,13,73,11,"token"],[65,18,73,16],[65,20,73,18],[65,26,73,24],[65,30,73,28,"Error"],[65,35,73,33],[65,36,73,34],[65,55,73,53],[65,56,73,54],[66,8,75,6],[66,14,75,12,"axios"],[66,19,75,17],[66,20,75,17,"default"],[66,27,75,17],[66,28,75,18,"delete"],[66,34,75,24],[66,35,75,25],[66,38,75,28,"API_URL"],[66,45,75,35],[66,54,75,44,"index"],[66,59,75,49],[66,61,75,51],[66,63,75,53],[67,10,76,8,"headers"],[67,17,76,15],[67,19,76,17],[68,12,76,19,"Authorization"],[68,25,76,32],[68,27,76,34],[68,37,76,44,"token"],[68,42,76,49],[69,10,76,52],[70,8,77,6],[70,9,77,7],[70,10,77,8],[71,8,79,6],[71,14,79,12,"refreshCart"],[71,25,79,23],[71,26,79,24],[71,27,79,25],[72,6,80,4],[72,7,80,5],[72,8,80,6],[72,15,80,13,"error"],[72,20,80,18],[72,22,80,20],[73,8,81,6,"console"],[73,15,81,13],[73,16,81,14,"error"],[73,21,81,19],[73,22,81,20],[73,49,81,47],[73,51,81,49,"error"],[73,56,81,54],[73,57,81,55],[74,8,82,6],[74,14,82,12,"error"],[74,19,82,17],[75,6,83,4],[76,6,86,2],[76,12,86,8,"updateQuantity"],[76,26,86,22],[76,29,86,25],[76,35,86,25,"updateQuantity"],[76,36,86,32,"index"],[76,41,86,45],[76,43,86,47,"quantity"],[76,51,86,63],[76,56,86,68],[77,8,87,4],[77,12,87,8],[78,10,88,6],[78,16,88,12,"token"],[78,21,88,17],[78,24,88,20],[78,30,88,26,"storage"],[78,43,88,33],[78,44,88,33,"storage"],[78,51,88,33],[78,52,88,34,"getItemAsync"],[78,64,88,46],[78,65,88,47],[78,80,88,62],[78,81,88,63],[79,10,89,6],[79,14,89,10],[79,15,89,11,"token"],[79,20,89,16],[79,22,89,18],[79,28,89,24],[79,32,89,28,"Error"],[79,37,89,33],[79,38,89,34],[79,57,89,53],[79,58,89,54],[80,10,91,6],[80,16,91,12,"axios"],[80,21,91,17],[80,22,91,17,"default"],[80,29,91,17],[80,30,91,18,"put"],[80,33,91,21],[80,34,92,8],[80,37,92,11,"API_URL"],[80,44,92,18],[80,53,92,27,"index"],[80,58,92,32],[80,60,92,34],[80,62,93,8],[81,12,93,10,"quantity"],[82,10,93,19],[82,11,93,20],[82,13,94,8],[83,12,94,10,"headers"],[83,19,94,17],[83,21,94,19],[84,14,94,21,"Authorization"],[84,27,94,34],[84,29,94,36],[84,39,94,46,"token"],[84,44,94,51],[85,12,94,54],[86,10,94,56],[86,11,95,6],[86,12,95,7],[87,10,97,6],[87,16,97,12,"refreshCart"],[87,27,97,23],[87,28,97,24],[87,29,97,25],[88,8,98,4],[88,9,98,5],[88,10,98,6],[88,17,98,13,"error"],[88,22,98,18],[88,24,98,20],[89,10,99,6,"console"],[89,17,99,13],[89,18,99,14,"error"],[89,23,99,19],[89,24,99,20],[89,50,99,46],[89,52,99,48,"error"],[89,57,99,53],[89,58,99,54],[90,10,100,6],[90,16,100,12,"error"],[90,21,100,17],[91,8,101,4],[92,6,102,2],[92,7,102,3],[93,4,104,2],[93,5,104,3],[94,4,106,2],[94,10,106,8,"clearCart"],[94,19,106,17],[94,22,106,20],[94,28,106,20,"clearCart"],[94,29,106,20],[94,34,106,32],[95,6,107,4],[95,10,107,8],[96,8,108,6],[96,14,108,12,"token"],[96,19,108,17],[96,22,108,20],[96,28,108,26,"storage"],[96,41,108,33],[96,42,108,33,"storage"],[96,49,108,33],[96,50,108,34,"getItemAsync"],[96,62,108,46],[96,63,108,47],[96,78,108,62],[96,79,108,63],[97,8,109,6],[97,12,109,10],[97,13,109,11,"token"],[97,18,109,16],[97,20,109,18],[97,26,109,24],[97,30,109,28,"Error"],[97,35,109,33],[97,36,109,34],[97,55,109,53],[97,56,109,54],[98,8,111,6],[98,14,111,12,"axios"],[98,19,111,17],[98,20,111,17,"default"],[98,27,111,17],[98,28,111,18,"delete"],[98,34,111,24],[98,35,111,25],[98,38,111,28,"API_URL"],[98,45,111,35],[98,52,111,42],[98,54,111,44],[99,10,112,8,"headers"],[99,17,112,15],[99,19,112,17],[100,12,112,19,"Authorization"],[100,25,112,32],[100,27,112,34],[100,37,112,44,"token"],[100,42,112,49],[101,10,112,52],[102,8,113,6],[102,9,113,7],[102,10,113,8],[103,8,115,6,"setCartItems"],[103,20,115,18],[103,21,115,19],[103,23,115,21],[103,24,115,22],[104,6,116,4],[104,7,116,5],[104,8,116,6],[104,15,116,13,"error"],[104,20,116,18],[104,22,116,20],[105,8,117,6,"console"],[105,15,117,13],[105,16,117,14,"error"],[105,21,117,19],[105,22,117,20],[105,44,117,42],[105,46,117,44,"error"],[105,51,117,49],[105,52,117,50],[106,8,118,6],[106,14,118,12,"error"],[106,19,118,17],[107,6,119,4],[108,4,120,2],[108,5,120,3],[109,4,122,2],[109,10,122,8,"totalPrice"],[109,20,122,18],[109,23,122,21,"cartItems"],[109,32,122,30],[109,33,122,31,"reduce"],[109,39,122,37],[109,40,122,38],[109,41,122,39,"sum"],[109,44,122,42],[109,46,122,44,"item"],[109,50,122,48],[109,55,122,53,"sum"],[109,58,122,56],[109,61,122,59,"item"],[109,65,122,63],[109,66,122,64,"price"],[109,71,122,69],[109,74,122,72,"item"],[109,78,122,76],[109,79,122,77,"quantity"],[109,87,122,85],[109,89,122,87],[109,90,122,88],[109,91,122,89],[110,4,124,2],[110,24,125,4],[110,28,125,4,"_reactJsxDevRuntime"],[110,47,125,4],[110,48,125,4,"jsxDEV"],[110,54,125,4],[110,56,125,5,"CartContext"],[110,67,125,16],[110,68,125,17,"Provider"],[110,76,125,25],[111,6,126,6,"value"],[111,11,126,11],[111,13,126,13],[112,8,127,8,"cartItems"],[112,17,127,17],[113,8,128,8,"loading"],[113,15,128,15],[114,8,129,8,"addToCart"],[114,17,129,17],[115,8,130,8,"removeFromCart"],[115,22,130,22],[116,8,131,8,"updateQuantity"],[116,22,131,22],[117,8,132,8,"clearCart"],[117,17,132,17],[118,8,133,8,"refreshCart"],[118,19,133,19],[119,8,134,8,"totalPrice"],[120,6,135,6],[120,7,135,8],[121,6,135,8,"children"],[121,14,135,8],[121,16,137,7,"children"],[122,4,137,15],[123,6,137,15,"fileName"],[123,14,137,15],[123,16,137,15,"_jsxFileName"],[123,28,137,15],[124,6,137,15,"lineNumber"],[124,16,137,15],[125,6,137,15,"columnNumber"],[125,18,137,15],[126,4,137,15],[126,11,138,26],[126,12,138,27],[127,2,140,0],[128,2,142,7],[128,11,142,16,"useCart"],[128,18,142,23,"useCart"],[128,19,142,23],[128,21,142,26],[129,4,143,2],[129,10,143,8,"context"],[129,17,143,15],[129,20,143,18],[129,24,143,18,"useContext"],[129,30,143,28],[129,31,143,28,"useContext"],[129,41,143,28],[129,43,143,29,"CartContext"],[129,54,143,40],[129,55,143,41],[130,4,144,2],[130,8,144,6,"context"],[130,15,144,13],[130,20,144,18,"undefined"],[130,29,144,27],[130,31,144,29],[131,6,145,4],[131,12,145,10],[131,16,145,14,"Error"],[131,21,145,19],[131,22,145,20],[131,66,145,64],[131,67,145,65],[132,4,146,2],[133,4,147,2],[133,11,147,9,"context"],[133,18,147,16],[134,2,148,0],[135,0,148,1],[135,3]],"functionMap":{"names":["<global>","CartProvider","useEffect$argument_0","refreshCart","addToCart","removeFromCart","updateQuantity","clearCart","cartItems.reduce$argument_0","useCart"],"mappings":"AAA;OC2B;YCI;GDE;sBEE;GFgB;oBGE;GHc;yBIE;yBCgB;GDgB;GJE;oBME;GNc;sCOE,+CP;CDkB;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}