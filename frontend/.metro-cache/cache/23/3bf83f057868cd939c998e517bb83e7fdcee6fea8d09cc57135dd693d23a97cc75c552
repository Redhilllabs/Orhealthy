{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/CartContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.CartProvider = CartProvider;\n  exports.useCart = useCart;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _axios = require(_dependencyMap[1], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[2], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const API_URL = process.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const CartContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function CartProvider({\n    children\n  }) {\n    const [cartItems, setCartItems] = (0, _react.useState)([]);\n    const [loading, setLoading] = (0, _react.useState)(false);\n    (0, _react.useEffect)(() => {\n      refreshCart();\n    }, []);\n    const refreshCart = async () => {\n      try {\n        setLoading(true);\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) return;\n        const response = await axios.default.get(`${API_URL}/cart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setCartItems(response.data.items || []);\n      } catch (error) {\n        console.error('Error fetching cart:', error);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const addToCart = async item => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.post(`${API_URL}/cart`, item, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshCart();\n      } catch (error) {\n        console.error('Error adding to cart:', error);\n        throw error;\n      }\n    };\n    const removeFromCart = async index => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.delete(`${API_URL}/cart/${index}`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshCart();\n      } catch (error) {\n        console.error('Error removing from cart:', error);\n        throw error;\n      }\n    };\n    const updateQuantity = async (index, quantity) => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.put(`${API_URL}/cart/${index}`, {\n          quantity\n        }, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshCart();\n      } catch (error) {\n        console.error('Error updating quantity:', error);\n        throw error;\n      }\n    };\n    const clearCart = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) throw new Error('Not authenticated');\n        await axios.default.delete(`${API_URL}/cart`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setCartItems([]);\n      } catch (error) {\n        console.error('Error clearing cart:', error);\n        throw error;\n      }\n    };\n    const totalPrice = cartItems.reduce((sum, item) => sum + item.price * item.quantity, 0);\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(CartContext.Provider, {\n      value: {\n        cartItems,\n        loading,\n        addToCart,\n        removeFromCart,\n        updateQuantity,\n        clearCart,\n        refreshCart,\n        totalPrice\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 5\n    }, this);\n  }\n  function useCart() {\n    const context = (0, _react.useContext)(CartContext);\n    if (context === undefined) {\n      throw new Error('useCart must be used within a CartProvider');\n    }\n    return context;\n  }\n});","lineCount":135,"map":[[13,2,28,0,"exports"],[13,9,28,0],[13,10,28,0,"CartProvider"],[13,22,28,0],[13,25,28,0,"CartProvider"],[13,37,28,0],[14,2,140,0,"exports"],[14,9,140,0],[14,10,140,0,"useCart"],[14,17,140,0],[14,20,140,0,"useCart"],[14,27,140,0],[15,2,1,0],[15,6,1,0,"_react"],[15,12,1,0],[15,15,1,0,"require"],[15,22,1,0],[15,23,1,0,"_dependencyMap"],[15,37,1,0],[16,2,2,0],[16,6,2,0,"_axios"],[16,12,2,0],[16,15,2,0,"require"],[16,22,2,0],[16,23,2,0,"_dependencyMap"],[16,37,2,0],[17,2,2,0],[17,6,2,0,"axios"],[17,11,2,0],[17,14,2,0,"_interopDefault"],[17,29,2,0],[17,30,2,0,"_axios"],[17,36,2,0],[18,2,3,0],[18,6,3,0,"_utilsStorage"],[18,19,3,0],[18,22,3,0,"require"],[18,29,3,0],[18,30,3,0,"_dependencyMap"],[18,44,3,0],[19,2,3,43],[19,6,3,43,"_reactJsxDevRuntime"],[19,25,3,43],[19,28,3,43,"require"],[19,35,3,43],[19,36,3,43,"_dependencyMap"],[19,50,3,43],[20,2,5,0],[20,8,5,6,"API_URL"],[20,15,5,13],[20,18,5,16,"process"],[20,25,5,23],[20,26,5,24,"env"],[20,29,5,27],[20,30,5,28,"EXPO_PUBLIC_BACKEND_URL"],[20,53,5,51],[20,56,5,54],[20,62,5,60],[21,2,26,0],[21,8,26,6,"CartContext"],[21,19,26,17],[21,35,26,20],[21,39,26,20,"createContext"],[21,45,26,33],[21,46,26,33,"createContext"],[21,59,26,33],[21,61,26,63,"undefined"],[21,70,26,72],[21,71,26,73],[22,2,28,7],[22,11,28,16,"CartProvider"],[22,23,28,28,"CartProvider"],[22,24,28,29],[23,4,28,31,"children"],[24,2,28,71],[24,3,28,72],[24,5,28,74],[25,4,29,2],[25,10,29,8],[25,11,29,9,"cartItems"],[25,20,29,18],[25,22,29,20,"setCartItems"],[25,34,29,32],[25,35,29,33],[25,38,29,36],[25,42,29,36,"useState"],[25,48,29,44],[25,49,29,44,"useState"],[25,57,29,44],[25,59,29,57],[25,61,29,59],[25,62,29,60],[26,4,30,2],[26,10,30,8],[26,11,30,9,"loading"],[26,18,30,16],[26,20,30,18,"setLoading"],[26,30,30,28],[26,31,30,29],[26,34,30,32],[26,38,30,32,"useState"],[26,44,30,40],[26,45,30,40,"useState"],[26,53,30,40],[26,55,30,41],[26,60,30,46],[26,61,30,47],[27,4,32,2],[27,8,32,2,"useEffect"],[27,14,32,11],[27,15,32,11,"useEffect"],[27,24,32,11],[27,26,32,12],[27,32,32,18],[28,6,33,4,"refreshCart"],[28,17,33,15],[28,18,33,16],[28,19,33,17],[29,4,34,2],[29,5,34,3],[29,7,34,5],[29,9,34,7],[29,10,34,8],[30,4,36,2],[30,10,36,8,"refreshCart"],[30,21,36,19],[30,24,36,22],[30,30,36,22,"refreshCart"],[30,31,36,22],[30,36,36,34],[31,6,37,4],[31,10,37,8],[32,8,38,6,"setLoading"],[32,18,38,16],[32,19,38,17],[32,23,38,21],[32,24,38,22],[33,8,39,6],[33,14,39,12,"token"],[33,19,39,17],[33,22,39,20],[33,28,39,26,"storage"],[33,41,39,33],[33,42,39,33,"storage"],[33,49,39,33],[33,50,39,34,"getItemAsync"],[33,62,39,46],[33,63,39,47],[33,78,39,62],[33,79,39,63],[34,8,40,6],[34,12,40,10],[34,13,40,11,"token"],[34,18,40,16],[34,20,40,18],[35,8,42,6],[35,14,42,12,"response"],[35,22,42,20],[35,25,42,23],[35,31,42,29,"axios"],[35,36,42,34],[35,37,42,34,"default"],[35,44,42,34],[35,45,42,35,"get"],[35,48,42,38],[35,49,42,39],[35,52,42,42,"API_URL"],[35,59,42,49],[35,66,42,56],[35,68,42,58],[36,10,43,8,"headers"],[36,17,43,15],[36,19,43,17],[37,12,43,19,"Authorization"],[37,25,43,32],[37,27,43,34],[37,37,43,44,"token"],[37,42,43,49],[38,10,43,52],[39,8,44,6],[39,9,44,7],[39,10,44,8],[40,8,46,6,"setCartItems"],[40,20,46,18],[40,21,46,19,"response"],[40,29,46,27],[40,30,46,28,"data"],[40,34,46,32],[40,35,46,33,"items"],[40,40,46,38],[40,44,46,42],[40,46,46,44],[40,47,46,45],[41,6,47,4],[41,7,47,5],[41,8,47,6],[41,15,47,13,"error"],[41,20,47,18],[41,22,47,20],[42,8,48,6,"console"],[42,15,48,13],[42,16,48,14,"error"],[42,21,48,19],[42,22,48,20],[42,44,48,42],[42,46,48,44,"error"],[42,51,48,49],[42,52,48,50],[43,6,49,4],[43,7,49,5],[43,16,49,14],[44,8,50,6,"setLoading"],[44,18,50,16],[44,19,50,17],[44,24,50,22],[44,25,50,23],[45,6,51,4],[46,4,52,2],[46,5,52,3],[47,4,54,2],[47,10,54,8,"addToCart"],[47,19,54,17],[47,22,54,20],[47,28,54,27,"item"],[47,32,54,41],[47,36,54,46],[48,6,55,4],[48,10,55,8],[49,8,56,6],[49,14,56,12,"token"],[49,19,56,17],[49,22,56,20],[49,28,56,26,"storage"],[49,41,56,33],[49,42,56,33,"storage"],[49,49,56,33],[49,50,56,34,"getItemAsync"],[49,62,56,46],[49,63,56,47],[49,78,56,62],[49,79,56,63],[50,8,57,6],[50,12,57,10],[50,13,57,11,"token"],[50,18,57,16],[50,20,57,18],[50,26,57,24],[50,30,57,28,"Error"],[50,35,57,33],[50,36,57,34],[50,55,57,53],[50,56,57,54],[51,8,59,6],[51,14,59,12,"axios"],[51,19,59,17],[51,20,59,17,"default"],[51,27,59,17],[51,28,59,18,"post"],[51,32,59,22],[51,33,59,23],[51,36,59,26,"API_URL"],[51,43,59,33],[51,50,59,40],[51,52,59,42,"item"],[51,56,59,46],[51,58,59,48],[52,10,60,8,"headers"],[52,17,60,15],[52,19,60,17],[53,12,60,19,"Authorization"],[53,25,60,32],[53,27,60,34],[53,37,60,44,"token"],[53,42,60,49],[54,10,60,52],[55,8,61,6],[55,9,61,7],[55,10,61,8],[56,8,63,6],[56,14,63,12,"refreshCart"],[56,25,63,23],[56,26,63,24],[56,27,63,25],[57,6,64,4],[57,7,64,5],[57,8,64,6],[57,15,64,13,"error"],[57,20,64,18],[57,22,64,20],[58,8,65,6,"console"],[58,15,65,13],[58,16,65,14,"error"],[58,21,65,19],[58,22,65,20],[58,45,65,43],[58,47,65,45,"error"],[58,52,65,50],[58,53,65,51],[59,8,66,6],[59,14,66,12,"error"],[59,19,66,17],[60,6,67,4],[61,4,68,2],[61,5,68,3],[62,4,70,2],[62,10,70,8,"removeFromCart"],[62,24,70,22],[62,27,70,25],[62,33,70,32,"index"],[62,38,70,45],[62,42,70,50],[63,6,71,4],[63,10,71,8],[64,8,72,6],[64,14,72,12,"token"],[64,19,72,17],[64,22,72,20],[64,28,72,26,"storage"],[64,41,72,33],[64,42,72,33,"storage"],[64,49,72,33],[64,50,72,34,"getItemAsync"],[64,62,72,46],[64,63,72,47],[64,78,72,62],[64,79,72,63],[65,8,73,6],[65,12,73,10],[65,13,73,11,"token"],[65,18,73,16],[65,20,73,18],[65,26,73,24],[65,30,73,28,"Error"],[65,35,73,33],[65,36,73,34],[65,55,73,53],[65,56,73,54],[66,8,75,6],[66,14,75,12,"axios"],[66,19,75,17],[66,20,75,17,"default"],[66,27,75,17],[66,28,75,18,"delete"],[66,34,75,24],[66,35,75,25],[66,38,75,28,"API_URL"],[66,45,75,35],[66,54,75,44,"index"],[66,59,75,49],[66,61,75,51],[66,63,75,53],[67,10,76,8,"headers"],[67,17,76,15],[67,19,76,17],[68,12,76,19,"Authorization"],[68,25,76,32],[68,27,76,34],[68,37,76,44,"token"],[68,42,76,49],[69,10,76,52],[70,8,77,6],[70,9,77,7],[70,10,77,8],[71,8,79,6],[71,14,79,12,"refreshCart"],[71,25,79,23],[71,26,79,24],[71,27,79,25],[72,6,80,4],[72,7,80,5],[72,8,80,6],[72,15,80,13,"error"],[72,20,80,18],[72,22,80,20],[73,8,81,6,"console"],[73,15,81,13],[73,16,81,14,"error"],[73,21,81,19],[73,22,81,20],[73,49,81,47],[73,51,81,49,"error"],[73,56,81,54],[73,57,81,55],[74,8,82,6],[74,14,82,12,"error"],[74,19,82,17],[75,6,83,4],[76,4,84,2],[76,5,84,3],[77,4,86,2],[77,10,86,8,"updateQuantity"],[77,24,86,22],[77,27,86,25],[77,33,86,25,"updateQuantity"],[77,34,86,32,"index"],[77,39,86,45],[77,41,86,47,"quantity"],[77,49,86,63],[77,54,86,68],[78,6,87,4],[78,10,87,8],[79,8,88,6],[79,14,88,12,"token"],[79,19,88,17],[79,22,88,20],[79,28,88,26,"storage"],[79,41,88,33],[79,42,88,33,"storage"],[79,49,88,33],[79,50,88,34,"getItemAsync"],[79,62,88,46],[79,63,88,47],[79,78,88,62],[79,79,88,63],[80,8,89,6],[80,12,89,10],[80,13,89,11,"token"],[80,18,89,16],[80,20,89,18],[80,26,89,24],[80,30,89,28,"Error"],[80,35,89,33],[80,36,89,34],[80,55,89,53],[80,56,89,54],[81,8,91,6],[81,14,91,12,"axios"],[81,19,91,17],[81,20,91,17,"default"],[81,27,91,17],[81,28,91,18,"put"],[81,31,91,21],[81,32,92,8],[81,35,92,11,"API_URL"],[81,42,92,18],[81,51,92,27,"index"],[81,56,92,32],[81,58,92,34],[81,60,93,8],[82,10,93,10,"quantity"],[83,8,93,19],[83,9,93,20],[83,11,94,8],[84,10,94,10,"headers"],[84,17,94,17],[84,19,94,19],[85,12,94,21,"Authorization"],[85,25,94,34],[85,27,94,36],[85,37,94,46,"token"],[85,42,94,51],[86,10,94,54],[87,8,94,56],[87,9,95,6],[87,10,95,7],[88,8,97,6],[88,14,97,12,"refreshCart"],[88,25,97,23],[88,26,97,24],[88,27,97,25],[89,6,98,4],[89,7,98,5],[89,8,98,6],[89,15,98,13,"error"],[89,20,98,18],[89,22,98,20],[90,8,99,6,"console"],[90,15,99,13],[90,16,99,14,"error"],[90,21,99,19],[90,22,99,20],[90,48,99,46],[90,50,99,48,"error"],[90,55,99,53],[90,56,99,54],[91,8,100,6],[91,14,100,12,"error"],[91,19,100,17],[92,6,101,4],[93,4,102,2],[93,5,102,3],[94,4,104,2],[94,10,104,8,"clearCart"],[94,19,104,17],[94,22,104,20],[94,28,104,20,"clearCart"],[94,29,104,20],[94,34,104,32],[95,6,105,4],[95,10,105,8],[96,8,106,6],[96,14,106,12,"token"],[96,19,106,17],[96,22,106,20],[96,28,106,26,"storage"],[96,41,106,33],[96,42,106,33,"storage"],[96,49,106,33],[96,50,106,34,"getItemAsync"],[96,62,106,46],[96,63,106,47],[96,78,106,62],[96,79,106,63],[97,8,107,6],[97,12,107,10],[97,13,107,11,"token"],[97,18,107,16],[97,20,107,18],[97,26,107,24],[97,30,107,28,"Error"],[97,35,107,33],[97,36,107,34],[97,55,107,53],[97,56,107,54],[98,8,109,6],[98,14,109,12,"axios"],[98,19,109,17],[98,20,109,17,"default"],[98,27,109,17],[98,28,109,18,"delete"],[98,34,109,24],[98,35,109,25],[98,38,109,28,"API_URL"],[98,45,109,35],[98,52,109,42],[98,54,109,44],[99,10,110,8,"headers"],[99,17,110,15],[99,19,110,17],[100,12,110,19,"Authorization"],[100,25,110,32],[100,27,110,34],[100,37,110,44,"token"],[100,42,110,49],[101,10,110,52],[102,8,111,6],[102,9,111,7],[102,10,111,8],[103,8,113,6,"setCartItems"],[103,20,113,18],[103,21,113,19],[103,23,113,21],[103,24,113,22],[104,6,114,4],[104,7,114,5],[104,8,114,6],[104,15,114,13,"error"],[104,20,114,18],[104,22,114,20],[105,8,115,6,"console"],[105,15,115,13],[105,16,115,14,"error"],[105,21,115,19],[105,22,115,20],[105,44,115,42],[105,46,115,44,"error"],[105,51,115,49],[105,52,115,50],[106,8,116,6],[106,14,116,12,"error"],[106,19,116,17],[107,6,117,4],[108,4,118,2],[108,5,118,3],[109,4,120,2],[109,10,120,8,"totalPrice"],[109,20,120,18],[109,23,120,21,"cartItems"],[109,32,120,30],[109,33,120,31,"reduce"],[109,39,120,37],[109,40,120,38],[109,41,120,39,"sum"],[109,44,120,42],[109,46,120,44,"item"],[109,50,120,48],[109,55,120,53,"sum"],[109,58,120,56],[109,61,120,59,"item"],[109,65,120,63],[109,66,120,64,"price"],[109,71,120,69],[109,74,120,72,"item"],[109,78,120,76],[109,79,120,77,"quantity"],[109,87,120,85],[109,89,120,87],[109,90,120,88],[109,91,120,89],[110,4,122,2],[110,24,123,4],[110,28,123,4,"_reactJsxDevRuntime"],[110,47,123,4],[110,48,123,4,"jsxDEV"],[110,54,123,4],[110,56,123,5,"CartContext"],[110,67,123,16],[110,68,123,17,"Provider"],[110,76,123,25],[111,6,124,6,"value"],[111,11,124,11],[111,13,124,13],[112,8,125,8,"cartItems"],[112,17,125,17],[113,8,126,8,"loading"],[113,15,126,15],[114,8,127,8,"addToCart"],[114,17,127,17],[115,8,128,8,"removeFromCart"],[115,22,128,22],[116,8,129,8,"updateQuantity"],[116,22,129,22],[117,8,130,8,"clearCart"],[117,17,130,17],[118,8,131,8,"refreshCart"],[118,19,131,19],[119,8,132,8,"totalPrice"],[120,6,133,6],[120,7,133,8],[121,6,133,8,"children"],[121,14,133,8],[121,16,135,7,"children"],[122,4,135,15],[123,6,135,15,"fileName"],[123,14,135,15],[123,16,135,15,"_jsxFileName"],[123,28,135,15],[124,6,135,15,"lineNumber"],[124,16,135,15],[125,6,135,15,"columnNumber"],[125,18,135,15],[126,4,135,15],[126,11,136,26],[126,12,136,27],[127,2,138,0],[128,2,140,7],[128,11,140,16,"useCart"],[128,18,140,23,"useCart"],[128,19,140,23],[128,21,140,26],[129,4,141,2],[129,10,141,8,"context"],[129,17,141,15],[129,20,141,18],[129,24,141,18,"useContext"],[129,30,141,28],[129,31,141,28,"useContext"],[129,41,141,28],[129,43,141,29,"CartContext"],[129,54,141,40],[129,55,141,41],[130,4,142,2],[130,8,142,6,"context"],[130,15,142,13],[130,20,142,18,"undefined"],[130,29,142,27],[130,31,142,29],[131,6,143,4],[131,12,143,10],[131,16,143,14,"Error"],[131,21,143,19],[131,22,143,20],[131,66,143,64],[131,67,143,65],[132,4,144,2],[133,4,145,2],[133,11,145,9,"context"],[133,18,145,16],[134,2,146,0],[135,0,146,1],[135,3]],"functionMap":{"names":["<global>","CartProvider","useEffect$argument_0","refreshCart","addToCart","removeFromCart","updateQuantity","clearCart","cartItems.reduce$argument_0","useCart"],"mappings":"AAA;OC2B;YCI;GDE;sBEE;GFgB;oBGE;GHc;yBIE;GJc;yBKE;GLgB;oBME;GNc;sCOE,+CP;CDkB;OSE;CTM"},"hasCjsExports":false},"type":"js/module"}]}