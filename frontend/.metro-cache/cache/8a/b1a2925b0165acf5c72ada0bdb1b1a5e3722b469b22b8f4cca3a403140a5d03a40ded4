{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[3], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const processSessionId = async sessionId => {\n      try {\n        console.log('[AuthContext] Processing session ID:', sessionId);\n        const response = await axios.default.get(`${API_URL}/auth/session-data`, {\n          headers: {\n            'X-Session-ID': sessionId\n          }\n        });\n        console.log('[AuthContext] Session data received:', response.data);\n        const {\n          session_token\n        } = response.data;\n        await _utilsStorage.storage.setItemAsync('session_token', session_token);\n        console.log('[AuthContext] Session token stored');\n\n        // Get user data\n        await checkSession();\n      } catch (error) {\n        console.error('[AuthContext] Error processing session:', error);\n        throw error;\n      }\n    };\n    const checkSession = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) {\n          setLoading(false);\n          return;\n        }\n        const response = await axios.default.get(`${API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error checking session:', error);\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          await axios.default.post(`${API_URL}/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        }\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n        setUser(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    const updateProfile = async profile => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        await axios.default.put(`${API_URL}/users/profile`, profile, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshUser();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        throw error;\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          const response = await axios.default.get(`${API_URL}/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Error refreshing user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        processSessionId,\n        checkSession,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"o1Ynvy3ICMxXWoN/XOPaU379K10=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":148,"map":[[15,2,38,0,"exports"],[15,9,38,0],[15,10,38,0,"AuthProvider"],[15,22,38,0],[15,25,38,0,"AuthProvider"],[15,37,38,0],[16,2,142,0,"exports"],[16,9,142,0],[16,10,142,0,"useAuth"],[16,17,142,0],[16,20,142,0,"useAuth"],[16,27,142,0],[17,2,148,1],[17,6,148,1,"_expoVirtualEnv"],[17,21,148,1],[17,24,148,1,"require"],[17,31,148,1],[17,32,148,1,"_dependencyMap"],[17,46,148,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_axios"],[19,12,2,0],[19,15,2,0,"require"],[19,22,2,0],[19,23,2,0,"_dependencyMap"],[19,37,2,0],[20,2,2,0],[20,6,2,0,"axios"],[20,11,2,0],[20,14,2,0,"_interopDefault"],[20,29,2,0],[20,30,2,0,"_axios"],[20,36,2,0],[21,2,3,0],[21,6,3,0,"_utilsStorage"],[21,19,3,0],[21,22,3,0,"require"],[21,29,3,0],[21,30,3,0,"_dependencyMap"],[21,44,3,0],[22,2,3,43],[22,6,3,43,"_reactJsxDevRuntime"],[22,25,3,43],[22,28,3,43,"require"],[22,35,3,43],[22,36,3,43,"_dependencyMap"],[22,50,3,43],[23,2,5,0],[23,8,5,6,"API_URL"],[23,15,5,13],[23,18,5,16,"_expoVirtualEnv"],[23,33,5,16],[23,34,5,16,"env"],[23,37,5,16],[23,38,5,16,"EXPO_PUBLIC_BACKEND_URL"],[23,61,5,16],[23,64,5,54],[23,70,5,60],[24,2,36,0],[24,8,36,6,"AuthContext"],[24,19,36,17],[24,35,36,20],[24,39,36,20,"createContext"],[24,45,36,33],[24,46,36,33,"createContext"],[24,59,36,33],[24,61,36,63,"undefined"],[24,70,36,72],[24,71,36,73],[25,2,38,7],[25,11,38,16,"AuthProvider"],[25,23,38,28,"AuthProvider"],[25,24,38,29],[26,4,38,31,"children"],[27,2,38,71],[27,3,38,72],[27,5,38,74],[28,4,38,74,"_s"],[28,6,38,74],[29,4,39,2],[29,10,39,8],[29,11,39,9,"user"],[29,15,39,13],[29,17,39,15,"setUser"],[29,24,39,22],[29,25,39,23],[29,28,39,26],[29,32,39,26,"useState"],[29,38,39,34],[29,39,39,34,"useState"],[29,47,39,34],[29,49,39,48],[29,53,39,52],[29,54,39,53],[30,4,40,2],[30,10,40,8],[30,11,40,9,"loading"],[30,18,40,16],[30,20,40,18,"setLoading"],[30,30,40,28],[30,31,40,29],[30,34,40,32],[30,38,40,32,"useState"],[30,44,40,40],[30,45,40,40,"useState"],[30,53,40,40],[30,55,40,41],[30,59,40,45],[30,60,40,46],[31,4,42,2],[31,10,42,8,"processSessionId"],[31,26,42,24],[31,29,42,27],[31,35,42,34,"sessionId"],[31,44,42,51],[31,48,42,56],[32,6,43,4],[32,10,43,8],[33,8,44,6,"console"],[33,15,44,13],[33,16,44,14,"log"],[33,19,44,17],[33,20,44,18],[33,58,44,56],[33,60,44,58,"sessionId"],[33,69,44,67],[33,70,44,68],[34,8,45,6],[34,14,45,12,"response"],[34,22,45,20],[34,25,45,23],[34,31,45,29,"axios"],[34,36,45,34],[34,37,45,34,"default"],[34,44,45,34],[34,45,45,35,"get"],[34,48,45,38],[34,49,45,39],[34,52,45,42,"API_URL"],[34,59,45,49],[34,79,45,69],[34,81,45,71],[35,10,46,8,"headers"],[35,17,46,15],[35,19,46,17],[36,12,46,19],[36,26,46,33],[36,28,46,35,"sessionId"],[37,10,46,45],[38,8,47,6],[38,9,47,7],[38,10,47,8],[39,8,49,6,"console"],[39,15,49,13],[39,16,49,14,"log"],[39,19,49,17],[39,20,49,18],[39,58,49,56],[39,60,49,58,"response"],[39,68,49,66],[39,69,49,67,"data"],[39,73,49,71],[39,74,49,72],[40,8,50,6],[40,14,50,12],[41,10,50,14,"session_token"],[42,8,50,28],[42,9,50,29],[42,12,50,32,"response"],[42,20,50,40],[42,21,50,41,"data"],[42,25,50,45],[43,8,51,6],[43,14,51,12,"storage"],[43,27,51,19],[43,28,51,19,"storage"],[43,35,51,19],[43,36,51,20,"setItemAsync"],[43,48,51,32],[43,49,51,33],[43,64,51,48],[43,66,51,50,"session_token"],[43,79,51,63],[43,80,51,64],[44,8,52,6,"console"],[44,15,52,13],[44,16,52,14,"log"],[44,19,52,17],[44,20,52,18],[44,56,52,54],[44,57,52,55],[46,8,54,6],[47,8,55,6],[47,14,55,12,"checkSession"],[47,26,55,24],[47,27,55,25],[47,28,55,26],[48,6,56,4],[48,7,56,5],[48,8,56,6],[48,15,56,13,"error"],[48,20,56,18],[48,22,56,20],[49,8,57,6,"console"],[49,15,57,13],[49,16,57,14,"error"],[49,21,57,19],[49,22,57,20],[49,63,57,61],[49,65,57,63,"error"],[49,70,57,68],[49,71,57,69],[50,8,58,6],[50,14,58,12,"error"],[50,19,58,17],[51,6,59,4],[52,4,60,2],[52,5,60,3],[53,4,62,2],[53,10,62,8,"checkSession"],[53,22,62,20],[53,25,62,23],[53,31,62,23,"checkSession"],[53,32,62,23],[53,37,62,35],[54,6,63,4],[54,10,63,8],[55,8,64,6],[55,14,64,12,"token"],[55,19,64,17],[55,22,64,20],[55,28,64,26,"storage"],[55,41,64,33],[55,42,64,33,"storage"],[55,49,64,33],[55,50,64,34,"getItemAsync"],[55,62,64,46],[55,63,64,47],[55,78,64,62],[55,79,64,63],[56,8,65,6],[56,12,65,10],[56,13,65,11,"token"],[56,18,65,16],[56,20,65,18],[57,10,66,8,"setLoading"],[57,20,66,18],[57,21,66,19],[57,26,66,24],[57,27,66,25],[58,10,67,8],[59,8,68,6],[60,8,70,6],[60,14,70,12,"response"],[60,22,70,20],[60,25,70,23],[60,31,70,29,"axios"],[60,36,70,34],[60,37,70,34,"default"],[60,44,70,34],[60,45,70,35,"get"],[60,48,70,38],[60,49,70,39],[60,52,70,42,"API_URL"],[60,59,70,49],[60,69,70,59],[60,71,70,61],[61,10,71,8,"headers"],[61,17,71,15],[61,19,71,17],[62,12,71,19,"Authorization"],[62,25,71,32],[62,27,71,34],[62,37,71,44,"token"],[62,42,71,49],[63,10,71,52],[64,8,72,6],[64,9,72,7],[64,10,72,8],[65,8,74,6,"setUser"],[65,15,74,13],[65,16,74,14,"response"],[65,24,74,22],[65,25,74,23,"data"],[65,29,74,27],[65,30,74,28],[66,6,75,4],[66,7,75,5],[66,8,75,6],[66,15,75,13,"error"],[66,20,75,18],[66,22,75,20],[67,8,76,6,"console"],[67,15,76,13],[67,16,76,14,"error"],[67,21,76,19],[67,22,76,20],[67,47,76,45],[67,49,76,47,"error"],[67,54,76,52],[67,55,76,53],[68,8,77,6],[68,14,77,12,"storage"],[68,27,77,19],[68,28,77,19,"storage"],[68,35,77,19],[68,36,77,20,"deleteItemAsync"],[68,51,77,35],[68,52,77,36],[68,67,77,51],[68,68,77,52],[69,6,78,4],[69,7,78,5],[69,16,78,14],[70,8,79,6,"setLoading"],[70,18,79,16],[70,19,79,17],[70,24,79,22],[70,25,79,23],[71,6,80,4],[72,4,81,2],[72,5,81,3],[73,4,83,2],[73,10,83,8,"logout"],[73,16,83,14],[73,19,83,17],[73,25,83,17,"logout"],[73,26,83,17],[73,31,83,29],[74,6,84,4],[74,10,84,8],[75,8,85,6],[75,14,85,12,"token"],[75,19,85,17],[75,22,85,20],[75,28,85,26,"storage"],[75,41,85,33],[75,42,85,33,"storage"],[75,49,85,33],[75,50,85,34,"getItemAsync"],[75,62,85,46],[75,63,85,47],[75,78,85,62],[75,79,85,63],[76,8,86,6],[76,12,86,10,"token"],[76,17,86,15],[76,19,86,17],[77,10,87,8],[77,16,87,14,"axios"],[77,21,87,19],[77,22,87,19,"default"],[77,29,87,19],[77,30,87,20,"post"],[77,34,87,24],[77,35,87,25],[77,38,87,28,"API_URL"],[77,45,87,35],[77,59,87,49],[77,61,87,51],[77,62,87,52],[77,63,87,53],[77,65,87,55],[78,12,88,10,"headers"],[78,19,88,17],[78,21,88,19],[79,14,88,21,"Authorization"],[79,27,88,34],[79,29,88,36],[79,39,88,46,"token"],[79,44,88,51],[80,12,88,54],[81,10,89,8],[81,11,89,9],[81,12,89,10],[82,8,90,6],[83,8,91,6],[83,14,91,12,"storage"],[83,27,91,19],[83,28,91,19,"storage"],[83,35,91,19],[83,36,91,20,"deleteItemAsync"],[83,51,91,35],[83,52,91,36],[83,67,91,51],[83,68,91,52],[84,8,92,6,"setUser"],[84,15,92,13],[84,16,92,14],[84,20,92,18],[84,21,92,19],[85,6,93,4],[85,7,93,5],[85,8,93,6],[85,15,93,13,"error"],[85,20,93,18],[85,22,93,20],[86,8,94,6,"console"],[86,15,94,13],[86,16,94,14,"error"],[86,21,94,19],[86,22,94,20],[86,42,94,40],[86,44,94,42,"error"],[86,49,94,47],[86,50,94,48],[87,6,95,4],[88,4,96,2],[88,5,96,3],[89,4,98,2],[89,10,98,8,"updateProfile"],[89,23,98,21],[89,26,98,24],[89,32,98,31,"profile"],[89,39,98,43],[89,43,98,48],[90,6,99,4],[90,10,99,8],[91,8,100,6],[91,14,100,12,"token"],[91,19,100,17],[91,22,100,20],[91,28,100,26,"storage"],[91,41,100,33],[91,42,100,33,"storage"],[91,49,100,33],[91,50,100,34,"getItemAsync"],[91,62,100,46],[91,63,100,47],[91,78,100,62],[91,79,100,63],[92,8,101,6],[92,14,101,12,"axios"],[92,19,101,17],[92,20,101,17,"default"],[92,27,101,17],[92,28,101,18,"put"],[92,31,101,21],[92,32,101,22],[92,35,101,25,"API_URL"],[92,42,101,32],[92,58,101,48],[92,60,101,50,"profile"],[92,67,101,57],[92,69,101,59],[93,10,102,8,"headers"],[93,17,102,15],[93,19,102,17],[94,12,102,19,"Authorization"],[94,25,102,32],[94,27,102,34],[94,37,102,44,"token"],[94,42,102,49],[95,10,102,52],[96,8,103,6],[96,9,103,7],[96,10,103,8],[97,8,104,6],[97,14,104,12,"refreshUser"],[97,25,104,23],[97,26,104,24],[97,27,104,25],[98,6,105,4],[98,7,105,5],[98,8,105,6],[98,15,105,13,"error"],[98,20,105,18],[98,22,105,20],[99,8,106,6,"console"],[99,15,106,13],[99,16,106,14,"error"],[99,21,106,19],[99,22,106,20],[99,47,106,45],[99,49,106,47,"error"],[99,54,106,52],[99,55,106,53],[100,8,107,6],[100,14,107,12,"error"],[100,19,107,17],[101,6,108,4],[102,4,109,2],[102,5,109,3],[103,4,111,2],[103,10,111,8,"refreshUser"],[103,21,111,19],[103,24,111,22],[103,30,111,22,"refreshUser"],[103,31,111,22],[103,36,111,34],[104,6,112,4],[104,10,112,8],[105,8,113,6],[105,14,113,12,"token"],[105,19,113,17],[105,22,113,20],[105,28,113,26,"storage"],[105,41,113,33],[105,42,113,33,"storage"],[105,49,113,33],[105,50,113,34,"getItemAsync"],[105,62,113,46],[105,63,113,47],[105,78,113,62],[105,79,113,63],[106,8,114,6],[106,12,114,10,"token"],[106,17,114,15],[106,19,114,17],[107,10,115,8],[107,16,115,14,"response"],[107,24,115,22],[107,27,115,25],[107,33,115,31,"axios"],[107,38,115,36],[107,39,115,36,"default"],[107,46,115,36],[107,47,115,37,"get"],[107,50,115,40],[107,51,115,41],[107,54,115,44,"API_URL"],[107,61,115,51],[107,71,115,61],[107,73,115,63],[108,12,116,10,"headers"],[108,19,116,17],[108,21,116,19],[109,14,116,21,"Authorization"],[109,27,116,34],[109,29,116,36],[109,39,116,46,"token"],[109,44,116,51],[110,12,116,54],[111,10,117,8],[111,11,117,9],[111,12,117,10],[112,10,118,8,"setUser"],[112,17,118,15],[112,18,118,16,"response"],[112,26,118,24],[112,27,118,25,"data"],[112,31,118,29],[112,32,118,30],[113,8,119,6],[114,6,120,4],[114,7,120,5],[114,8,120,6],[114,15,120,13,"error"],[114,20,120,18],[114,22,120,20],[115,8,121,6,"console"],[115,15,121,13],[115,16,121,14,"error"],[115,21,121,19],[115,22,121,20],[115,46,121,44],[115,48,121,46,"error"],[115,53,121,51],[115,54,121,52],[116,6,122,4],[117,4,123,2],[117,5,123,3],[118,4,125,2],[118,24,126,4],[118,28,126,4,"_reactJsxDevRuntime"],[118,47,126,4],[118,48,126,4,"jsxDEV"],[118,54,126,4],[118,56,126,5,"AuthContext"],[118,67,126,16],[118,68,126,17,"Provider"],[118,76,126,25],[119,6,127,6,"value"],[119,11,127,11],[119,13,127,13],[120,8,128,8,"user"],[120,12,128,12],[121,8,129,8,"loading"],[121,15,129,15],[122,8,130,8,"processSessionId"],[122,24,130,24],[123,8,131,8,"checkSession"],[123,20,131,20],[124,8,132,8,"logout"],[124,14,132,14],[125,8,133,8,"updateProfile"],[125,21,133,21],[126,8,134,8,"refreshUser"],[127,6,135,6],[127,7,135,8],[128,6,135,8,"children"],[128,14,135,8],[128,16,137,7,"children"],[129,4,137,15],[130,6,137,15,"fileName"],[130,14,137,15],[130,16,137,15,"_jsxFileName"],[130,28,137,15],[131,6,137,15,"lineNumber"],[131,16,137,15],[132,6,137,15,"columnNumber"],[132,18,137,15],[133,4,137,15],[133,11,138,26],[133,12,138,27],[134,2,140,0],[135,2,140,1,"_s"],[135,4,140,1],[135,5,38,16,"AuthProvider"],[135,17,38,28],[136,2,38,28,"_c"],[136,4,38,28],[136,7,38,16,"AuthProvider"],[136,19,38,28],[137,2,142,7],[137,11,142,16,"useAuth"],[137,18,142,23,"useAuth"],[137,19,142,23],[137,21,142,26],[138,4,142,26,"_s2"],[138,7,142,26],[139,4,143,2],[139,10,143,8,"context"],[139,17,143,15],[139,20,143,18],[139,24,143,18,"useContext"],[139,30,143,28],[139,31,143,28,"useContext"],[139,41,143,28],[139,43,143,29,"AuthContext"],[139,54,143,40],[139,55,143,41],[140,4,144,2],[140,8,144,6,"context"],[140,15,144,13],[140,20,144,18,"undefined"],[140,29,144,27],[140,31,144,29],[141,6,145,4],[141,12,145,10],[141,16,145,14,"Error"],[141,21,145,19],[141,22,145,20],[141,67,145,65],[141,68,145,66],[142,4,146,2],[143,4,147,2],[143,11,147,9,"context"],[143,18,147,16],[144,2,148,0],[145,2,148,1,"_s2"],[145,5,148,1],[145,6,142,16,"useAuth"],[145,13,142,23],[146,2,142,23],[146,6,142,23,"_c"],[146,8,142,23],[147,2,142,23,"$RefreshReg$"],[147,14,142,23],[147,15,142,23,"_c"],[147,17,142,23],[148,0,142,23],[148,3]],"functionMap":{"names":["<global>","AuthProvider","processSessionId","checkSession","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;OCqC;2BCI;GDkB;uBEE;GFmB;iBGE;GHa;wBIE;GJW;sBKE;GLY;CDiB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}