{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[3], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const processSessionId = async sessionId => {\n      try {\n        const response = await axios.default.get(`${API_URL}/auth/session-data`, {\n          headers: {\n            'X-Session-ID': sessionId\n          }\n        });\n        const {\n          session_token\n        } = response.data;\n        await _utilsStorage.storage.setItemAsync('session_token', session_token);\n\n        // Get user data\n        await checkSession();\n      } catch (error) {\n        console.error('Error processing session:', error);\n      }\n    };\n    const checkSession = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) {\n          setLoading(false);\n          return;\n        }\n        const response = await axios.default.get(`${API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error checking session:', error);\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          await axios.default.post(`${API_URL}/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        }\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n        setUser(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    const updateProfile = async profile => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        await axios.default.put(`${API_URL}/users/profile`, profile, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshUser();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        throw error;\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          const response = await axios.default.get(`${API_URL}/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Error refreshing user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        processSessionId,\n        checkSession,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"o1Ynvy3ICMxXWoN/XOPaU379K10=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":144,"map":[[15,2,38,0,"exports"],[15,9,38,0],[15,10,38,0,"AuthProvider"],[15,22,38,0],[15,25,38,0,"AuthProvider"],[15,37,38,0],[16,2,138,0,"exports"],[16,9,138,0],[16,10,138,0,"useAuth"],[16,17,138,0],[16,20,138,0,"useAuth"],[16,27,138,0],[17,2,144,1],[17,6,144,1,"_expoVirtualEnv"],[17,21,144,1],[17,24,144,1,"require"],[17,31,144,1],[17,32,144,1,"_dependencyMap"],[17,46,144,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_axios"],[19,12,2,0],[19,15,2,0,"require"],[19,22,2,0],[19,23,2,0,"_dependencyMap"],[19,37,2,0],[20,2,2,0],[20,6,2,0,"axios"],[20,11,2,0],[20,14,2,0,"_interopDefault"],[20,29,2,0],[20,30,2,0,"_axios"],[20,36,2,0],[21,2,3,0],[21,6,3,0,"_utilsStorage"],[21,19,3,0],[21,22,3,0,"require"],[21,29,3,0],[21,30,3,0,"_dependencyMap"],[21,44,3,0],[22,2,3,43],[22,6,3,43,"_reactJsxDevRuntime"],[22,25,3,43],[22,28,3,43,"require"],[22,35,3,43],[22,36,3,43,"_dependencyMap"],[22,50,3,43],[23,2,5,0],[23,8,5,6,"API_URL"],[23,15,5,13],[23,18,5,16,"_expoVirtualEnv"],[23,33,5,16],[23,34,5,16,"env"],[23,37,5,16],[23,38,5,16,"EXPO_PUBLIC_BACKEND_URL"],[23,61,5,16],[23,64,5,54],[23,70,5,60],[24,2,36,0],[24,8,36,6,"AuthContext"],[24,19,36,17],[24,35,36,20],[24,39,36,20,"createContext"],[24,45,36,33],[24,46,36,33,"createContext"],[24,59,36,33],[24,61,36,63,"undefined"],[24,70,36,72],[24,71,36,73],[25,2,38,7],[25,11,38,16,"AuthProvider"],[25,23,38,28,"AuthProvider"],[25,24,38,29],[26,4,38,31,"children"],[27,2,38,71],[27,3,38,72],[27,5,38,74],[28,4,38,74,"_s"],[28,6,38,74],[29,4,39,2],[29,10,39,8],[29,11,39,9,"user"],[29,15,39,13],[29,17,39,15,"setUser"],[29,24,39,22],[29,25,39,23],[29,28,39,26],[29,32,39,26,"useState"],[29,38,39,34],[29,39,39,34,"useState"],[29,47,39,34],[29,49,39,48],[29,53,39,52],[29,54,39,53],[30,4,40,2],[30,10,40,8],[30,11,40,9,"loading"],[30,18,40,16],[30,20,40,18,"setLoading"],[30,30,40,28],[30,31,40,29],[30,34,40,32],[30,38,40,32,"useState"],[30,44,40,40],[30,45,40,40,"useState"],[30,53,40,40],[30,55,40,41],[30,59,40,45],[30,60,40,46],[31,4,42,2],[31,10,42,8,"processSessionId"],[31,26,42,24],[31,29,42,27],[31,35,42,34,"sessionId"],[31,44,42,51],[31,48,42,56],[32,6,43,4],[32,10,43,8],[33,8,44,6],[33,14,44,12,"response"],[33,22,44,20],[33,25,44,23],[33,31,44,29,"axios"],[33,36,44,34],[33,37,44,34,"default"],[33,44,44,34],[33,45,44,35,"get"],[33,48,44,38],[33,49,44,39],[33,52,44,42,"API_URL"],[33,59,44,49],[33,79,44,69],[33,81,44,71],[34,10,45,8,"headers"],[34,17,45,15],[34,19,45,17],[35,12,45,19],[35,26,45,33],[35,28,45,35,"sessionId"],[36,10,45,45],[37,8,46,6],[37,9,46,7],[37,10,46,8],[38,8,48,6],[38,14,48,12],[39,10,48,14,"session_token"],[40,8,48,28],[40,9,48,29],[40,12,48,32,"response"],[40,20,48,40],[40,21,48,41,"data"],[40,25,48,45],[41,8,49,6],[41,14,49,12,"storage"],[41,27,49,19],[41,28,49,19,"storage"],[41,35,49,19],[41,36,49,20,"setItemAsync"],[41,48,49,32],[41,49,49,33],[41,64,49,48],[41,66,49,50,"session_token"],[41,79,49,63],[41,80,49,64],[43,8,51,6],[44,8,52,6],[44,14,52,12,"checkSession"],[44,26,52,24],[44,27,52,25],[44,28,52,26],[45,6,53,4],[45,7,53,5],[45,8,53,6],[45,15,53,13,"error"],[45,20,53,18],[45,22,53,20],[46,8,54,6,"console"],[46,15,54,13],[46,16,54,14,"error"],[46,21,54,19],[46,22,54,20],[46,49,54,47],[46,51,54,49,"error"],[46,56,54,54],[46,57,54,55],[47,6,55,4],[48,4,56,2],[48,5,56,3],[49,4,58,2],[49,10,58,8,"checkSession"],[49,22,58,20],[49,25,58,23],[49,31,58,23,"checkSession"],[49,32,58,23],[49,37,58,35],[50,6,59,4],[50,10,59,8],[51,8,60,6],[51,14,60,12,"token"],[51,19,60,17],[51,22,60,20],[51,28,60,26,"storage"],[51,41,60,33],[51,42,60,33,"storage"],[51,49,60,33],[51,50,60,34,"getItemAsync"],[51,62,60,46],[51,63,60,47],[51,78,60,62],[51,79,60,63],[52,8,61,6],[52,12,61,10],[52,13,61,11,"token"],[52,18,61,16],[52,20,61,18],[53,10,62,8,"setLoading"],[53,20,62,18],[53,21,62,19],[53,26,62,24],[53,27,62,25],[54,10,63,8],[55,8,64,6],[56,8,66,6],[56,14,66,12,"response"],[56,22,66,20],[56,25,66,23],[56,31,66,29,"axios"],[56,36,66,34],[56,37,66,34,"default"],[56,44,66,34],[56,45,66,35,"get"],[56,48,66,38],[56,49,66,39],[56,52,66,42,"API_URL"],[56,59,66,49],[56,69,66,59],[56,71,66,61],[57,10,67,8,"headers"],[57,17,67,15],[57,19,67,17],[58,12,67,19,"Authorization"],[58,25,67,32],[58,27,67,34],[58,37,67,44,"token"],[58,42,67,49],[59,10,67,52],[60,8,68,6],[60,9,68,7],[60,10,68,8],[61,8,70,6,"setUser"],[61,15,70,13],[61,16,70,14,"response"],[61,24,70,22],[61,25,70,23,"data"],[61,29,70,27],[61,30,70,28],[62,6,71,4],[62,7,71,5],[62,8,71,6],[62,15,71,13,"error"],[62,20,71,18],[62,22,71,20],[63,8,72,6,"console"],[63,15,72,13],[63,16,72,14,"error"],[63,21,72,19],[63,22,72,20],[63,47,72,45],[63,49,72,47,"error"],[63,54,72,52],[63,55,72,53],[64,8,73,6],[64,14,73,12,"storage"],[64,27,73,19],[64,28,73,19,"storage"],[64,35,73,19],[64,36,73,20,"deleteItemAsync"],[64,51,73,35],[64,52,73,36],[64,67,73,51],[64,68,73,52],[65,6,74,4],[65,7,74,5],[65,16,74,14],[66,8,75,6,"setLoading"],[66,18,75,16],[66,19,75,17],[66,24,75,22],[66,25,75,23],[67,6,76,4],[68,4,77,2],[68,5,77,3],[69,4,79,2],[69,10,79,8,"logout"],[69,16,79,14],[69,19,79,17],[69,25,79,17,"logout"],[69,26,79,17],[69,31,79,29],[70,6,80,4],[70,10,80,8],[71,8,81,6],[71,14,81,12,"token"],[71,19,81,17],[71,22,81,20],[71,28,81,26,"storage"],[71,41,81,33],[71,42,81,33,"storage"],[71,49,81,33],[71,50,81,34,"getItemAsync"],[71,62,81,46],[71,63,81,47],[71,78,81,62],[71,79,81,63],[72,8,82,6],[72,12,82,10,"token"],[72,17,82,15],[72,19,82,17],[73,10,83,8],[73,16,83,14,"axios"],[73,21,83,19],[73,22,83,19,"default"],[73,29,83,19],[73,30,83,20,"post"],[73,34,83,24],[73,35,83,25],[73,38,83,28,"API_URL"],[73,45,83,35],[73,59,83,49],[73,61,83,51],[73,62,83,52],[73,63,83,53],[73,65,83,55],[74,12,84,10,"headers"],[74,19,84,17],[74,21,84,19],[75,14,84,21,"Authorization"],[75,27,84,34],[75,29,84,36],[75,39,84,46,"token"],[75,44,84,51],[76,12,84,54],[77,10,85,8],[77,11,85,9],[77,12,85,10],[78,8,86,6],[79,8,87,6],[79,14,87,12,"storage"],[79,27,87,19],[79,28,87,19,"storage"],[79,35,87,19],[79,36,87,20,"deleteItemAsync"],[79,51,87,35],[79,52,87,36],[79,67,87,51],[79,68,87,52],[80,8,88,6,"setUser"],[80,15,88,13],[80,16,88,14],[80,20,88,18],[80,21,88,19],[81,6,89,4],[81,7,89,5],[81,8,89,6],[81,15,89,13,"error"],[81,20,89,18],[81,22,89,20],[82,8,90,6,"console"],[82,15,90,13],[82,16,90,14,"error"],[82,21,90,19],[82,22,90,20],[82,42,90,40],[82,44,90,42,"error"],[82,49,90,47],[82,50,90,48],[83,6,91,4],[84,4,92,2],[84,5,92,3],[85,4,94,2],[85,10,94,8,"updateProfile"],[85,23,94,21],[85,26,94,24],[85,32,94,31,"profile"],[85,39,94,43],[85,43,94,48],[86,6,95,4],[86,10,95,8],[87,8,96,6],[87,14,96,12,"token"],[87,19,96,17],[87,22,96,20],[87,28,96,26,"storage"],[87,41,96,33],[87,42,96,33,"storage"],[87,49,96,33],[87,50,96,34,"getItemAsync"],[87,62,96,46],[87,63,96,47],[87,78,96,62],[87,79,96,63],[88,8,97,6],[88,14,97,12,"axios"],[88,19,97,17],[88,20,97,17,"default"],[88,27,97,17],[88,28,97,18,"put"],[88,31,97,21],[88,32,97,22],[88,35,97,25,"API_URL"],[88,42,97,32],[88,58,97,48],[88,60,97,50,"profile"],[88,67,97,57],[88,69,97,59],[89,10,98,8,"headers"],[89,17,98,15],[89,19,98,17],[90,12,98,19,"Authorization"],[90,25,98,32],[90,27,98,34],[90,37,98,44,"token"],[90,42,98,49],[91,10,98,52],[92,8,99,6],[92,9,99,7],[92,10,99,8],[93,8,100,6],[93,14,100,12,"refreshUser"],[93,25,100,23],[93,26,100,24],[93,27,100,25],[94,6,101,4],[94,7,101,5],[94,8,101,6],[94,15,101,13,"error"],[94,20,101,18],[94,22,101,20],[95,8,102,6,"console"],[95,15,102,13],[95,16,102,14,"error"],[95,21,102,19],[95,22,102,20],[95,47,102,45],[95,49,102,47,"error"],[95,54,102,52],[95,55,102,53],[96,8,103,6],[96,14,103,12,"error"],[96,19,103,17],[97,6,104,4],[98,4,105,2],[98,5,105,3],[99,4,107,2],[99,10,107,8,"refreshUser"],[99,21,107,19],[99,24,107,22],[99,30,107,22,"refreshUser"],[99,31,107,22],[99,36,107,34],[100,6,108,4],[100,10,108,8],[101,8,109,6],[101,14,109,12,"token"],[101,19,109,17],[101,22,109,20],[101,28,109,26,"storage"],[101,41,109,33],[101,42,109,33,"storage"],[101,49,109,33],[101,50,109,34,"getItemAsync"],[101,62,109,46],[101,63,109,47],[101,78,109,62],[101,79,109,63],[102,8,110,6],[102,12,110,10,"token"],[102,17,110,15],[102,19,110,17],[103,10,111,8],[103,16,111,14,"response"],[103,24,111,22],[103,27,111,25],[103,33,111,31,"axios"],[103,38,111,36],[103,39,111,36,"default"],[103,46,111,36],[103,47,111,37,"get"],[103,50,111,40],[103,51,111,41],[103,54,111,44,"API_URL"],[103,61,111,51],[103,71,111,61],[103,73,111,63],[104,12,112,10,"headers"],[104,19,112,17],[104,21,112,19],[105,14,112,21,"Authorization"],[105,27,112,34],[105,29,112,36],[105,39,112,46,"token"],[105,44,112,51],[106,12,112,54],[107,10,113,8],[107,11,113,9],[107,12,113,10],[108,10,114,8,"setUser"],[108,17,114,15],[108,18,114,16,"response"],[108,26,114,24],[108,27,114,25,"data"],[108,31,114,29],[108,32,114,30],[109,8,115,6],[110,6,116,4],[110,7,116,5],[110,8,116,6],[110,15,116,13,"error"],[110,20,116,18],[110,22,116,20],[111,8,117,6,"console"],[111,15,117,13],[111,16,117,14,"error"],[111,21,117,19],[111,22,117,20],[111,46,117,44],[111,48,117,46,"error"],[111,53,117,51],[111,54,117,52],[112,6,118,4],[113,4,119,2],[113,5,119,3],[114,4,121,2],[114,24,122,4],[114,28,122,4,"_reactJsxDevRuntime"],[114,47,122,4],[114,48,122,4,"jsxDEV"],[114,54,122,4],[114,56,122,5,"AuthContext"],[114,67,122,16],[114,68,122,17,"Provider"],[114,76,122,25],[115,6,123,6,"value"],[115,11,123,11],[115,13,123,13],[116,8,124,8,"user"],[116,12,124,12],[117,8,125,8,"loading"],[117,15,125,15],[118,8,126,8,"processSessionId"],[118,24,126,24],[119,8,127,8,"checkSession"],[119,20,127,20],[120,8,128,8,"logout"],[120,14,128,14],[121,8,129,8,"updateProfile"],[121,21,129,21],[122,8,130,8,"refreshUser"],[123,6,131,6],[123,7,131,8],[124,6,131,8,"children"],[124,14,131,8],[124,16,133,7,"children"],[125,4,133,15],[126,6,133,15,"fileName"],[126,14,133,15],[126,16,133,15,"_jsxFileName"],[126,28,133,15],[127,6,133,15,"lineNumber"],[127,16,133,15],[128,6,133,15,"columnNumber"],[128,18,133,15],[129,4,133,15],[129,11,134,26],[129,12,134,27],[130,2,136,0],[131,2,136,1,"_s"],[131,4,136,1],[131,5,38,16,"AuthProvider"],[131,17,38,28],[132,2,38,28,"_c"],[132,4,38,28],[132,7,38,16,"AuthProvider"],[132,19,38,28],[133,2,138,7],[133,11,138,16,"useAuth"],[133,18,138,23,"useAuth"],[133,19,138,23],[133,21,138,26],[134,4,138,26,"_s2"],[134,7,138,26],[135,4,139,2],[135,10,139,8,"context"],[135,17,139,15],[135,20,139,18],[135,24,139,18,"useContext"],[135,30,139,28],[135,31,139,28,"useContext"],[135,41,139,28],[135,43,139,29,"AuthContext"],[135,54,139,40],[135,55,139,41],[136,4,140,2],[136,8,140,6,"context"],[136,15,140,13],[136,20,140,18,"undefined"],[136,29,140,27],[136,31,140,29],[137,6,141,4],[137,12,141,10],[137,16,141,14,"Error"],[137,21,141,19],[137,22,141,20],[137,67,141,65],[137,68,141,66],[138,4,142,2],[139,4,143,2],[139,11,143,9,"context"],[139,18,143,16],[140,2,144,0],[141,2,144,1,"_s2"],[141,5,144,1],[141,6,138,16,"useAuth"],[141,13,138,23],[142,2,138,23],[142,6,138,23,"_c"],[142,8,138,23],[143,2,138,23,"$RefreshReg$"],[143,14,138,23],[143,15,138,23,"_c"],[143,17,138,23],[144,0,138,23],[144,3]],"functionMap":{"names":["<global>","AuthProvider","processSessionId","checkSession","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;OCqC;2BCI;GDc;uBEE;GFmB;iBGE;GHa;wBIE;GJW;sBKE;GLY;CDiB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}