{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"expo-secure-store","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":49,"index":148}}],"key":"BU2XtfznZ4PiVldqd/oueHCCaLo=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _expoSecureStore = require(_dependencyMap[3], \"expo-secure-store\");\n  var SecureStore = _interopNamespace(_expoSecureStore);\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n    const processSessionId = async sessionId => {\n      try {\n        const response = await axios.default.get(`${API_URL}/auth/session-data`, {\n          headers: {\n            'X-Session-ID': sessionId\n          }\n        });\n        const {\n          session_token\n        } = response.data;\n        await SecureStore.setItemAsync('session_token', session_token);\n\n        // Get user data\n        await checkSession();\n      } catch (error) {\n        console.error('Error processing session:', error);\n      }\n    };\n    const checkSession = async () => {\n      try {\n        const token = await SecureStore.getItemAsync('session_token');\n        if (!token) {\n          setLoading(false);\n          return;\n        }\n        const response = await axios.default.get(`${API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error checking session:', error);\n        await SecureStore.deleteItemAsync('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        const token = await SecureStore.getItemAsync('session_token');\n        if (token) {\n          await axios.default.post(`${API_URL}/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        }\n        await SecureStore.deleteItemAsync('session_token');\n        setUser(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    const updateProfile = async profile => {\n      try {\n        const token = await SecureStore.getItemAsync('session_token');\n        await axios.default.put(`${API_URL}/users/profile`, profile, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshUser();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        throw error;\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const token = await SecureStore.getItemAsync('session_token');\n        if (token) {\n          const response = await axios.default.get(`${API_URL}/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Error refreshing user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        processSessionId,\n        checkSession,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"o1Ynvy3ICMxXWoN/XOPaU379K10=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":160,"map":[[30,2,38,0,"exports"],[30,9,38,0],[30,10,38,0,"AuthProvider"],[30,22,38,0],[30,25,38,0,"AuthProvider"],[30,37,38,0],[31,2,138,0,"exports"],[31,9,138,0],[31,10,138,0,"useAuth"],[31,17,138,0],[31,20,138,0,"useAuth"],[31,27,138,0],[32,2,144,1],[32,6,144,1,"_expoVirtualEnv"],[32,21,144,1],[32,24,144,1,"require"],[32,31,144,1],[32,32,144,1,"_dependencyMap"],[32,46,144,1],[33,2,1,0],[33,6,1,0,"_react"],[33,12,1,0],[33,15,1,0,"require"],[33,22,1,0],[33,23,1,0,"_dependencyMap"],[33,37,1,0],[34,2,2,0],[34,6,2,0,"_axios"],[34,12,2,0],[34,15,2,0,"require"],[34,22,2,0],[34,23,2,0,"_dependencyMap"],[34,37,2,0],[35,2,2,0],[35,6,2,0,"axios"],[35,11,2,0],[35,14,2,0,"_interopDefault"],[35,29,2,0],[35,30,2,0,"_axios"],[35,36,2,0],[36,2,3,0],[36,6,3,0,"_expoSecureStore"],[36,22,3,0],[36,25,3,0,"require"],[36,32,3,0],[36,33,3,0,"_dependencyMap"],[36,47,3,0],[37,2,3,0],[37,6,3,0,"SecureStore"],[37,17,3,0],[37,20,3,0,"_interopNamespace"],[37,37,3,0],[37,38,3,0,"_expoSecureStore"],[37,54,3,0],[38,2,3,49],[38,6,3,49,"_reactJsxDevRuntime"],[38,25,3,49],[38,28,3,49,"require"],[38,35,3,49],[38,36,3,49,"_dependencyMap"],[38,50,3,49],[39,2,5,0],[39,8,5,6,"API_URL"],[39,15,5,13],[39,18,5,16,"_expoVirtualEnv"],[39,33,5,16],[39,34,5,16,"env"],[39,37,5,16],[39,38,5,16,"EXPO_PUBLIC_BACKEND_URL"],[39,61,5,16],[39,64,5,54],[39,70,5,60],[40,2,36,0],[40,8,36,6,"AuthContext"],[40,19,36,17],[40,35,36,20],[40,39,36,20,"createContext"],[40,45,36,33],[40,46,36,33,"createContext"],[40,59,36,33],[40,61,36,63,"undefined"],[40,70,36,72],[40,71,36,73],[41,2,38,7],[41,11,38,16,"AuthProvider"],[41,23,38,28,"AuthProvider"],[41,24,38,29],[42,4,38,31,"children"],[43,2,38,71],[43,3,38,72],[43,5,38,74],[44,4,38,74,"_s"],[44,6,38,74],[45,4,39,2],[45,10,39,8],[45,11,39,9,"user"],[45,15,39,13],[45,17,39,15,"setUser"],[45,24,39,22],[45,25,39,23],[45,28,39,26],[45,32,39,26,"useState"],[45,38,39,34],[45,39,39,34,"useState"],[45,47,39,34],[45,49,39,48],[45,53,39,52],[45,54,39,53],[46,4,40,2],[46,10,40,8],[46,11,40,9,"loading"],[46,18,40,16],[46,20,40,18,"setLoading"],[46,30,40,28],[46,31,40,29],[46,34,40,32],[46,38,40,32,"useState"],[46,44,40,40],[46,45,40,40,"useState"],[46,53,40,40],[46,55,40,41],[46,59,40,45],[46,60,40,46],[47,4,42,2],[47,10,42,8,"processSessionId"],[47,26,42,24],[47,29,42,27],[47,35,42,34,"sessionId"],[47,44,42,51],[47,48,42,56],[48,6,43,4],[48,10,43,8],[49,8,44,6],[49,14,44,12,"response"],[49,22,44,20],[49,25,44,23],[49,31,44,29,"axios"],[49,36,44,34],[49,37,44,34,"default"],[49,44,44,34],[49,45,44,35,"get"],[49,48,44,38],[49,49,44,39],[49,52,44,42,"API_URL"],[49,59,44,49],[49,79,44,69],[49,81,44,71],[50,10,45,8,"headers"],[50,17,45,15],[50,19,45,17],[51,12,45,19],[51,26,45,33],[51,28,45,35,"sessionId"],[52,10,45,45],[53,8,46,6],[53,9,46,7],[53,10,46,8],[54,8,48,6],[54,14,48,12],[55,10,48,14,"session_token"],[56,8,48,28],[56,9,48,29],[56,12,48,32,"response"],[56,20,48,40],[56,21,48,41,"data"],[56,25,48,45],[57,8,49,6],[57,14,49,12,"SecureStore"],[57,25,49,23],[57,26,49,24,"setItemAsync"],[57,38,49,36],[57,39,49,37],[57,54,49,52],[57,56,49,54,"session_token"],[57,69,49,67],[57,70,49,68],[59,8,51,6],[60,8,52,6],[60,14,52,12,"checkSession"],[60,26,52,24],[60,27,52,25],[60,28,52,26],[61,6,53,4],[61,7,53,5],[61,8,53,6],[61,15,53,13,"error"],[61,20,53,18],[61,22,53,20],[62,8,54,6,"console"],[62,15,54,13],[62,16,54,14,"error"],[62,21,54,19],[62,22,54,20],[62,49,54,47],[62,51,54,49,"error"],[62,56,54,54],[62,57,54,55],[63,6,55,4],[64,4,56,2],[64,5,56,3],[65,4,58,2],[65,10,58,8,"checkSession"],[65,22,58,20],[65,25,58,23],[65,31,58,23,"checkSession"],[65,32,58,23],[65,37,58,35],[66,6,59,4],[66,10,59,8],[67,8,60,6],[67,14,60,12,"token"],[67,19,60,17],[67,22,60,20],[67,28,60,26,"SecureStore"],[67,39,60,37],[67,40,60,38,"getItemAsync"],[67,52,60,50],[67,53,60,51],[67,68,60,66],[67,69,60,67],[68,8,61,6],[68,12,61,10],[68,13,61,11,"token"],[68,18,61,16],[68,20,61,18],[69,10,62,8,"setLoading"],[69,20,62,18],[69,21,62,19],[69,26,62,24],[69,27,62,25],[70,10,63,8],[71,8,64,6],[72,8,66,6],[72,14,66,12,"response"],[72,22,66,20],[72,25,66,23],[72,31,66,29,"axios"],[72,36,66,34],[72,37,66,34,"default"],[72,44,66,34],[72,45,66,35,"get"],[72,48,66,38],[72,49,66,39],[72,52,66,42,"API_URL"],[72,59,66,49],[72,69,66,59],[72,71,66,61],[73,10,67,8,"headers"],[73,17,67,15],[73,19,67,17],[74,12,67,19,"Authorization"],[74,25,67,32],[74,27,67,34],[74,37,67,44,"token"],[74,42,67,49],[75,10,67,52],[76,8,68,6],[76,9,68,7],[76,10,68,8],[77,8,70,6,"setUser"],[77,15,70,13],[77,16,70,14,"response"],[77,24,70,22],[77,25,70,23,"data"],[77,29,70,27],[77,30,70,28],[78,6,71,4],[78,7,71,5],[78,8,71,6],[78,15,71,13,"error"],[78,20,71,18],[78,22,71,20],[79,8,72,6,"console"],[79,15,72,13],[79,16,72,14,"error"],[79,21,72,19],[79,22,72,20],[79,47,72,45],[79,49,72,47,"error"],[79,54,72,52],[79,55,72,53],[80,8,73,6],[80,14,73,12,"SecureStore"],[80,25,73,23],[80,26,73,24,"deleteItemAsync"],[80,41,73,39],[80,42,73,40],[80,57,73,55],[80,58,73,56],[81,6,74,4],[81,7,74,5],[81,16,74,14],[82,8,75,6,"setLoading"],[82,18,75,16],[82,19,75,17],[82,24,75,22],[82,25,75,23],[83,6,76,4],[84,4,77,2],[84,5,77,3],[85,4,79,2],[85,10,79,8,"logout"],[85,16,79,14],[85,19,79,17],[85,25,79,17,"logout"],[85,26,79,17],[85,31,79,29],[86,6,80,4],[86,10,80,8],[87,8,81,6],[87,14,81,12,"token"],[87,19,81,17],[87,22,81,20],[87,28,81,26,"SecureStore"],[87,39,81,37],[87,40,81,38,"getItemAsync"],[87,52,81,50],[87,53,81,51],[87,68,81,66],[87,69,81,67],[88,8,82,6],[88,12,82,10,"token"],[88,17,82,15],[88,19,82,17],[89,10,83,8],[89,16,83,14,"axios"],[89,21,83,19],[89,22,83,19,"default"],[89,29,83,19],[89,30,83,20,"post"],[89,34,83,24],[89,35,83,25],[89,38,83,28,"API_URL"],[89,45,83,35],[89,59,83,49],[89,61,83,51],[89,62,83,52],[89,63,83,53],[89,65,83,55],[90,12,84,10,"headers"],[90,19,84,17],[90,21,84,19],[91,14,84,21,"Authorization"],[91,27,84,34],[91,29,84,36],[91,39,84,46,"token"],[91,44,84,51],[92,12,84,54],[93,10,85,8],[93,11,85,9],[93,12,85,10],[94,8,86,6],[95,8,87,6],[95,14,87,12,"SecureStore"],[95,25,87,23],[95,26,87,24,"deleteItemAsync"],[95,41,87,39],[95,42,87,40],[95,57,87,55],[95,58,87,56],[96,8,88,6,"setUser"],[96,15,88,13],[96,16,88,14],[96,20,88,18],[96,21,88,19],[97,6,89,4],[97,7,89,5],[97,8,89,6],[97,15,89,13,"error"],[97,20,89,18],[97,22,89,20],[98,8,90,6,"console"],[98,15,90,13],[98,16,90,14,"error"],[98,21,90,19],[98,22,90,20],[98,42,90,40],[98,44,90,42,"error"],[98,49,90,47],[98,50,90,48],[99,6,91,4],[100,4,92,2],[100,5,92,3],[101,4,94,2],[101,10,94,8,"updateProfile"],[101,23,94,21],[101,26,94,24],[101,32,94,31,"profile"],[101,39,94,43],[101,43,94,48],[102,6,95,4],[102,10,95,8],[103,8,96,6],[103,14,96,12,"token"],[103,19,96,17],[103,22,96,20],[103,28,96,26,"SecureStore"],[103,39,96,37],[103,40,96,38,"getItemAsync"],[103,52,96,50],[103,53,96,51],[103,68,96,66],[103,69,96,67],[104,8,97,6],[104,14,97,12,"axios"],[104,19,97,17],[104,20,97,17,"default"],[104,27,97,17],[104,28,97,18,"put"],[104,31,97,21],[104,32,97,22],[104,35,97,25,"API_URL"],[104,42,97,32],[104,58,97,48],[104,60,97,50,"profile"],[104,67,97,57],[104,69,97,59],[105,10,98,8,"headers"],[105,17,98,15],[105,19,98,17],[106,12,98,19,"Authorization"],[106,25,98,32],[106,27,98,34],[106,37,98,44,"token"],[106,42,98,49],[107,10,98,52],[108,8,99,6],[108,9,99,7],[108,10,99,8],[109,8,100,6],[109,14,100,12,"refreshUser"],[109,25,100,23],[109,26,100,24],[109,27,100,25],[110,6,101,4],[110,7,101,5],[110,8,101,6],[110,15,101,13,"error"],[110,20,101,18],[110,22,101,20],[111,8,102,6,"console"],[111,15,102,13],[111,16,102,14,"error"],[111,21,102,19],[111,22,102,20],[111,47,102,45],[111,49,102,47,"error"],[111,54,102,52],[111,55,102,53],[112,8,103,6],[112,14,103,12,"error"],[112,19,103,17],[113,6,104,4],[114,4,105,2],[114,5,105,3],[115,4,107,2],[115,10,107,8,"refreshUser"],[115,21,107,19],[115,24,107,22],[115,30,107,22,"refreshUser"],[115,31,107,22],[115,36,107,34],[116,6,108,4],[116,10,108,8],[117,8,109,6],[117,14,109,12,"token"],[117,19,109,17],[117,22,109,20],[117,28,109,26,"SecureStore"],[117,39,109,37],[117,40,109,38,"getItemAsync"],[117,52,109,50],[117,53,109,51],[117,68,109,66],[117,69,109,67],[118,8,110,6],[118,12,110,10,"token"],[118,17,110,15],[118,19,110,17],[119,10,111,8],[119,16,111,14,"response"],[119,24,111,22],[119,27,111,25],[119,33,111,31,"axios"],[119,38,111,36],[119,39,111,36,"default"],[119,46,111,36],[119,47,111,37,"get"],[119,50,111,40],[119,51,111,41],[119,54,111,44,"API_URL"],[119,61,111,51],[119,71,111,61],[119,73,111,63],[120,12,112,10,"headers"],[120,19,112,17],[120,21,112,19],[121,14,112,21,"Authorization"],[121,27,112,34],[121,29,112,36],[121,39,112,46,"token"],[121,44,112,51],[122,12,112,54],[123,10,113,8],[123,11,113,9],[123,12,113,10],[124,10,114,8,"setUser"],[124,17,114,15],[124,18,114,16,"response"],[124,26,114,24],[124,27,114,25,"data"],[124,31,114,29],[124,32,114,30],[125,8,115,6],[126,6,116,4],[126,7,116,5],[126,8,116,6],[126,15,116,13,"error"],[126,20,116,18],[126,22,116,20],[127,8,117,6,"console"],[127,15,117,13],[127,16,117,14,"error"],[127,21,117,19],[127,22,117,20],[127,46,117,44],[127,48,117,46,"error"],[127,53,117,51],[127,54,117,52],[128,6,118,4],[129,4,119,2],[129,5,119,3],[130,4,121,2],[130,24,122,4],[130,28,122,4,"_reactJsxDevRuntime"],[130,47,122,4],[130,48,122,4,"jsxDEV"],[130,54,122,4],[130,56,122,5,"AuthContext"],[130,67,122,16],[130,68,122,17,"Provider"],[130,76,122,25],[131,6,123,6,"value"],[131,11,123,11],[131,13,123,13],[132,8,124,8,"user"],[132,12,124,12],[133,8,125,8,"loading"],[133,15,125,15],[134,8,126,8,"processSessionId"],[134,24,126,24],[135,8,127,8,"checkSession"],[135,20,127,20],[136,8,128,8,"logout"],[136,14,128,14],[137,8,129,8,"updateProfile"],[137,21,129,21],[138,8,130,8,"refreshUser"],[139,6,131,6],[139,7,131,8],[140,6,131,8,"children"],[140,14,131,8],[140,16,133,7,"children"],[141,4,133,15],[142,6,133,15,"fileName"],[142,14,133,15],[142,16,133,15,"_jsxFileName"],[142,28,133,15],[143,6,133,15,"lineNumber"],[143,16,133,15],[144,6,133,15,"columnNumber"],[144,18,133,15],[145,4,133,15],[145,11,134,26],[145,12,134,27],[146,2,136,0],[147,2,136,1,"_s"],[147,4,136,1],[147,5,38,16,"AuthProvider"],[147,17,38,28],[148,2,38,28,"_c"],[148,4,38,28],[148,7,38,16,"AuthProvider"],[148,19,38,28],[149,2,138,7],[149,11,138,16,"useAuth"],[149,18,138,23,"useAuth"],[149,19,138,23],[149,21,138,26],[150,4,138,26,"_s2"],[150,7,138,26],[151,4,139,2],[151,10,139,8,"context"],[151,17,139,15],[151,20,139,18],[151,24,139,18,"useContext"],[151,30,139,28],[151,31,139,28,"useContext"],[151,41,139,28],[151,43,139,29,"AuthContext"],[151,54,139,40],[151,55,139,41],[152,4,140,2],[152,8,140,6,"context"],[152,15,140,13],[152,20,140,18,"undefined"],[152,29,140,27],[152,31,140,29],[153,6,141,4],[153,12,141,10],[153,16,141,14,"Error"],[153,21,141,19],[153,22,141,20],[153,67,141,65],[153,68,141,66],[154,4,142,2],[155,4,143,2],[155,11,143,9,"context"],[155,18,143,16],[156,2,144,0],[157,2,144,1,"_s2"],[157,5,144,1],[157,6,138,16,"useAuth"],[157,13,138,23],[158,2,138,23],[158,6,138,23,"_c"],[158,8,138,23],[159,2,138,23,"$RefreshReg$"],[159,14,138,23],[159,15,138,23,"_c"],[159,17,138,23],[160,0,138,23],[160,3]],"functionMap":{"names":["<global>","AuthProvider","processSessionId","checkSession","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;OCqC;2BCI;GDc;uBEE;GFmB;iBGE;GHa;wBIE;GJW;sBKE;GLY;CDiB;OOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}