{"dependencies":[{"name":"expo/virtual/env","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dgHc21cgR+buKc7O3/dChhD5JJk=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"axios","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":72},"end":{"line":2,"column":26,"index":98}}],"key":"e45rENb5cSu0Yeh6oC1uWb7lEp4=","exportNames":["*"],"imports":1}},{"name":"../utils/storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":99},"end":{"line":3,"column":43,"index":142}}],"key":"rswhtWQFlk40P6/ZSXiz3NZSC0I=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/src/context/AuthContext.tsx\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  exports.AuthProvider = AuthProvider;\n  exports.useAuth = useAuth;\n  var _expoVirtualEnv = require(_dependencyMap[0], \"expo/virtual/env\");\n  var _react = require(_dependencyMap[1], \"react\");\n  var _axios = require(_dependencyMap[2], \"axios\");\n  var axios = _interopDefault(_axios);\n  var _utilsStorage = require(_dependencyMap[3], \"../utils/storage\");\n  var _reactJsxDevRuntime = require(_dependencyMap[4], \"react/jsx-dev-runtime\");\n  const API_URL = _expoVirtualEnv.env.EXPO_PUBLIC_BACKEND_URL + '/api';\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  function AuthProvider({\n    children\n  }) {\n    _s();\n    const [user, setUser] = (0, _react.useState)(null);\n    const [loading, setLoading] = (0, _react.useState)(true);\n\n    // Check session on mount\n    (0, _react.useEffect)(() => {\n      checkSession();\n    }, []);\n    const processSessionId = async sessionId => {\n      try {\n        console.log('[AuthContext] Processing session ID:', sessionId);\n        const response = await axios.default.get(`${API_URL}/auth/session-data`, {\n          headers: {\n            'X-Session-ID': sessionId\n          }\n        });\n        console.log('[AuthContext] Session data received:', response.data);\n        const {\n          session_token\n        } = response.data;\n        await _utilsStorage.storage.setItemAsync('session_token', session_token);\n        console.log('[AuthContext] Session token stored');\n\n        // Get user data\n        await checkSession();\n      } catch (error) {\n        console.error('[AuthContext] Error processing session:', error);\n        throw error;\n      }\n    };\n    const checkSession = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (!token) {\n          setLoading(false);\n          return;\n        }\n        const response = await axios.default.get(`${API_URL}/auth/me`, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        setUser(response.data);\n      } catch (error) {\n        console.error('Error checking session:', error);\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n      } finally {\n        setLoading(false);\n      }\n    };\n    const logout = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          await axios.default.post(`${API_URL}/auth/logout`, {}, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n        }\n        await _utilsStorage.storage.deleteItemAsync('session_token');\n        setUser(null);\n      } catch (error) {\n        console.error('Error logging out:', error);\n      }\n    };\n    const updateProfile = async profile => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        await axios.default.put(`${API_URL}/users/profile`, profile, {\n          headers: {\n            Authorization: `Bearer ${token}`\n          }\n        });\n        await refreshUser();\n      } catch (error) {\n        console.error('Error updating profile:', error);\n        throw error;\n      }\n    };\n    const refreshUser = async () => {\n      try {\n        const token = await _utilsStorage.storage.getItemAsync('session_token');\n        if (token) {\n          const response = await axios.default.get(`${API_URL}/auth/me`, {\n            headers: {\n              Authorization: `Bearer ${token}`\n            }\n          });\n          setUser(response.data);\n        }\n      } catch (error) {\n        console.error('Error refreshing user:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        loading,\n        processSessionId,\n        checkSession,\n        logout,\n        updateProfile,\n        refreshUser\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }, this);\n  }\n  _s(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n  _c = AuthProvider;\n  function useAuth() {\n    _s2();\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  }\n  _s2(useAuth, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n  var _c;\n  $RefreshReg$(_c, \"AuthProvider\");\n});","lineCount":153,"map":[[15,2,38,0,"exports"],[15,9,38,0],[15,10,38,0,"AuthProvider"],[15,22,38,0],[15,25,38,0,"AuthProvider"],[15,37,38,0],[16,2,147,0,"exports"],[16,9,147,0],[16,10,147,0,"useAuth"],[16,17,147,0],[16,20,147,0,"useAuth"],[16,27,147,0],[17,2,153,1],[17,6,153,1,"_expoVirtualEnv"],[17,21,153,1],[17,24,153,1,"require"],[17,31,153,1],[17,32,153,1,"_dependencyMap"],[17,46,153,1],[18,2,1,0],[18,6,1,0,"_react"],[18,12,1,0],[18,15,1,0,"require"],[18,22,1,0],[18,23,1,0,"_dependencyMap"],[18,37,1,0],[19,2,2,0],[19,6,2,0,"_axios"],[19,12,2,0],[19,15,2,0,"require"],[19,22,2,0],[19,23,2,0,"_dependencyMap"],[19,37,2,0],[20,2,2,0],[20,6,2,0,"axios"],[20,11,2,0],[20,14,2,0,"_interopDefault"],[20,29,2,0],[20,30,2,0,"_axios"],[20,36,2,0],[21,2,3,0],[21,6,3,0,"_utilsStorage"],[21,19,3,0],[21,22,3,0,"require"],[21,29,3,0],[21,30,3,0,"_dependencyMap"],[21,44,3,0],[22,2,3,43],[22,6,3,43,"_reactJsxDevRuntime"],[22,25,3,43],[22,28,3,43,"require"],[22,35,3,43],[22,36,3,43,"_dependencyMap"],[22,50,3,43],[23,2,5,0],[23,8,5,6,"API_URL"],[23,15,5,13],[23,18,5,16,"_expoVirtualEnv"],[23,33,5,16],[23,34,5,16,"env"],[23,37,5,16],[23,38,5,16,"EXPO_PUBLIC_BACKEND_URL"],[23,61,5,16],[23,64,5,54],[23,70,5,60],[24,2,36,0],[24,8,36,6,"AuthContext"],[24,19,36,17],[24,35,36,20],[24,39,36,20,"createContext"],[24,45,36,33],[24,46,36,33,"createContext"],[24,59,36,33],[24,61,36,63,"undefined"],[24,70,36,72],[24,71,36,73],[25,2,38,7],[25,11,38,16,"AuthProvider"],[25,23,38,28,"AuthProvider"],[25,24,38,29],[26,4,38,31,"children"],[27,2,38,71],[27,3,38,72],[27,5,38,74],[28,4,38,74,"_s"],[28,6,38,74],[29,4,39,2],[29,10,39,8],[29,11,39,9,"user"],[29,15,39,13],[29,17,39,15,"setUser"],[29,24,39,22],[29,25,39,23],[29,28,39,26],[29,32,39,26,"useState"],[29,38,39,34],[29,39,39,34,"useState"],[29,47,39,34],[29,49,39,48],[29,53,39,52],[29,54,39,53],[30,4,40,2],[30,10,40,8],[30,11,40,9,"loading"],[30,18,40,16],[30,20,40,18,"setLoading"],[30,30,40,28],[30,31,40,29],[30,34,40,32],[30,38,40,32,"useState"],[30,44,40,40],[30,45,40,40,"useState"],[30,53,40,40],[30,55,40,41],[30,59,40,45],[30,60,40,46],[32,4,42,2],[33,4,43,2],[33,8,43,2,"useEffect"],[33,14,43,11],[33,15,43,11,"useEffect"],[33,24,43,11],[33,26,43,12],[33,32,43,18],[34,6,44,4,"checkSession"],[34,18,44,16],[34,19,44,17],[34,20,44,18],[35,4,45,2],[35,5,45,3],[35,7,45,5],[35,9,45,7],[35,10,45,8],[36,4,47,2],[36,10,47,8,"processSessionId"],[36,26,47,24],[36,29,47,27],[36,35,47,34,"sessionId"],[36,44,47,51],[36,48,47,56],[37,6,48,4],[37,10,48,8],[38,8,49,6,"console"],[38,15,49,13],[38,16,49,14,"log"],[38,19,49,17],[38,20,49,18],[38,58,49,56],[38,60,49,58,"sessionId"],[38,69,49,67],[38,70,49,68],[39,8,50,6],[39,14,50,12,"response"],[39,22,50,20],[39,25,50,23],[39,31,50,29,"axios"],[39,36,50,34],[39,37,50,34,"default"],[39,44,50,34],[39,45,50,35,"get"],[39,48,50,38],[39,49,50,39],[39,52,50,42,"API_URL"],[39,59,50,49],[39,79,50,69],[39,81,50,71],[40,10,51,8,"headers"],[40,17,51,15],[40,19,51,17],[41,12,51,19],[41,26,51,33],[41,28,51,35,"sessionId"],[42,10,51,45],[43,8,52,6],[43,9,52,7],[43,10,52,8],[44,8,54,6,"console"],[44,15,54,13],[44,16,54,14,"log"],[44,19,54,17],[44,20,54,18],[44,58,54,56],[44,60,54,58,"response"],[44,68,54,66],[44,69,54,67,"data"],[44,73,54,71],[44,74,54,72],[45,8,55,6],[45,14,55,12],[46,10,55,14,"session_token"],[47,8,55,28],[47,9,55,29],[47,12,55,32,"response"],[47,20,55,40],[47,21,55,41,"data"],[47,25,55,45],[48,8,56,6],[48,14,56,12,"storage"],[48,27,56,19],[48,28,56,19,"storage"],[48,35,56,19],[48,36,56,20,"setItemAsync"],[48,48,56,32],[48,49,56,33],[48,64,56,48],[48,66,56,50,"session_token"],[48,79,56,63],[48,80,56,64],[49,8,57,6,"console"],[49,15,57,13],[49,16,57,14,"log"],[49,19,57,17],[49,20,57,18],[49,56,57,54],[49,57,57,55],[51,8,59,6],[52,8,60,6],[52,14,60,12,"checkSession"],[52,26,60,24],[52,27,60,25],[52,28,60,26],[53,6,61,4],[53,7,61,5],[53,8,61,6],[53,15,61,13,"error"],[53,20,61,18],[53,22,61,20],[54,8,62,6,"console"],[54,15,62,13],[54,16,62,14,"error"],[54,21,62,19],[54,22,62,20],[54,63,62,61],[54,65,62,63,"error"],[54,70,62,68],[54,71,62,69],[55,8,63,6],[55,14,63,12,"error"],[55,19,63,17],[56,6,64,4],[57,4,65,2],[57,5,65,3],[58,4,67,2],[58,10,67,8,"checkSession"],[58,22,67,20],[58,25,67,23],[58,31,67,23,"checkSession"],[58,32,67,23],[58,37,67,35],[59,6,68,4],[59,10,68,8],[60,8,69,6],[60,14,69,12,"token"],[60,19,69,17],[60,22,69,20],[60,28,69,26,"storage"],[60,41,69,33],[60,42,69,33,"storage"],[60,49,69,33],[60,50,69,34,"getItemAsync"],[60,62,69,46],[60,63,69,47],[60,78,69,62],[60,79,69,63],[61,8,70,6],[61,12,70,10],[61,13,70,11,"token"],[61,18,70,16],[61,20,70,18],[62,10,71,8,"setLoading"],[62,20,71,18],[62,21,71,19],[62,26,71,24],[62,27,71,25],[63,10,72,8],[64,8,73,6],[65,8,75,6],[65,14,75,12,"response"],[65,22,75,20],[65,25,75,23],[65,31,75,29,"axios"],[65,36,75,34],[65,37,75,34,"default"],[65,44,75,34],[65,45,75,35,"get"],[65,48,75,38],[65,49,75,39],[65,52,75,42,"API_URL"],[65,59,75,49],[65,69,75,59],[65,71,75,61],[66,10,76,8,"headers"],[66,17,76,15],[66,19,76,17],[67,12,76,19,"Authorization"],[67,25,76,32],[67,27,76,34],[67,37,76,44,"token"],[67,42,76,49],[68,10,76,52],[69,8,77,6],[69,9,77,7],[69,10,77,8],[70,8,79,6,"setUser"],[70,15,79,13],[70,16,79,14,"response"],[70,24,79,22],[70,25,79,23,"data"],[70,29,79,27],[70,30,79,28],[71,6,80,4],[71,7,80,5],[71,8,80,6],[71,15,80,13,"error"],[71,20,80,18],[71,22,80,20],[72,8,81,6,"console"],[72,15,81,13],[72,16,81,14,"error"],[72,21,81,19],[72,22,81,20],[72,47,81,45],[72,49,81,47,"error"],[72,54,81,52],[72,55,81,53],[73,8,82,6],[73,14,82,12,"storage"],[73,27,82,19],[73,28,82,19,"storage"],[73,35,82,19],[73,36,82,20,"deleteItemAsync"],[73,51,82,35],[73,52,82,36],[73,67,82,51],[73,68,82,52],[74,6,83,4],[74,7,83,5],[74,16,83,14],[75,8,84,6,"setLoading"],[75,18,84,16],[75,19,84,17],[75,24,84,22],[75,25,84,23],[76,6,85,4],[77,4,86,2],[77,5,86,3],[78,4,88,2],[78,10,88,8,"logout"],[78,16,88,14],[78,19,88,17],[78,25,88,17,"logout"],[78,26,88,17],[78,31,88,29],[79,6,89,4],[79,10,89,8],[80,8,90,6],[80,14,90,12,"token"],[80,19,90,17],[80,22,90,20],[80,28,90,26,"storage"],[80,41,90,33],[80,42,90,33,"storage"],[80,49,90,33],[80,50,90,34,"getItemAsync"],[80,62,90,46],[80,63,90,47],[80,78,90,62],[80,79,90,63],[81,8,91,6],[81,12,91,10,"token"],[81,17,91,15],[81,19,91,17],[82,10,92,8],[82,16,92,14,"axios"],[82,21,92,19],[82,22,92,19,"default"],[82,29,92,19],[82,30,92,20,"post"],[82,34,92,24],[82,35,92,25],[82,38,92,28,"API_URL"],[82,45,92,35],[82,59,92,49],[82,61,92,51],[82,62,92,52],[82,63,92,53],[82,65,92,55],[83,12,93,10,"headers"],[83,19,93,17],[83,21,93,19],[84,14,93,21,"Authorization"],[84,27,93,34],[84,29,93,36],[84,39,93,46,"token"],[84,44,93,51],[85,12,93,54],[86,10,94,8],[86,11,94,9],[86,12,94,10],[87,8,95,6],[88,8,96,6],[88,14,96,12,"storage"],[88,27,96,19],[88,28,96,19,"storage"],[88,35,96,19],[88,36,96,20,"deleteItemAsync"],[88,51,96,35],[88,52,96,36],[88,67,96,51],[88,68,96,52],[89,8,97,6,"setUser"],[89,15,97,13],[89,16,97,14],[89,20,97,18],[89,21,97,19],[90,6,98,4],[90,7,98,5],[90,8,98,6],[90,15,98,13,"error"],[90,20,98,18],[90,22,98,20],[91,8,99,6,"console"],[91,15,99,13],[91,16,99,14,"error"],[91,21,99,19],[91,22,99,20],[91,42,99,40],[91,44,99,42,"error"],[91,49,99,47],[91,50,99,48],[92,6,100,4],[93,4,101,2],[93,5,101,3],[94,4,103,2],[94,10,103,8,"updateProfile"],[94,23,103,21],[94,26,103,24],[94,32,103,31,"profile"],[94,39,103,43],[94,43,103,48],[95,6,104,4],[95,10,104,8],[96,8,105,6],[96,14,105,12,"token"],[96,19,105,17],[96,22,105,20],[96,28,105,26,"storage"],[96,41,105,33],[96,42,105,33,"storage"],[96,49,105,33],[96,50,105,34,"getItemAsync"],[96,62,105,46],[96,63,105,47],[96,78,105,62],[96,79,105,63],[97,8,106,6],[97,14,106,12,"axios"],[97,19,106,17],[97,20,106,17,"default"],[97,27,106,17],[97,28,106,18,"put"],[97,31,106,21],[97,32,106,22],[97,35,106,25,"API_URL"],[97,42,106,32],[97,58,106,48],[97,60,106,50,"profile"],[97,67,106,57],[97,69,106,59],[98,10,107,8,"headers"],[98,17,107,15],[98,19,107,17],[99,12,107,19,"Authorization"],[99,25,107,32],[99,27,107,34],[99,37,107,44,"token"],[99,42,107,49],[100,10,107,52],[101,8,108,6],[101,9,108,7],[101,10,108,8],[102,8,109,6],[102,14,109,12,"refreshUser"],[102,25,109,23],[102,26,109,24],[102,27,109,25],[103,6,110,4],[103,7,110,5],[103,8,110,6],[103,15,110,13,"error"],[103,20,110,18],[103,22,110,20],[104,8,111,6,"console"],[104,15,111,13],[104,16,111,14,"error"],[104,21,111,19],[104,22,111,20],[104,47,111,45],[104,49,111,47,"error"],[104,54,111,52],[104,55,111,53],[105,8,112,6],[105,14,112,12,"error"],[105,19,112,17],[106,6,113,4],[107,4,114,2],[107,5,114,3],[108,4,116,2],[108,10,116,8,"refreshUser"],[108,21,116,19],[108,24,116,22],[108,30,116,22,"refreshUser"],[108,31,116,22],[108,36,116,34],[109,6,117,4],[109,10,117,8],[110,8,118,6],[110,14,118,12,"token"],[110,19,118,17],[110,22,118,20],[110,28,118,26,"storage"],[110,41,118,33],[110,42,118,33,"storage"],[110,49,118,33],[110,50,118,34,"getItemAsync"],[110,62,118,46],[110,63,118,47],[110,78,118,62],[110,79,118,63],[111,8,119,6],[111,12,119,10,"token"],[111,17,119,15],[111,19,119,17],[112,10,120,8],[112,16,120,14,"response"],[112,24,120,22],[112,27,120,25],[112,33,120,31,"axios"],[112,38,120,36],[112,39,120,36,"default"],[112,46,120,36],[112,47,120,37,"get"],[112,50,120,40],[112,51,120,41],[112,54,120,44,"API_URL"],[112,61,120,51],[112,71,120,61],[112,73,120,63],[113,12,121,10,"headers"],[113,19,121,17],[113,21,121,19],[114,14,121,21,"Authorization"],[114,27,121,34],[114,29,121,36],[114,39,121,46,"token"],[114,44,121,51],[115,12,121,54],[116,10,122,8],[116,11,122,9],[116,12,122,10],[117,10,123,8,"setUser"],[117,17,123,15],[117,18,123,16,"response"],[117,26,123,24],[117,27,123,25,"data"],[117,31,123,29],[117,32,123,30],[118,8,124,6],[119,6,125,4],[119,7,125,5],[119,8,125,6],[119,15,125,13,"error"],[119,20,125,18],[119,22,125,20],[120,8,126,6,"console"],[120,15,126,13],[120,16,126,14,"error"],[120,21,126,19],[120,22,126,20],[120,46,126,44],[120,48,126,46,"error"],[120,53,126,51],[120,54,126,52],[121,6,127,4],[122,4,128,2],[122,5,128,3],[123,4,130,2],[123,24,131,4],[123,28,131,4,"_reactJsxDevRuntime"],[123,47,131,4],[123,48,131,4,"jsxDEV"],[123,54,131,4],[123,56,131,5,"AuthContext"],[123,67,131,16],[123,68,131,17,"Provider"],[123,76,131,25],[124,6,132,6,"value"],[124,11,132,11],[124,13,132,13],[125,8,133,8,"user"],[125,12,133,12],[126,8,134,8,"loading"],[126,15,134,15],[127,8,135,8,"processSessionId"],[127,24,135,24],[128,8,136,8,"checkSession"],[128,20,136,20],[129,8,137,8,"logout"],[129,14,137,14],[130,8,138,8,"updateProfile"],[130,21,138,21],[131,8,139,8,"refreshUser"],[132,6,140,6],[132,7,140,8],[133,6,140,8,"children"],[133,14,140,8],[133,16,142,7,"children"],[134,4,142,15],[135,6,142,15,"fileName"],[135,14,142,15],[135,16,142,15,"_jsxFileName"],[135,28,142,15],[136,6,142,15,"lineNumber"],[136,16,142,15],[137,6,142,15,"columnNumber"],[137,18,142,15],[138,4,142,15],[138,11,143,26],[138,12,143,27],[139,2,145,0],[140,2,145,1,"_s"],[140,4,145,1],[140,5,38,16,"AuthProvider"],[140,17,38,28],[141,2,38,28,"_c"],[141,4,38,28],[141,7,38,16,"AuthProvider"],[141,19,38,28],[142,2,147,7],[142,11,147,16,"useAuth"],[142,18,147,23,"useAuth"],[142,19,147,23],[142,21,147,26],[143,4,147,26,"_s2"],[143,7,147,26],[144,4,148,2],[144,10,148,8,"context"],[144,17,148,15],[144,20,148,18],[144,24,148,18,"useContext"],[144,30,148,28],[144,31,148,28,"useContext"],[144,41,148,28],[144,43,148,29,"AuthContext"],[144,54,148,40],[144,55,148,41],[145,4,149,2],[145,8,149,6,"context"],[145,15,149,13],[145,20,149,18,"undefined"],[145,29,149,27],[145,31,149,29],[146,6,150,4],[146,12,150,10],[146,16,150,14,"Error"],[146,21,150,19],[146,22,150,20],[146,67,150,65],[146,68,150,66],[147,4,151,2],[148,4,152,2],[148,11,152,9,"context"],[148,18,152,16],[149,2,153,0],[150,2,153,1,"_s2"],[150,5,153,1],[150,6,147,16,"useAuth"],[150,13,147,23],[151,2,147,23],[151,6,147,23,"_c"],[151,8,147,23],[152,2,147,23,"$RefreshReg$"],[152,14,147,23],[152,15,147,23,"_c"],[152,17,147,23],[153,0,147,23],[153,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","processSessionId","checkSession","logout","updateProfile","refreshUser","useAuth"],"mappings":"AAA;OCqC;YCK;GDE;2BEE;GFkB;uBGE;GHmB;iBIE;GJa;wBKE;GLW;sBME;GNY;CDiB;OQE;CRM"},"hasCjsExports":false},"type":"js/module"}]}